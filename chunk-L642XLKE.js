var SO=Object.create;var Fp=Object.defineProperty,RO=Object.defineProperties,NO=Object.getOwnPropertyDescriptor,PO=Object.getOwnPropertyDescriptors,kO=Object.getOwnPropertyNames,Xu=Object.getOwnPropertySymbols,MO=Object.getPrototypeOf,Vp=Object.prototype.hasOwnProperty,$T=Object.prototype.propertyIsEnumerable;var HT=(n,e,t)=>e in n?Fp(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,j=(n,e)=>{for(var t in e||={})Vp.call(e,t)&&HT(n,t,e[t]);if(Xu)for(var t of Xu(e))$T.call(e,t)&&HT(n,t,e[t]);return n},ie=(n,e)=>RO(n,PO(e));var Zu=(n,e)=>{var t={};for(var r in n)Vp.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Xu)for(var r of Xu(n))e.indexOf(r)<0&&$T.call(n,r)&&(t[r]=n[r]);return t};var IG=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var OO=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of kO(e))!Vp.call(n,i)&&i!==t&&Fp(n,i,{get:()=>e[i],enumerable:!(r=NO(e,i))||r.enumerable});return n};var wG=(n,e,t)=>(t=n!=null?SO(MO(n)):{},OO(e||!n||!n.__esModule?Fp(t,"default",{value:n,enumerable:!0}):t,n));var ct=null,el=!1,Hp=1,xO=null,gt=Symbol("SIGNAL");function q(n){let e=ct;return ct=n,e}function nl(){return ct}var js={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Sa(n){if(el)throw new Error("");if(ct===null)return;ct.consumerOnSignalRead(n);let e=ct.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=ct.recomputing;if(r&&(t=e!==void 0?e.nextProducer:ct.producers,t!==void 0&&t.producer===n)){ct.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===ct&&(!r||FO(i,ct)))return;let s=Hs(ct),o={producer:n,consumer:ct,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};ct.producersTail=o,e!==void 0?e.nextProducer=o:ct.producers=o,s&&WT(n,o)}function qT(){Hp++}function $p(n){if(!(Hs(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Hp)){if(!n.producerMustRecompute(n)&&!Na(n)){Bp(n);return}n.producerRecomputeValue(n),Bp(n)}}function qp(n){if(n.consumers===void 0)return;let e=el;el=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||LO(r)}}finally{el=e}}function zp(){return ct?.consumerAllowSignalWrites!==!1}function LO(n){n.dirty=!0,qp(n),n.consumerMarkedDirty?.(n)}function Bp(n){n.dirty=!1,n.lastCleanEpoch=Hp}function Bs(n){return n&&zT(n),q(n)}function zT(n){n.producersTail=void 0,n.recomputing=!0}function Ra(n,e){q(e),n&&GT(n)}function GT(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Hs(n))do t=Gp(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Na(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||($p(t),r!==t.version))return!0}return!1}function Ci(n){if(Hs(n)){let e=n.producers;for(;e!==void 0;)e=Gp(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function WT(n,e){let t=n.consumersTail,r=Hs(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)WT(i.producer,i)}function Gp(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Hs(e)){let s=e.producers;for(;s!==void 0;)s=Gp(s)}return t}function Hs(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function Wp(n){xO?.(n)}function FO(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function Kp(n,e){return Object.is(n,e)}function rl(n,e){let t=Object.create(VO);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if($p(t),Sa(t),t.value===tl)throw t.error;return t.value};return r[gt]=t,Wp(t),r}var Up=Symbol("UNSET"),jp=Symbol("COMPUTING"),tl=Symbol("ERRORED"),VO=ie(j({},js),{value:Up,dirty:!0,error:null,equal:Kp,kind:"computed",producerMustRecompute(n){return n.value===Up||n.value===jp},producerRecomputeValue(n){if(n.value===jp)throw new Error("");let e=n.value;n.value=jp;let t=Bs(n),r,i=!1;try{r=n.computation(),q(null),i=e!==Up&&e!==tl&&r!==tl&&n.equal(e,r)}catch(s){r=tl,n.error=s}finally{Ra(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function UO(){throw new Error}var KT=UO;function YT(n){KT(n)}function Yp(n){KT=n}var jO=null;function Qp(n,e){let t=Object.create(il);t.value=n,e!==void 0&&(t.equal=e);let r=()=>QT(t);return r[gt]=t,Wp(t),[r,o=>Pa(t,o),o=>JT(t,o)]}function QT(n){return Sa(n),n.value}function Pa(n,e){zp()||YT(n),n.equal(n.value,e)||(n.value=e,BO(n))}function JT(n,e){zp()||YT(n),Pa(n,e(n.value))}var il=ie(j({},js),{equal:Kp,value:void 0,kind:"signal"});function BO(n){n.version++,qT(),qp(n),jO?.(n)}function Jp(n){let e=q(null);try{return n()}finally{q(e)}}var Xp=ie(j({},js),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function Zp(n){if(n.dirty=!1,n.version>0&&!Na(n))return;n.version++;let e=Bs(n);try{n.cleanup(),n.fn()}finally{Ra(n,e)}}function te(n){return typeof n=="function"}function $s(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var sl=$s(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ai(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var ze=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(te(r))try{r()}catch(s){e=s instanceof sl?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{XT(s)}catch(o){e=e??[],o instanceof sl?e=[...e,...o.errors]:e.push(o)}}if(e)throw new sl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)XT(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ai(t,e)}remove(e){let{_finalizers:t}=this;t&&Ai(t,e),e instanceof n&&e._removeParent(this)}};ze.EMPTY=(()=>{let n=new ze;return n.closed=!0,n})();var eg=ze.EMPTY;function ol(n){return n instanceof ze||n&&"closed"in n&&te(n.remove)&&te(n.add)&&te(n.unsubscribe)}function XT(n){te(n)?n():n.unsubscribe()}var Xt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var qs={setTimeout(n,e,...t){let{delegate:r}=qs;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=qs;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function al(n){qs.setTimeout(()=>{let{onUnhandledError:e}=Xt;if(e)e(n);else throw n})}function ka(){}var ZT=tg("C",void 0,void 0);function eb(n){return tg("E",void 0,n)}function tb(n){return tg("N",n,void 0)}function tg(n,e,t){return{kind:n,value:e,error:t}}var Si=null;function zs(n){if(Xt.useDeprecatedSynchronousErrorHandling){let e=!Si;if(e&&(Si={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Si;if(Si=null,t)throw r}}else n()}function nb(n){Xt.useDeprecatedSynchronousErrorHandling&&Si&&(Si.errorThrown=!0,Si.error=n)}var Ri=class extends ze{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ol(e)&&e.add(this)):this.destination=qO}static create(e,t,r){return new qn(e,t,r)}next(e){this.isStopped?rg(tb(e),this):this._next(e)}error(e){this.isStopped?rg(eb(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?rg(ZT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},HO=Function.prototype.bind;function ng(n,e){return HO.call(n,e)}var ig=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){cl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){cl(r)}else cl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){cl(t)}}},qn=class extends Ri{constructor(e,t,r){super();let i;if(te(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&Xt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&ng(e.next,s),error:e.error&&ng(e.error,s),complete:e.complete&&ng(e.complete,s)}):i=e}this.destination=new ig(i)}};function cl(n){Xt.useDeprecatedSynchronousErrorHandling?nb(n):al(n)}function $O(n){throw n}function rg(n,e){let{onStoppedNotification:t}=Xt;t&&qs.setTimeout(()=>t(n,e))}var qO={closed:!0,next:ka,error:$O,complete:ka};var Gs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Zt(n){return n}function zO(...n){return sg(n)}function sg(n){return n.length===0?Zt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Z=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=WO(t)?t:new qn(t,r,i);return zs(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=rb(r),new r((i,s)=>{let o=new qn({next:a=>{try{t(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Gs](){return this}pipe(...t){return sg(t)(this)}toPromise(t){return t=rb(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function rb(n){var e;return(e=n??Xt.Promise)!==null&&e!==void 0?e:Promise}function GO(n){return n&&te(n.next)&&te(n.error)&&te(n.complete)}function WO(n){return n&&n instanceof Ri||GO(n)&&ol(n)}function KO(n){return te(n?.lift)}function ue(n){return e=>{if(KO(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function de(n,e,t,r,i){return new og(n,e,t,r,i)}var og=class extends Ri{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var Ws={schedule(n){let e=requestAnimationFrame,t=cancelAnimationFrame,{delegate:r}=Ws;r&&(e=r.requestAnimationFrame,t=r.cancelAnimationFrame);let i=e(s=>{t=void 0,n(s)});return new ze(()=>t?.(i))},requestAnimationFrame(...n){let{delegate:e}=Ws;return(e?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){let{delegate:e}=Ws;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var ib=$s(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var be=(()=>{class n extends Z{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new ul(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new ib}next(t){zs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){zs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){zs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?eg:(this.currentObservers=null,s.push(t),new ze(()=>{this.currentObservers=null,Ai(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new Z;return t.source=this,t}}return n.create=(e,t)=>new ul(e,t),n})(),ul=class extends be{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:eg}};var Ma=class extends be{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Oa={now(){return(Oa.delegate||Date).now()},delegate:void 0};var xa=class extends be{constructor(e=1/0,t=1/0,r=Oa){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=o;u+=2)a=u;a&&r.splice(0,a+1)}}};var ll=class extends ze{constructor(e,t){super()}schedule(e,t=0){return this}};var La={setInterval(n,e,...t){let{delegate:r}=La;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=La;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Rr=class extends ll{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return La.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&La.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ai(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Ks=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Ks.now=Oa.now;var Nr=class extends Ks{constructor(e,t=Ks.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Pr=new Nr(Rr),ag=Pr;var dl=class extends Rr{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var hl=class extends Nr{};var cg=new hl(dl);var fl=class extends Rr{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,r=0){return r!==null&&r>0?super.requestAsyncId(e,t,r):(e.actions.push(this),e._scheduled||(e._scheduled=Ws.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,r=0){var i;if(r!=null?r>0:this.delay>0)return super.recycleAsyncId(e,t,r);let{actions:s}=e;t!=null&&t===e._scheduled&&((i=s[s.length-1])===null||i===void 0?void 0:i.id)!==t&&(Ws.cancelAnimationFrame(t),e._scheduled=void 0)}};var pl=class extends Nr{flush(e){this._active=!0;let t;e?t=e.id:(t=this._scheduled,this._scheduled=void 0);let{actions:r}=this,i;e=e||r.shift();do if(i=e.execute(e.state,e.delay))break;while((e=r[0])&&e.id===t&&r.shift());if(this._active=!1,i){for(;(e=r[0])&&e.id===t&&r.shift();)e.unsubscribe();throw i}}};var YO=new pl(fl);var Ni=new Z(n=>n.complete());function gl(n){return n&&te(n.schedule)}function ug(n){return n[n.length-1]}function ml(n){return te(ug(n))?n.pop():void 0}function gn(n){return gl(ug(n))?n.pop():void 0}function sb(n,e){return typeof ug(n)=="number"?n.pop():e}function lg(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function ab(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function u(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function ob(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Pi(n){return this instanceof Pi?(this.v=n,this):new Pi(n)}function cb(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(T){return Promise.resolve(T).then(y,p)}}function a(y,T){r[y]&&(i[y]=function(R){return new Promise(function(A,P){s.push([y,R,A,P])>1||u(y,R)})},T&&(i[y]=T(i[y])))}function u(y,T){try{l(r[y](T))}catch(R){g(s[0][3],R)}}function l(y){y.value instanceof Pi?Promise.resolve(y.value.v).then(h,p):g(s[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function g(y,T){y(T),s.shift(),s.length&&u(s[0][0],s[0][1])}}function ub(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof ob=="function"?ob(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,u){o=n[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var yl=n=>n&&typeof n.length=="number"&&typeof n!="function";function vl(n){return te(n?.then)}function _l(n){return te(n[Gs])}function El(n){return Symbol.asyncIterator&&te(n?.[Symbol.asyncIterator])}function Il(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function QO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var wl=QO();function Tl(n){return te(n?.[wl])}function bl(n){return cb(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Pi(t.read());if(i)return yield Pi(void 0);yield yield Pi(r)}}finally{t.releaseLock()}})}function Dl(n){return te(n?.getReader)}function _e(n){if(n instanceof Z)return n;if(n!=null){if(_l(n))return JO(n);if(yl(n))return XO(n);if(vl(n))return ZO(n);if(El(n))return lb(n);if(Tl(n))return ex(n);if(Dl(n))return tx(n)}throw Il(n)}function JO(n){return new Z(e=>{let t=n[Gs]();if(te(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function XO(n){return new Z(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function ZO(n){return new Z(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,al)})}function ex(n){return new Z(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function lb(n){return new Z(e=>{nx(n,e).catch(t=>e.error(t))})}function tx(n){return lb(bl(n))}function nx(n,e){var t,r,i,s;return ab(this,void 0,void 0,function*(){try{for(t=ub(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function It(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function kr(n,e=0){return ue((t,r)=>{t.subscribe(de(r,i=>It(r,n,()=>r.next(i),e),()=>It(r,n,()=>r.complete(),e),i=>It(r,n,()=>r.error(i),e)))})}function Mr(n,e=0){return ue((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function db(n,e){return _e(n).pipe(Mr(e),kr(e))}function hb(n,e){return _e(n).pipe(Mr(e),kr(e))}function fb(n,e){return new Z(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function pb(n,e){return new Z(t=>{let r;return It(t,e,()=>{r=n[wl](),It(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>te(r?.return)&&r.return()})}function Cl(n,e){if(!n)throw new Error("Iterable cannot be null");return new Z(t=>{It(t,e,()=>{let r=n[Symbol.asyncIterator]();It(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function gb(n,e){return Cl(bl(n),e)}function mb(n,e){if(n!=null){if(_l(n))return db(n,e);if(yl(n))return fb(n,e);if(vl(n))return hb(n,e);if(El(n))return Cl(n,e);if(Tl(n))return pb(n,e);if(Dl(n))return gb(n,e)}throw Il(n)}function At(n,e){return e?mb(n,e):_e(n)}function mn(...n){let e=gn(n);return At(n,e)}function rx(n,e){let t=te(n)?n:()=>n,r=i=>i.error(t());return new Z(e?i=>e.schedule(r,0,i):r)}function Or(n){return!!n&&(n instanceof Z||te(n.lift)&&te(n.subscribe))}var Fa=$s(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function yb(n){return n instanceof Date&&!isNaN(n)}function We(n,e){return ue((t,r)=>{let i=0;t.subscribe(de(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:ix}=Array;function sx(n,e){return ix(e)?n(...e):n(e)}function Al(n){return We(e=>sx(n,e))}var{isArray:ox}=Array,{getPrototypeOf:ax,prototype:cx,keys:ux}=Object;function Sl(n){if(n.length===1){let e=n[0];if(ox(e))return{args:e,keys:null};if(lx(e)){let t=ux(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function lx(n){return n&&typeof n=="object"&&ax(n)===cx}function Rl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function dx(...n){let e=gn(n),t=ml(n),{args:r,keys:i}=Sl(n);if(r.length===0)return At([],e);let s=new Z(hx(r,e,i?o=>Rl(i,o):Zt));return t?s.pipe(Al(t)):s}function hx(n,e,t=Zt){return r=>{vb(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let u=0;u<i;u++)vb(e,()=>{let l=At(n[u],e),h=!1;l.subscribe(de(r,p=>{s[u]=p,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function vb(n,e,t){n?It(t,n,e):e()}function _b(n,e,t,r,i,s,o,a){let u=[],l=0,h=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},y=R=>l<r?T(R):u.push(R),T=R=>{s&&e.next(R),l++;let A=!1;_e(t(R,h++)).subscribe(de(e,P=>{i?.(P),s?y(P):e.next(P)},()=>{A=!0},void 0,()=>{if(A)try{for(l--;u.length&&l<r;){let P=u.shift();o?It(e,o,()=>T(P)):T(P)}g()}catch(P){e.error(P)}}))};return n.subscribe(de(e,y,()=>{p=!0,g()})),()=>{a?.()}}function ki(n,e,t=1/0){return te(e)?ki((r,i)=>We((s,o)=>e(r,s,i,o))(_e(n(r,i))),t):(typeof e=="number"&&(t=e),ue((r,i)=>_b(r,i,n,t)))}function Va(n=1/0){return ki(Zt,n)}function Eb(){return Va(1)}function Mi(...n){return Eb()(At(n,gn(n)))}function Nl(n){return new Z(e=>{_e(n()).subscribe(e)})}function Ua(...n){let e=ml(n),{args:t,keys:r}=Sl(n),i=new Z(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),u=o,l=o;for(let h=0;h<o;h++){let p=!1;_e(t[h]).subscribe(de(s,g=>{p||(p=!0,l--),a[h]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||s.next(r?Rl(r,a):a),s.complete())}))}});return e?i.pipe(Al(e)):i}function Pl(n=0,e,t=ag){let r=-1;return e!=null&&(gl(e)?t=e:r=e),new Z(i=>{let s=yb(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function fx(n=0,e=Pr){return n<0&&(n=0),Pl(n,n,e)}function px(...n){let e=gn(n),t=sb(n,1/0),r=n;return r.length?r.length===1?_e(r[0]):Va(t)(At(r,e)):Ni}function Ys(n,e){return ue((t,r)=>{let i=0;t.subscribe(de(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Ib(n){return ue((e,t)=>{let r=!1,i=null,s=null,o=!1,a=()=>{if(s?.unsubscribe(),s=null,r){r=!1;let l=i;i=null,t.next(l)}o&&t.complete()},u=()=>{s=null,o&&t.complete()};e.subscribe(de(t,l=>{r=!0,i=l,s||_e(n(l)).subscribe(s=de(t,a,u))},()=>{o=!0,(!r||!s||s.closed)&&t.complete()}))})}function gx(n,e=Pr){return Ib(()=>Pl(n,e))}function dg(n){return ue((e,t)=>{let r=null,i=!1,s;r=e.subscribe(de(t,void 0,void 0,o=>{s=_e(n(o,dg(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function ja(n,e){return te(e)?ki(n,e,1):ki(n,1)}function wb(n){return ue((e,t)=>{let r=!1;e.subscribe(de(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function xr(n){return n<=0?()=>Ni:ue((e,t)=>{let r=0;e.subscribe(de(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Tb(n=mx){return ue((e,t)=>{let r=!1;e.subscribe(de(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function mx(){return new Fa}function hg(n){return ue((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function yx(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Ys((i,s)=>n(i,s,r)):Zt,xr(1),t?wb(e):Tb(()=>new Fa))}function vx(n){return n<=0?()=>Ni:ue((e,t)=>{let r=[];e.subscribe(de(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function bb(n={}){let{connector:e=()=>new be,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,u,l=0,h=!1,p=!1,g=()=>{a?.unsubscribe(),a=void 0},y=()=>{g(),o=u=void 0,h=p=!1},T=()=>{let R=o;y(),R?.unsubscribe()};return ue((R,A)=>{l++,!p&&!h&&g();let P=u=u??e();A.add(()=>{l--,l===0&&!p&&!h&&(a=fg(T,i))}),P.subscribe(A),!o&&l>0&&(o=new qn({next:F=>P.next(F),error:F=>{p=!0,g(),a=fg(y,t,F),P.error(F)},complete:()=>{h=!0,g(),a=fg(y,r),P.complete()}}),_e(R).subscribe(o))})(s)}}function fg(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new qn({next:()=>{r.unsubscribe(),n()}});return _e(e(...t)).subscribe(r)}function kl(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,bb({connector:()=>new xa(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Db(...n){let e=gn(n);return ue((t,r)=>{(e?Mi(n,t,e):Mi(n,t)).subscribe(r)})}function Oi(n,e){return ue((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(de(r,u=>{i?.unsubscribe();let l=0,h=s++;_e(n(u,h)).subscribe(i=de(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Cb(n){return ue((e,t)=>{_e(n).subscribe(de(t,()=>t.complete(),ka)),!t.closed&&e.subscribe(t)})}function _x(n,e,t){let r=te(n)||e||t?{next:n,error:e,complete:t}:n;return r?ue((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(de(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Zt}var pg;function Ml(){return pg}function yn(n){let e=pg;return pg=n,e}var Ab=Symbol("NotFound");function Qs(n){return n===Ab||n?.name==="\u0275NotFound"}var Gn=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Sg=new Gn("21.0.1");var jl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",B=class extends Error{code;constructor(e,t){super(Ur(e,t)),this.code=e}};function Ex(n){return`NG0${Math.abs(n)}`}function Ur(n,e){return`${Ex(n)}${e?": "+e:""}`}var jr=globalThis;function ge(n){for(let e in n)if(n[e]===ge)return e;throw Error("")}function kb(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Wn(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Wn).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Bl(n,e){return n?e?`${n} ${e}`:n:e||""}var Ix=ge({__forward_ref__:ge});function Ke(n){return n.__forward_ref__=Ke,n.toString=function(){return Wn(this())},n}function nt(n){return Rg(n)?n():n}function Rg(n){return typeof n=="function"&&n.hasOwnProperty(Ix)&&n.__forward_ref__===Ke}function V(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function St(n){return{providers:n.providers||[],imports:n.imports||[]}}function Wa(n){return Tx(n,Hl)}function wx(n){return Wa(n)!==null}function Tx(n,e){return n.hasOwnProperty(e)&&n[e]||null}function bx(n){let e=n?.[Hl]??null;return e||null}function mg(n){return n&&n.hasOwnProperty(xl)?n[xl]:null}var Hl=ge({\u0275prov:ge}),xl=ge({\u0275inj:ge}),U=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=V({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Ng(n){return n&&!!n.\u0275providers}var Pg=ge({\u0275cmp:ge}),kg=ge({\u0275dir:ge}),Mg=ge({\u0275pipe:ge}),Og=ge({\u0275mod:ge}),Ha=ge({\u0275fac:ge}),Ui=ge({__NG_ELEMENT_ID__:ge}),Sb=ge({__NG_ENV_ID__:ge});function Yn(n){return typeof n=="string"?n:n==null?"":String(n)}function Mb(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Yn(n)}var Ob=ge({ngErrorCode:ge}),Dx=ge({ngErrorMessage:ge}),Cx=ge({ngTokenPath:ge});function xg(n,e){return xb("",-200,e)}function $l(n,e){throw new B(-201,!1)}function xb(n,e,t){let r=new B(e,n);return r[Ob]=e,r[Dx]=n,t&&(r[Cx]=t),r}function Ax(n){return n[Ob]}var yg;function Lb(){return yg}function mt(n){let e=yg;return yg=n,e}function Lg(n,e,t){let r=Wa(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;$l(n,"Injector")}var Sx={},xi=Sx,vg="__NG_DI_FLAG__",_g=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=Li(t)||0;try{return this.injector.get(e,r&8?null:xi,r)}catch(i){if(Qs(i))return i;throw i}}};function Rx(n,e=0){let t=Ml();if(t===void 0)throw new B(-203,!1);if(t===null)return Lg(n,void 0,e);{let r=Nx(e),i=t.retrieve(n,r);if(Qs(i)){if(r.optional)return null;throw i}return i}}function W(n,e=0){return(Lb()||Rx)(nt(n),e)}function M(n,e){return W(n,Li(e))}function Li(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Nx(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Eg(n){let e=[];for(let t=0;t<n.length;t++){let r=nt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new B(900,!1);let i,s=0;for(let o=0;o<r.length;o++){let a=r[o],u=Px(a);typeof u=="number"?u===-1?i=a.token:s|=u:i=a}e.push(W(i,s))}else e.push(W(r))}return e}function Fb(n,e){return n[vg]=e,n.prototype[vg]=e,n}function Px(n){return n[vg]}function Lr(n,e){let t=n.hasOwnProperty(Ha);return t?n[Ha]:null}function Vb(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}function Ub(n){return n.flat(Number.POSITIVE_INFINITY)}function ql(n,e){n.forEach(t=>Array.isArray(t)?ql(t,e):e(t))}function Fg(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ka(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function jb(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function zl(n,e,t){let r=Xs(n,e);return r>=0?n[r|1]=t:(r=~r,jb(n,r,e,t)),r}function Gl(n,e){let t=Xs(n,e);if(t>=0)return n[t|1]}function Xs(n,e){return kx(n,e,1)}function kx(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Br={},yt=[],ji=new U(""),Vg=new U("",-1),Ug=new U(""),$a=class{get(e,t=xi){if(t===xi){let i=xb("",-201);throw i.name="\u0275NotFound",i}return t}};function jg(n){return n[Og]||null}function _n(n){return n[Pg]||null}function Bg(n){return n[kg]||null}function Bb(n){return n[Mg]||null}function wt(n){return{\u0275providers:n}}function Hb(n){return wt([{provide:ji,multi:!0,useValue:n}])}function $b(...n){return{\u0275providers:Hg(!0,n),\u0275fromNgModule:!0}}function Hg(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return ql(e,o=>{let a=o;Ll(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&qb(i,s),t}function qb(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];$g(i,s=>{e(s,r)})}}function Ll(n,e,t,r){if(n=nt(n),!n)return!1;let i=null,s=mg(n),o=!s&&_n(n);if(!s&&!o){let u=n.ngModule;if(s=mg(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)Ll(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{ql(s.imports,h=>{Ll(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&qb(l,e)}if(!a){let l=Lr(i)||(()=>new i);e({provide:i,useFactory:l,deps:yt},i),e({provide:Ug,useValue:i,multi:!0},i),e({provide:ji,useValue:()=>W(i),multi:!0},i)}let u=s.providers;if(u!=null&&!a){let l=n;$g(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function $g(n,e){for(let t of n)Ng(t)&&(t=t.\u0275providers),Array.isArray(t)?$g(t,e):e(t)}var Mx=ge({provide:String,useValue:ge});function zb(n){return n!==null&&typeof n=="object"&&Mx in n}function Ox(n){return!!(n&&n.useExisting)}function xx(n){return!!(n&&n.useFactory)}function Fi(n){return typeof n=="function"}function Gb(n){return!!n.useClass}var Ya=new U(""),Ol={},Rb={},gg;function Zs(){return gg===void 0&&(gg=new $a),gg}var ut=class{},Vi=class extends ut{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,wg(e,o=>this.processProvider(o)),this.records.set(Vg,Js(void 0,this)),i.has("environment")&&this.records.set(ut,Js(void 0,this));let s=this.records.get(Ya);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Ug,yt,{self:!0}))}retrieve(e,t){let r=Li(t)||0;try{return this.get(e,xi,r)}catch(i){if(Qs(i))return i;throw i}}destroy(){Ba(this),this._destroyed=!0;let e=q(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),q(e)}}onDestroy(e){return Ba(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Ba(this);let t=yn(this),r=mt(void 0),i;try{return e()}finally{yn(t),mt(r)}}get(e,t=xi,r){if(Ba(this),e.hasOwnProperty(Sb))return e[Sb](this);let i=Li(r),s,o=yn(this),a=mt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=jx(e)&&Wa(e);h&&this.injectableDefInScope(h)?l=Js(Ig(e),Ol):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?Zs():this.parent;return t=i&8&&t===xi?null:t,u.get(e,t)}catch(u){let l=Ax(u);throw l===-200||l===-201?new B(l,null):u}finally{mt(a),yn(o)}}resolveInjectorInitializers(){let e=q(null),t=yn(this),r=mt(void 0),i;try{let s=this.get(ji,yt,{self:!0});for(let o of s)o()}finally{yn(t),mt(r),q(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Wn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=nt(e);let t=Fi(e)?e:nt(e&&e.provide),r=Fx(e);if(!Fi(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Js(void 0,Ol,!0),i.factory=()=>Eg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=q(null);try{if(t.value===Rb)throw xg(Wn(e));return t.value===Ol&&(t.value=Rb,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&Ux(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{q(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=nt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Ig(n){let e=Wa(n),t=e!==null?e.factory:Lr(n);if(t!==null)return t;if(n instanceof U)throw new B(204,!1);if(n instanceof Function)return Lx(n);throw new B(204,!1)}function Lx(n){if(n.length>0)throw new B(204,!1);let t=bx(n);return t!==null?()=>t.factory(n):()=>new n}function Fx(n){if(zb(n))return Js(void 0,n.useValue);{let e=qg(n);return Js(e,Ol)}}function qg(n,e,t){let r;if(Fi(n)){let i=nt(n);return Lr(i)||Ig(i)}else if(zb(n))r=()=>nt(n.useValue);else if(xx(n))r=()=>n.useFactory(...Eg(n.deps||[]));else if(Ox(n))r=(i,s)=>W(nt(n.useExisting),s!==void 0&&s&8?8:void 0);else{let i=nt(n&&(n.useClass||n.provide));if(Vx(n))r=()=>new i(...Eg(n.deps));else return Lr(i)||Ig(i)}return r}function Ba(n){if(n.destroyed)throw new B(205,!1)}function Js(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Vx(n){return!!n.deps}function Ux(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function jx(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function wg(n,e){for(let t of n)Array.isArray(t)?wg(t,e):t&&Ng(t)?wg(t.\u0275providers,e):e(t)}function En(n,e){let t;n instanceof Vi?(Ba(n),t=n):t=new _g(n);let r,i=yn(t),s=mt(void 0);try{return e()}finally{yn(i),mt(s)}}function Wb(){return Lb()!==void 0||Ml()!=null}var en=0,z=1,X=2,Ge=3,jt=4,Bt=5,eo=6,to=7,Fe=8,Qn=9,In=10,we=11,no=12,zg=13,Bi=14,Rt=15,Hr=16,Hi=17,wn=18,Qa=19,Gg=20,zn=21,Wl=22,Fr=23,Nt=24,$i=25,qi=26,Ne=27,Kb=1,Wg=6,$r=7,Ja=8,zi=9,Pe=10;function Tn(n){return Array.isArray(n)&&typeof n[Kb]=="object"}function tn(n){return Array.isArray(n)&&n[Kb]===!0}function Kg(n){return(n.flags&4)!==0}function qr(n){return n.componentOffset>-1}function Xa(n){return(n.flags&1)===1}function bn(n){return!!n.template}function ro(n){return(n[X]&512)!==0}function Gi(n){return(n[X]&256)===256}var Yg="svg",Yb="math";function Ht(n){for(;Array.isArray(n);)n=n[en];return n}function Qg(n,e){return Ht(e[n])}function nn(n,e){return Ht(e[n.index])}function Za(n,e){return n.data[e]}function Jg(n,e){return n[e]}function ec(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function $t(n,e){let t=e[n];return Tn(t)?t:t[en]}function Qb(n){return(n[X]&4)===4}function Kl(n){return(n[X]&128)===128}function Jb(n){return tn(n[Ge])}function qt(n,e){return e==null?null:n[e]}function Xg(n){n[Hi]=0}function Zg(n){n[X]&1024||(n[X]|=1024,Kl(n)&&Wi(n))}function Xb(n,e){for(;n>0;)e=e[Bi],n--;return e}function tc(n){return!!(n[X]&9216||n[Nt]?.dirty)}function Yl(n){n[In].changeDetectionScheduler?.notify(8),n[X]&64&&(n[X]|=1024),tc(n)&&Wi(n)}function Wi(n){n[In].changeDetectionScheduler?.notify(0);let e=Vr(n);for(;e!==null&&!(e[X]&8192||(e[X]|=8192,!Kl(e)));)e=Vr(e)}function em(n,e){if(Gi(n))throw new B(911,!1);n[zn]===null&&(n[zn]=[]),n[zn].push(e)}function Zb(n,e){if(n[zn]===null)return;let t=n[zn].indexOf(e);t!==-1&&n[zn].splice(t,1)}function Vr(n){let e=n[Ge];return tn(e)?e[Ge]:e}function tm(n){return n[to]??=[]}function nm(n){return n.cleanup??=[]}function eD(n,e,t,r){let i=tm(e);i.push(t),n.firstCreatePass&&nm(n).push(r,i.length-1)}var re={lFrame:mD(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Tg=!1;function tD(){return re.lFrame.elementDepthCount}function nD(){re.lFrame.elementDepthCount++}function rm(){re.lFrame.elementDepthCount--}function im(){return re.bindingsEnabled}function rD(){return re.skipHydrationRootTNode!==null}function sm(n){return re.skipHydrationRootTNode===n}function om(){re.skipHydrationRootTNode=null}function K(){return re.lFrame.lView}function Ce(){return re.lFrame.tView}function iD(n){return re.lFrame.contextLView=n,n[Fe]}function sD(n){return re.lFrame.contextLView=null,n}function Ye(){let n=am();for(;n!==null&&n.type===64;)n=n.parent;return n}function am(){return re.lFrame.currentTNode}function oD(){let n=re.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ki(n,e){let t=re.lFrame;t.currentTNode=n,t.isParent=e}function cm(){return re.lFrame.isParent}function aD(){re.lFrame.isParent=!1}function cD(){return re.lFrame.contextLView}function um(){return Tg}function qa(n){let e=Tg;return Tg=n,e}function Ql(){let n=re.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function uD(){return re.lFrame.bindingIndex}function lD(n){return re.lFrame.bindingIndex=n}function Jn(){return re.lFrame.bindingIndex++}function Jl(n){let e=re.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function dD(){return re.lFrame.inI18n}function hD(n,e){let t=re.lFrame;t.bindingIndex=t.bindingRootIndex=n,Xl(e)}function fD(){return re.lFrame.currentDirectiveIndex}function Xl(n){re.lFrame.currentDirectiveIndex=n}function pD(n){let e=re.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function lm(){return re.lFrame.currentQueryIndex}function Zl(n){re.lFrame.currentQueryIndex=n}function Bx(n){let e=n[z];return e.type===2?e.declTNode:e.type===1?n[Bt]:null}function dm(n,e,t){if(t&4){let i=e,s=n;for(;i=i.parent,i===null&&!(t&1);)if(i=Bx(s),i===null||(s=s[Bi],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=re.lFrame=gD();return r.currentTNode=e,r.lView=n,!0}function ed(n){let e=gD(),t=n[z];re.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function gD(){let n=re.lFrame,e=n===null?null:n.child;return e===null?mD(n):e}function mD(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function yD(){let n=re.lFrame;return re.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var hm=yD;function td(){let n=yD();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function vD(n){return(re.lFrame.contextLView=Xb(n,re.lFrame.contextLView))[Fe]}function rn(){return re.lFrame.selectedIndex}function zr(n){re.lFrame.selectedIndex=n}function nc(){let n=re.lFrame;return Za(n.tView,n.selectedIndex)}function _D(){re.lFrame.currentNamespace=Yg}function ED(){Hx()}function Hx(){re.lFrame.currentNamespace=null}function ID(){return re.lFrame.currentNamespace}var wD=!0;function nd(){return wD}function rd(n){wD=n}function bg(n,e=null,t=null,r){let i=fm(n,e,t,r);return i.resolveInjectorInitializers(),i}function fm(n,e=null,t=null,r,i=new Set){let s=[t||yt,$b(n)];return r=r||(typeof n=="object"?void 0:Wn(n)),new Vi(s,e||Zs(),r||null,i)}var Le=class n{static THROW_IF_NOT_FOUND=xi;static NULL=new $a;static create(e,t){if(Array.isArray(e))return bg({name:""},t,e,"");{let r=e.name??"";return bg({name:r},e.parent,e.providers,r)}}static \u0275prov=V({token:n,providedIn:"any",factory:()=>W(Vg)});static __NG_ELEMENT_ID__=-1},ke=new U(""),Tt=(()=>{class n{static __NG_ELEMENT_ID__=$x;static __NG_ENV_ID__=t=>t}return n})(),Fl=class extends Tt{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Gi(this._lView)}onDestroy(e){let t=this._lView;return em(t,e),()=>Zb(t,e)}};function $x(){return new Fl(K())}var TD=!1,Yi=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Ma(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Z(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=V({token:n,providedIn:"root",factory:()=>new n})}return n})(),Dg=class extends be{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Wb()&&(this.destroyRef=M(Tt,{optional:!0})??void 0,this.pendingTasks=M(Yi,{optional:!0})??void 0)}emit(e){let t=q(null);try{super.next(e)}finally{q(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof ze&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},rt=Dg;function Vl(...n){}function pm(n){let e,t;function r(){n=Vl;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function gm(n){return queueMicrotask(()=>n()),()=>{n=Vl}}var mm="isAngularZone",za=mm+"_ID",qx=0,De=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new rt(!1);onMicrotaskEmpty=new rt(!1);onStable=new rt(!1);onError=new rt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=TD}=e;if(typeof Zone>"u")throw new B(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,Wx(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(mm)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new B(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new B(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,zx,Vl,Vl);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},zx={};function ym(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Gx(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){pm(()=>{n.callbackScheduled=!1,Cg(n),n.isCheckStableRunning=!0,ym(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Cg(n)}function Wx(n){let e=()=>{Gx(n)},t=qx++;n._inner=n._inner.fork({name:"angular",properties:{[mm]:!0,[za]:t,[za+t]:!0},onInvokeTask:(r,i,s,o,a,u)=>{if(Kx(u))return r.invokeTask(s,o,a,u);try{return Nb(n),r.invokeTask(s,o,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Pb(n)}},onInvoke:(r,i,s,o,a,u,l)=>{try{return Nb(n),r.invoke(s,o,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Yx(u)&&e(),Pb(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,Cg(n),ym(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function Cg(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Nb(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Pb(n){n._nesting--,ym(n)}var Ga=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new rt;onMicrotaskEmpty=new rt;onStable=new rt;onError=new rt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function Kx(n){return bD(n,"__ignore_ng_zone__")}function Yx(n){return bD(n,"__scheduler_tick__")}function bD(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var vn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Xn=new U("",{factory:()=>{let n=M(De),e=M(ut),t;return r=>{n.runOutsideAngular(()=>{e.destroyed&&!t?setTimeout(()=>{throw r}):(t??=e.get(vn),t.handleError(r))})}}}),DD={provide:ji,useValue:()=>{let n=M(vn,{optional:!0})},multi:!0},Qx=new U("",{factory:()=>{let n=M(ke).defaultView;if(!n)return;let e=M(Xn),t=s=>{e(s.reason),s.preventDefault()},r=s=>{s.error?e(s.error):e(new Error(s.message,{cause:s})),s.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),M(Tt).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function Jx(){return wt([Hb(()=>void M(Qx))])}function Pt(n,e){let[t,r,i]=Qp(n,e?.equal),s=t,o=s[gt];return s.set=r,s.update=i,s.asReadonly=CD.bind(s),s}function CD(){let n=this[gt];if(n.readonlyFn===void 0){let e=()=>this();e[gt]=n,n.readonlyFn=e}return n.readonlyFn}var rc=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=Xx}return n})();function Xx(){return new rc(K(),Ye())}var Kn=class{},ic=new U("",{factory:()=>!0});var vm=new U(""),Gr=(()=>{class n{internalPendingTasks=M(Yi);scheduler=M(Kn);errorHandler=M(Xn);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=V({token:n,providedIn:"root",factory:()=>new n})}return n})(),id=(()=>{class n{static \u0275prov=V({token:n,providedIn:"root",factory:()=>new Ag})}return n})(),Ag=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}},Ul=class{[gt];constructor(e){this[gt]=e}destroy(){this[gt].destroy()}};function AD(n,e){let t=e?.injector??M(Le),r=e?.manualCleanup!==!0?t.get(Tt):null,i,s=t.get(rc,null,{optional:!0}),o=t.get(Kn);return s!==null?(i=t1(s.view,o,n),r instanceof Fl&&r._lView===s.view&&(r=null)):i=n1(n,t.get(id),o),i.injector=t,r!==null&&(i.onDestroyFns=[r.onDestroy(()=>i.destroy())]),new Ul(i)}var SD=ie(j({},Xp),{cleanupFns:void 0,zone:null,onDestroyFns:null,run(){let n=qa(!1);try{Zp(this)}finally{qa(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=q(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],q(n)}}}),Zx=ie(j({},SD),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){if(Ci(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.scheduler.remove(this)}}),e1=ie(j({},SD),{consumerMarkedDirty(){this.view[X]|=8192,Wi(this.view),this.notifier.notify(13)},destroy(){if(Ci(this),this.onDestroyFns!==null)for(let n of this.onDestroyFns)n();this.cleanup(),this.view[Fr]?.delete(this)}});function t1(n,e,t){let r=Object.create(e1);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=RD(r,t),n[Fr]??=new Set,n[Fr].add(r),r.consumerMarkedDirty(r),r}function n1(n,e,t){let r=Object.create(Zx);return r.fn=RD(r,n),r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function RD(n,e){return()=>{e(t=>(n.cleanupFns??=[]).push(t))}}function kt(n){return Jp(n)}function lo(n){return{toString:n}.toString()}var sd="__parameters__";function u1(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function l1(n,e,t){return lo(()=>{let r=u1(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(u,l,h){let p=u.hasOwnProperty(sd)?u[sd]:Object.defineProperty(u,sd,{value:[]})[sd];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var bt=Fb(l1("Optional"),8);function d1(n){return typeof n=="function"}function oC(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var gd=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}},Yr=(()=>{let n=()=>aC;return n.ngInherit=!0,n})();function aC(n){return n.type.prototype.ngOnChanges&&(n.setInput=f1),h1}function h1(){let n=uC(this),e=n?.current;if(e){let t=n.previous;if(t===Br)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function f1(n,e,t,r,i){let s=this.declaredInputs[r],o=uC(n)||p1(n,{previous:Br,current:null}),a=o.current||(o.current={}),u=o.previous,l=u[s];a[s]=new gd(l&&l.currentValue,t,u===Br),oC(n,e,i,t)}var cC="__ngSimpleChanges__";function uC(n){return n[cC]||null}function p1(n,e){return n[cC]=e}var ND=[];var me=function(n,e=null,t){for(let r=0;r<ND.length;r++){let i=ND[r];i(n,e,t)}},he=(function(n){return n[n.TemplateCreateStart=0]="TemplateCreateStart",n[n.TemplateCreateEnd=1]="TemplateCreateEnd",n[n.TemplateUpdateStart=2]="TemplateUpdateStart",n[n.TemplateUpdateEnd=3]="TemplateUpdateEnd",n[n.LifecycleHookStart=4]="LifecycleHookStart",n[n.LifecycleHookEnd=5]="LifecycleHookEnd",n[n.OutputStart=6]="OutputStart",n[n.OutputEnd=7]="OutputEnd",n[n.BootstrapApplicationStart=8]="BootstrapApplicationStart",n[n.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",n[n.BootstrapComponentStart=10]="BootstrapComponentStart",n[n.BootstrapComponentEnd=11]="BootstrapComponentEnd",n[n.ChangeDetectionStart=12]="ChangeDetectionStart",n[n.ChangeDetectionEnd=13]="ChangeDetectionEnd",n[n.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",n[n.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",n[n.AfterRenderHooksStart=16]="AfterRenderHooksStart",n[n.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",n[n.ComponentStart=18]="ComponentStart",n[n.ComponentEnd=19]="ComponentEnd",n[n.DeferBlockStateStart=20]="DeferBlockStateStart",n[n.DeferBlockStateEnd=21]="DeferBlockStateEnd",n[n.DynamicComponentStart=22]="DynamicComponentStart",n[n.DynamicComponentEnd=23]="DynamicComponentEnd",n[n.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",n[n.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",n})(he||{});function g1(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=aC(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function lC(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function ld(n,e,t){dC(n,e,3,t)}function dd(n,e,t,r){(n[X]&3)===t&&dC(n,e,t,r)}function _m(n,e){let t=n[X];(t&3)===e&&(t&=16383,t+=1,n[X]=t)}function dC(n,e,t,r){let i=r!==void 0?n[Hi]&65535:0,s=r??-1,o=e.length-1,a=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[Hi]+=65536),(a<s||s==-1)&&(m1(n,t,e,u),n[Hi]=(n[Hi]&4294901760)+u+2),u++}function PD(n,e){me(he.LifecycleHookStart,n,e);let t=q(null);try{e.call(n)}finally{q(t),me(he.LifecycleHookEnd,n,e)}}function m1(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[X]>>14<n[Hi]>>16&&(n[X]&3)===e&&(n[X]+=16384,PD(a,s)):PD(a,s)}var so=-1,Ji=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function y1(n){return(n.flags&8)!==0}function v1(n){return(n.flags&16)!==0}function _1(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];E1(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function hC(n){return n===3||n===4||n===6}function E1(n){return n.charCodeAt(0)===64}function oo(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?kD(n,t,i,null,e[++r]):kD(n,t,i,null,null))}}return n}function kD(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){i!==null&&(n[s+1]=i);return}s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),i!==null&&n.splice(s++,0,i)}function fC(n){return n!==so}function md(n){return n&32767}function I1(n){return n>>16}function yd(n,e){let t=I1(n),r=e;for(;t>0;)r=r[Bi],t--;return r}var Rm=!0;function vd(n){let e=Rm;return Rm=n,e}var w1=256,pC=w1-1,gC=5,T1=0,Dn={};function b1(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ui)&&(r=t[Ui]),r==null&&(r=t[Ui]=T1++);let i=r&pC,s=1<<i;e.data[n+(i>>gC)]|=s}function _d(n,e){let t=mC(n,e);if(t!==-1)return t;let r=e[z];r.firstCreatePass&&(n.injectorIndex=e.length,Em(r.data,n),Em(e,null),Em(r.blueprint,null));let i=fy(n,e),s=n.injectorIndex;if(fC(i)){let o=md(i),a=yd(i,e),u=a[z].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function Em(n,e){n.push(0,0,0,0,0,0,0,0,e)}function mC(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function fy(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=IC(i),r===null)return so;if(t++,i=i[Bi],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return so}function Nm(n,e,t){b1(n,e,t)}function D1(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let s=t[i];if(hC(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(s===e)return t[i+1];i=i+2}}}return null}function yC(n,e,t){if(t&8||n!==void 0)return n;$l(e,"NodeInjector")}function vC(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[Qn],s=mt(void 0);try{return i?i.get(e,r,t&8):Lg(e,r,t&8)}finally{mt(s)}}return yC(r,e,t)}function _C(n,e,t,r=0,i){if(n!==null){if(e[X]&2048&&!(r&2)){let o=R1(n,e,t,r,Dn);if(o!==Dn)return o}let s=EC(n,e,t,r,Dn);if(s!==Dn)return s}return vC(e,t,r,i)}function EC(n,e,t,r,i){let s=A1(t);if(typeof s=="function"){if(!dm(e,n,r))return r&1?yC(i,t,r):vC(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&8))$l(t);else return o}finally{hm()}}else if(typeof s=="number"){let o=null,a=mC(n,e),u=so,l=r&1?e[Rt][Bt]:null;for((a===-1||r&4)&&(u=a===-1?fy(n,e):e[a+8],u===so||!OD(r,!1)?a=-1:(o=e[z],a=md(u),e=yd(u,e)));a!==-1;){let h=e[z];if(MD(s,a,h.data)){let p=C1(a,e,t,o,r,l);if(p!==Dn)return p}u=e[a+8],u!==so&&OD(r,e[z].data[a+8]===l)&&MD(s,a,e)?(o=h,a=md(u),e=yd(u,e)):a=-1}}return i}function C1(n,e,t,r,i,s){let o=e[z],a=o.data[n+8],u=r==null?qr(a)&&Rm:r!=o&&(a.type&3)!==0,l=i&1&&s===a,h=hd(a,o,t,u,l);return h!==null?ac(e,o,h,a,i):Dn}function hd(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,u=n.directiveStart,l=n.directiveEnd,h=s>>20,p=r?a:a+h,g=i?a+h:l;for(let y=p;y<g;y++){let T=o[y];if(y<u&&t===T||y>=u&&T.type===t)return y}if(i){let y=o[u];if(y&&bn(y)&&y.type===t)return u}return null}function ac(n,e,t,r,i){let s=n[t],o=e.data;if(s instanceof Ji){let a=s;if(a.resolving){let y=Mb(o[t]);throw xg(y)}let u=vd(a.canSeeViewProviders);a.resolving=!0;let l=o[t].type||o[t],h,p=a.injectImpl?mt(a.injectImpl):null,g=dm(n,r,0);try{s=n[t]=a.factory(void 0,i,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&g1(t,o[t],e)}finally{p!==null&&mt(p),vd(u),a.resolving=!1,hm()}}return s}function A1(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Ui)?n[Ui]:void 0;return typeof e=="number"?e>=0?e&pC:S1:e}function MD(n,e,t){let r=1<<n;return!!(t[e+(n>>gC)]&r)}function OD(n,e){return!(n&2)&&!(n&1&&e)}var Qi=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return _C(this._tNode,this._lView,e,Li(r),t)}};function S1(){return new Qi(Ye(),K())}function Dt(n){return lo(()=>{let e=n.prototype.constructor,t=e[Ha]||Pm(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[Ha]||Pm(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Pm(n){return Rg(n)?()=>{let e=Pm(nt(n));return e&&e()}:Lr(n)}function R1(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[X]&2048&&!ro(o);){let a=EC(s,o,t,r|2,Dn);if(a!==Dn)return a;let u=s.parent;if(!u){let l=o[Gg];if(l){let h=l.get(t,Dn,r);if(h!==Dn)return h}u=IC(o),o=o[Bi]}s=u}return i}function IC(n){let e=n[z],t=e.type;return t===2?e.declTNode:t===1?n[Bt]:null}function py(n){return D1(Ye(),n)}function N1(){return ho(Ye(),K())}function ho(n,e){return new Ot(nn(n,e))}var Ot=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=N1}return n})();function P1(n){return n instanceof Ot?n.nativeElement:n}function k1(){return this._results[Symbol.iterator]()}var Ed=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new be}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=Ub(e);(this._changesDetected=!Vb(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=k1};function wC(n){return(n.flags&128)===128}var gy=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(gy||{}),TC=new Map,M1=0;function O1(){return M1++}function x1(n){TC.set(n[Qa],n)}function km(n){TC.delete(n[Qa])}var xD="__ngContext__";function ao(n,e){Tn(e)?(n[xD]=e[Qa],x1(e)):n[xD]=e}function bC(n){return CC(n[no])}function DC(n){return CC(n[jt])}function CC(n){for(;n!==null&&!tn(n);)n=n[jt];return n}var Mm;function my(n){Mm=n}function AC(){if(Mm!==void 0)return Mm;if(typeof document<"u")return document;throw new B(210,!1)}var Md=new U("",{factory:()=>L1}),L1="ng";var Od=new U(""),ns=new U("",{providedIn:"platform",factory:()=>"unknown"});var xd=new U("",{factory:()=>M(ke).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var SC="r";var RC="di";var NC=!1,PC=new U("",{factory:()=>NC});var kC=new U("");var F1=(n,e,t,r)=>{};function V1(n,e,t,r){F1(n,e,t,r)}function yy(n){return(n.flags&32)===32}var U1=()=>null;function MC(n,e,t=!1){return U1(n,e,t)}function OC(n,e){let t=n.contentQueries;if(t!==null){let r=q(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];Zl(s),a.contentQueries(2,e[o],o)}}}finally{q(r)}}}function Om(n,e,t){Zl(0);let r=q(null);try{e(n,t)}finally{q(r)}}function xC(n,e,t){if(Kg(e)){let r=q(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let u=t[o];a.contentQueries(1,u,o)}}}finally{q(r)}}}var an=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n[n.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",n})(an||{}),od;function j1(){if(od===void 0&&(od=null,jr.trustedTypes))try{od=jr.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return od}function Ld(n){return j1()?.createHTML(n)||n}var ad;function LC(){if(ad===void 0&&(ad=null,jr.trustedTypes))try{ad=jr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ad}function LD(n){return LC()?.createHTML(n)||n}function FD(n){return LC()?.createScriptURL(n)||n}var Zn=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${jl})`}},xm=class extends Zn{getTypeName(){return"HTML"}},Lm=class extends Zn{getTypeName(){return"Style"}},Fm=class extends Zn{getTypeName(){return"Script"}},Vm=class extends Zn{getTypeName(){return"URL"}},Um=class extends Zn{getTypeName(){return"ResourceURL"}};function xt(n){return n instanceof Zn?n.changingThisBreaksApplicationSecurity:n}function An(n,e){let t=FC(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${jl})`)}return t===e}function FC(n){return n instanceof Zn&&n.getTypeName()||null}function vy(n){return new xm(n)}function _y(n){return new Lm(n)}function Ey(n){return new Fm(n)}function Iy(n){return new Vm(n)}function wy(n){return new Um(n)}function B1(n){let e=new Bm(n);return H1()?new jm(e):e}var jm=class{inertDocumentHelper;constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let t=new window.DOMParser().parseFromString(Ld(e),"text/html").body;return t===null?this.inertDocumentHelper.getInertBodyElement(e):(t.firstChild?.remove(),t)}catch{return null}}},Bm=class{defaultDoc;inertDocument;constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let t=this.inertDocument.createElement("template");return t.innerHTML=Ld(e),t}};function H1(){try{return!!new window.DOMParser().parseFromString(Ld(""),"text/html")}catch{return!1}}var $1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function fc(n){return n=String(n),n.match($1)?n:"unsafe:"+n}function er(n){let e={};for(let t of n.split(","))e[t]=!0;return e}function pc(...n){let e={};for(let t of n)for(let r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}var VC=er("area,br,col,hr,img,wbr"),UC=er("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),jC=er("rp,rt"),q1=pc(jC,UC),z1=pc(UC,er("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),G1=pc(jC,er("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),VD=pc(VC,z1,G1,q1),BC=er("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),W1=er("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),K1=er("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),Y1=pc(BC,W1,K1),Q1=er("script,style,template"),Hm=class{sanitizedSomething=!1;buf=[];sanitizeChildren(e){let t=e.firstChild,r=!0,i=[];for(;t;){if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild){i.push(t),t=Z1(t);continue}for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let s=X1(t);if(s){t=s;break}t=i.pop()}}return this.buf.join("")}startElement(e){let t=UD(e).toLowerCase();if(!VD.hasOwnProperty(t))return this.sanitizedSomething=!0,!Q1.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);let r=e.attributes;for(let i=0;i<r.length;i++){let s=r.item(i),o=s.name,a=o.toLowerCase();if(!Y1.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let u=s.value;BC[a]&&(u=fc(u)),this.buf.push(" ",o,'="',jD(u),'"')}return this.buf.push(">"),!0}endElement(e){let t=UD(e).toLowerCase();VD.hasOwnProperty(t)&&!VC.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(jD(e))}};function J1(n,e){return(n.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function X1(n){let e=n.nextSibling;if(e&&n!==e.previousSibling)throw HC(e);return e}function Z1(n){let e=n.firstChild;if(e&&J1(n,e))throw HC(e);return e}function UD(n){let e=n.nodeName;return typeof e=="string"?e:"FORM"}function HC(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}var eL=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,tL=/([^\#-~ |!])/g;function jD(n){return n.replace(/&/g,"&amp;").replace(eL,function(e){let t=e.charCodeAt(0),r=e.charCodeAt(1);return"&#"+((t-55296)*1024+(r-56320)+65536)+";"}).replace(tL,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var cd;function Fd(n,e){let t=null;try{cd=cd||B1(n);let r=e?String(e):"";t=cd.getInertBodyElement(r);let i=5,s=r;do{if(i===0)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=t.innerHTML,t=cd.getInertBodyElement(r)}while(r!==s);let a=new Hm().sanitizeChildren(BD(t)||t);return Ld(a)}finally{if(t){let r=BD(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}function BD(n){return"content"in n&&nL(n)?n.content:null}function nL(n){return n.nodeType===Node.ELEMENT_NODE&&n.nodeName==="TEMPLATE"}var zt=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(zt||{});function rL(n){let e=Ty();return e?LD(e.sanitize(zt.HTML,n)||""):An(n,"HTML")?LD(xt(n)):Fd(AC(),Yn(n))}function $C(n){let e=Ty();return e?e.sanitize(zt.URL,n)||"":An(n,"URL")?xt(n):fc(Yn(n))}function qC(n){let e=Ty();if(e)return FD(e.sanitize(zt.RESOURCE_URL,n)||"");if(An(n,"ResourceURL"))return FD(xt(n));throw new B(904,!1)}function iL(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?qC:$C}function sL(n,e,t){return iL(e,t)(n)}function Ty(){let n=K();return n&&n[In].sanitizer}function oL(n){return n.ownerDocument}function zC(n){return n instanceof Function?n():n}function aL(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}var GC="ng-template";function cL(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&aL(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(by(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function by(n){return n.type===4&&n.value!==GC}function uL(n,e,t){let r=n.type===4&&!t?GC:n.value;return e===r}function lL(n,e,t){let r=4,i=n.attrs,s=i!==null?fL(i):0,o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!sn(r)&&!sn(u))return!1;if(o&&sn(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!uL(n,u,t)||u===""&&e.length===1){if(sn(r))return!1;o=!0}}else if(r&8){if(i===null||!cL(n,i,u,t)){if(sn(r))return!1;o=!0}}else{let l=e[++a],h=dL(u,i,by(n),t);if(h===-1){if(sn(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(sn(r))return!1;o=!0}}}}return sn(r)||o}function sn(n){return(n&1)===0}function dL(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return pL(e,n)}function hL(n,e,t=!1){for(let r=0;r<e.length;r++)if(lL(n,e[r],t))return!0;return!1}function fL(n){for(let e=0;e<n.length;e++){let t=n[e];if(hC(t))return e}return n.length}function pL(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function HD(n,e){return n?":not("+e.trim()+")":e}function gL(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!sn(o)&&(e+=HD(s,i),i=""),r=o,s=s||!sn(r);t++}return i!==""&&(e+=HD(s,i)),e}function mL(n){return n.map(gL).join(",")}function yL(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!sn(i))break;i=s}r++}return t.length&&e.push(1,...t),e}var lt={};function vL(n,e){return n.createText(e)}function _L(n,e,t){n.setValue(e,t)}function WC(n,e,t){return n.createElement(e,t)}function Id(n,e,t,r,i){n.insertBefore(e,t,r,i)}function KC(n,e,t){n.appendChild(e,t)}function $D(n,e,t,r,i){r!==null?Id(n,e,t,r,i):KC(n,e,t)}function YC(n,e,t,r){n.removeChild(null,e,t,r)}function EL(n,e,t){n.setAttribute(e,"style",t)}function IL(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function QC(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&_1(n,e,r),i!==null&&IL(n,e,i),s!==null&&EL(n,e,s)}function Dy(n,e,t,r,i,s,o,a,u,l,h){let p=Ne+r,g=p+i,y=wL(p,g),T=typeof l=="function"?l():l;return y[z]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:T,incompleteFirstPass:!1,ssrId:h}}function wL(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:lt);return t}function TL(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Dy(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Cy(n,e,t,r,i,s,o,a,u,l,h){let p=e.blueprint.slice();return p[en]=i,p[X]=r|4|128|8|64|1024,(l!==null||n&&n[X]&2048)&&(p[X]|=2048),Xg(p),p[Ge]=p[Bi]=n,p[Fe]=t,p[In]=o||n&&n[In],p[we]=a||n&&n[we],p[Qn]=u||n&&n[Qn]||null,p[Bt]=s,p[Qa]=O1(),p[eo]=h,p[Gg]=l,p[Rt]=e.type==2?n[Rt]:p,p}function bL(n,e,t){let r=nn(e,n),i=TL(t),s=n[In].rendererFactory,o=Ay(n,Cy(n,i,null,JC(t),r,e,null,s.createRenderer(r,t),null,null,null));return n[e.index]=o}function JC(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function XC(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Ay(n,e){return n[no]?n[zg][jt]=e:n[no]=e,n[zg]=e,e}function DL(n=1){ZC(Ce(),K(),rn()+n,!1)}function ZC(n,e,t,r){if(!r)if((e[X]&3)===3){let s=n.preOrderCheckHooks;s!==null&&ld(e,s,t)}else{let s=n.preOrderHooks;s!==null&&dd(e,s,0,t)}zr(t)}var Vd=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(Vd||{});function $m(n,e,t,r){let i=q(null);try{let[s,o,a]=n.inputs[t],u=null;(o&Vd.SignalBased)!==0&&(u=e[s][gt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,s):oC(e,u,s,r)}finally{q(i)}}var Cn=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(Cn||{}),CL;function Sy(n,e){return CL(n,e)}var Xi=new Set,Ud=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Ud||{}),tr=new U(""),qD=new Set;function nr(n){qD.has(n)||(qD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Ry=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=V({token:n,providedIn:"root",factory:()=>new n})}return n})(),eA=[0,1,2,3],tA=(()=>{class n{ngZone=M(De);scheduler=M(Kn);errorHandler=M(vn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){M(tr,{optional:!0})}execute(){let t=this.sequences.size>0;t&&me(he.AfterRenderHooksStart),this.executing=!0;for(let r of eA)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let s=i.hooks[r];return s(i.pipelinedValue)},i.snapshot))}catch(s){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(s)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&me(he.AfterRenderHooksEnd)}register(t){let{view:r}=t;r!==void 0?((r[$i]??=[]).push(t),Wi(r),r[X]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Ud.AFTER_NEXT_RENDER,t):t()}static \u0275prov=V({token:n,providedIn:"root",factory:()=>new n})}return n})(),wd=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,s,o=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=o,this.unregisterOnDestroy=s?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[$i];e&&(this.view[$i]=e.filter(t=>t!==this))}};function Ny(n,e){let t=e?.injector??M(Le);return nr("NgAfterNextRender"),SL(n,t,e,!0)}function AL(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function SL(n,e,t,r){let i=e.get(Ry);i.impl??=e.get(tA);let s=e.get(tr,null,{optional:!0}),o=t?.manualCleanup!==!0?e.get(Tt):null,a=e.get(rc,null,{optional:!0}),u=new wd(i.impl,AL(n),a?.view,r,o,s?.snapshot(null));return i.impl.register(u),u}var nA=new U("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function rA(n,e,t){let r=n.get(nA);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function RL(n,e){let t=n.get(nA);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)t.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function NL(n,e){for(let[t,r]of e)rA(n,r.animateFns)}function zD(n,e,t,r){let i=n?.[qi]?.enter;e!==null&&i&&i.has(t.index)&&NL(r,i)}function io(n,e,t,r,i,s,o,a){if(i!=null){let u,l=!1;tn(i)?u=i:Tn(i)&&(l=!0,i=i[en]);let h=Ht(i);n===0&&r!==null?(zD(a,r,s,t),o==null?KC(e,r,h):Id(e,r,h,o||null,!0)):n===1&&r!==null?(zD(a,r,s,t),Id(e,r,h,o||null,!0)):n===2?GD(a,s,t,p=>{YC(e,h,l,p)}):n===3&&GD(a,s,t,()=>{e.destroyNode(h)}),u!=null&&$L(e,n,t,u,s,r,o)}}function PL(n,e){iA(n,e),e[en]=null,e[Bt]=null}function kL(n,e,t,r,i,s){r[en]=i,r[Bt]=e,Bd(n,r,t,1,i,s)}function iA(n,e){e[In].changeDetectionScheduler?.notify(9),Bd(n,e,e[we],2,null,null)}function ML(n){let e=n[no];if(!e)return Im(n[z],n);for(;e;){let t=null;if(Tn(e))t=e[no];else{let r=e[Pe];r&&(t=r)}if(!t){for(;e&&!e[jt]&&e!==n;)Tn(e)&&Im(e[z],e),e=e[Ge];e===null&&(e=n),Tn(e)&&Im(e[z],e),t=e&&e[jt]}e=t}}function Py(n,e){let t=n[zi],r=t.indexOf(e);t.splice(r,1)}function jd(n,e){if(Gi(e))return;let t=e[we];t.destroyNode&&Bd(n,e,t,3,null,null),ML(e)}function Im(n,e){if(Gi(e))return;let t=q(null);try{e[X]&=-129,e[X]|=256,e[Nt]&&Ci(e[Nt]),LL(n,e),xL(n,e),e[z].type===1&&e[we].destroy();let r=e[Hr];if(r!==null&&tn(e[Ge])){r!==e[Ge]&&Py(r,e);let i=e[wn];i!==null&&i.detachView(n)}km(e)}finally{q(t)}}function GD(n,e,t,r){let i=n?.[qi];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&Xi.add(n),rA(t,()=>{if(i.leave&&i.leave.has(e.index)){let o=i.leave.get(e.index),a=[];if(o){for(let u=0;u<o.animateFns.length;u++){let l=o.animateFns[u],{promise:h}=l();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),OL(n,r)}else n&&Xi.delete(n),r(!1)},i)}function OL(n,e){let t=n[qi]?.running;if(t){t.then(()=>{n[qi].running=void 0,Xi.delete(n),e(!0)});return}e(!1)}function xL(n,e){let t=n.cleanup,r=e[to];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let a=t[o+3];a>=0?r[a]():r[-a].unsubscribe(),o+=2}else{let a=r[t[o+1]];t[o].call(a)}r!==null&&(e[to]=null);let i=e[zn];if(i!==null){e[zn]=null;for(let o=0;o<i.length;o++){let a=i[o];a()}}let s=e[Fr];if(s!==null){e[Fr]=null;for(let o of s)o.destroy()}}function LL(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Ji)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],u=s[o+1];me(he.LifecycleHookStart,a,u);try{u.call(a)}finally{me(he.LifecycleHookEnd,a,u)}}else{me(he.LifecycleHookStart,i,s);try{s.call(i)}finally{me(he.LifecycleHookEnd,i,s)}}}}}function FL(n,e,t){return VL(n,e.parent,t)}function VL(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[en];if(qr(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===an.None||i===an.Emulated)return null}return nn(r,t)}function UL(n,e,t){return BL(n,e,t)}function jL(n,e,t){return n.type&40?nn(n,t):null}var BL=jL,WD;function ky(n,e,t,r){let i=FL(n,r,e),s=e[we],o=r.parent||e[Bt],a=UL(o,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)$D(s,i,t[u],a,!1);else $D(s,i,t,a,!1);WD!==void 0&&WD(s,r,e,t,i)}function sc(n,e){if(e!==null){let t=e.type;if(t&3)return nn(e,n);if(t&4)return qm(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return sc(n,r);{let i=n[e.index];return tn(i)?qm(-1,i):Ht(i)}}else{if(t&128)return sc(n,e.next);if(t&32)return Sy(e,n)()||Ht(n[e.index]);{let r=sA(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Vr(n[Rt]);return sc(i,r)}else return sc(n,e.next)}}}return null}function sA(n,e){if(e!==null){let r=n[Rt][Bt],i=e.projection;return r.projection[i]}return null}function qm(n,e){let t=Pe+n+1;if(t<e.length){let r=e[t],i=r[z].firstChild;if(i!==null)return sc(r,i)}return e[$r]}function My(n,e,t,r,i,s,o){for(;t!=null;){let a=r[Qn];if(t.type===128){t=t.next;continue}let u=r[t.index],l=t.type;if(o&&e===0&&(u&&ao(Ht(u),r),t.flags|=2),!yy(t))if(l&8)My(n,e,t.child,r,i,s,!1),io(e,n,a,i,u,t,s,r);else if(l&32){let h=Sy(t,r),p;for(;p=h();)io(e,n,a,i,p,t,s,r);io(e,n,a,i,u,t,s,r)}else l&16?HL(n,e,r,t,i,s):io(e,n,a,i,u,t,s,r);t=o?t.projectionNext:t.next}}function Bd(n,e,t,r,i,s){My(t,r,n.firstChild,e,i,s,!1)}function HL(n,e,t,r,i,s){let o=t[Rt],u=o[Bt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];io(e,n,t[Qn],i,h,r,s,t)}else{let l=u,h=o[Ge];wC(r)&&(l.flags|=128),My(n,e,l,h,i,s,!0)}}function $L(n,e,t,r,i,s,o){let a=r[$r],u=Ht(r);a!==u&&io(e,n,t,s,a,i,o);for(let l=Pe;l<r.length;l++){let h=r[l];Bd(h[z],h,n,e,s,a)}}function qL(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:Cn.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Cn.Important),n.setStyle(t,r,i,s))}}function oA(n,e,t,r,i){let s=rn(),o=r&2;try{zr(-1),o&&e.length>Ne&&ZC(n,e,Ne,!1);let a=o?he.TemplateUpdateStart:he.TemplateCreateStart;me(a,i,t),t(r,i)}finally{zr(s);let a=o?he.TemplateUpdateEnd:he.TemplateCreateEnd;me(a,i,t)}}function Oy(n,e,t){QL(n,e,t),(t.flags&64)===64&&JL(n,e,t)}function Hd(n,e,t=nn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function zL(n,e,t,r){let s=r.get(PC,NC)||t===an.ShadowDom||t===an.ExperimentalIsolatedShadowDom,o=n.selectRootElement(e,s);return GL(o),o}function GL(n){WL(n)}var WL=()=>null;function KL(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function aA(n,e,t,r,i,s){let o=e[z];if(xy(n,o,e,t,r)){qr(n)&&YL(e,n.index);return}n.type&3&&(t=KL(t)),cA(n,e,t,r,i,s)}function cA(n,e,t,r,i,s){if(n.type&3){let o=nn(n,e);r=s!=null?s(r,n.value||"",t):r,i.setProperty(o,t,r)}else n.type&12}function YL(n,e){let t=$t(e,n);t[X]&16||(t[X]|=64)}function QL(n,e,t){let r=t.directiveStart,i=t.directiveEnd;qr(t)&&bL(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||_d(t,e);let s=t.initialInputs;for(let o=r;o<i;o++){let a=n.data[o],u=ac(e,n,o,t);if(ao(u,e),s!==null&&tF(e,o-r,u,a,t,s),bn(a)){let l=$t(t.index,e);l[Fe]=ac(e,n,o,t)}}}function JL(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=fD();try{zr(s);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Xl(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&XL(u,l)}}finally{zr(-1),Xl(o)}}function XL(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function uA(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];hL(e,s.selectors,!1)&&(r??=[],bn(s)?r.unshift(s):r.push(s))}return r}function ZL(n,e,t,r,i,s){let o=nn(n,e);eF(e[we],o,s,n.value,t,r,i)}function eF(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?Yn(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function tF(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;a+=2){let u=o[a],l=o[a+1];$m(r,t,u,l)}}function lA(n,e,t,r,i){let s=Ne+t,o=e[z],a=i(o,e,n,r,t);e[s]=a,Ki(n,!0);let u=n.type===2;return u?(QC(e[we],a,n),(tD()===0||Xa(n))&&ao(a,e),nD()):ao(a,e),nd()&&(!u||!yy(n))&&ky(o,e,a,n),n}function dA(n){let e=n;return cm()?aD():(e=e.parent,Ki(e,!1)),e}function nF(n,e){let t=n[Qn];if(!t)return;let r;try{r=t.get(Xn,null)}catch{r=null}r?.(e)}function xy(n,e,t,r,i){let s=n.inputs?.[r],o=n.hostDirectiveInputs?.[r],a=!1;if(o)for(let u=0;u<o.length;u+=2){let l=o[u],h=o[u+1],p=e.data[l];$m(p,t[l],h,i),a=!0}if(s)for(let u of s){let l=t[u],h=e.data[u];$m(h,l,r,i),a=!0}return a}function rF(n,e){let t=$t(e,n),r=t[z];iF(r,t);let i=t[en];i!==null&&t[eo]===null&&(t[eo]=MC(i,t[Qn])),me(he.ComponentStart);try{Ly(r,t,t[Fe])}finally{me(he.ComponentEnd,t[Fe])}}function iF(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Ly(n,e,t){ed(e);try{let r=n.viewQuery;r!==null&&Om(1,r,t);let i=n.template;i!==null&&oA(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[wn]?.finishViewCreation(n),n.staticContentQueries&&OC(n,e),n.staticViewQueries&&Om(2,n.viewQuery,t);let s=n.components;s!==null&&sF(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[X]&=-5,td()}}function sF(n,e){for(let t=0;t<e.length;t++)rF(n,e[t])}function $d(n,e,t,r){let i=q(null);try{let s=e.tView,a=n[X]&4096?4096:16,u=Cy(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Hr]=l;let h=n[wn];return h!==null&&(u[wn]=h.createEmbeddedView(s)),Ly(s,u,t),u}finally{q(i)}}function cc(n,e){return!e||e.firstChild===null||wC(n)}function uc(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(Ht(s)),tn(s)&&hA(s,r);let o=t.type;if(o&8)uc(n,e,t.child,r);else if(o&32){let a=Sy(t,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=sA(e,t);if(Array.isArray(a))r.push(...a);else{let u=Vr(e[Rt]);uc(u[z],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function hA(n,e){for(let t=Pe;t<n.length;t++){let r=n[t],i=r[z].firstChild;i!==null&&uc(r[z],r,i,e)}n[$r]!==n[en]&&e.push(n[$r])}function fA(n){if(n[$i]!==null){for(let e of n[$i])e.impl.addSequence(e);n[$i].length=0}}var pA=[];function oF(n){return n[Nt]??aF(n)}function aF(n){let e=pA.pop()??Object.create(uF);return e.lView=n,e}function cF(n){n.lView[Nt]!==n&&(n.lView=null,pA.push(n))}var uF=ie(j({},js),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Wi(n.lView)},consumerOnSignalRead(){this.lView[Nt]=this}});function lF(n){let e=n[Nt]??Object.create(dF);return e.lView=n,e}var dF=ie(j({},js),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Vr(n.lView);for(;e&&!gA(e[z]);)e=Vr(e);e&&Zg(e)},consumerOnSignalRead(){this.lView[Nt]=this}});function gA(n){return n.type!==2}function mA(n){if(n[Fr]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Fr])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[X]&8192)}}var hF=100;function yA(n,e=0){let r=n[In].rendererFactory,i=!1;i||r.begin?.();try{fF(n,e)}finally{i||r.end?.()}}function fF(n,e){let t=um();try{qa(!0),zm(n,e);let r=0;for(;tc(n);){if(r===hF)throw new B(103,!1);r++,zm(n,1)}}finally{qa(t)}}function pF(n,e,t,r){if(Gi(e))return;let i=e[X],s=!1,o=!1;ed(e);let a=!0,u=null,l=null;s||(gA(n)?(l=oF(e),u=Bs(l)):nl()===null?(a=!1,l=lF(e),u=Bs(l)):e[Nt]&&(Ci(e[Nt]),e[Nt]=null));try{Xg(e),lD(n.bindingStartIndex),t!==null&&oA(n,e,t,2,r);let h=(i&3)===3;if(!s)if(h){let y=n.preOrderCheckHooks;y!==null&&ld(e,y,null)}else{let y=n.preOrderHooks;y!==null&&dd(e,y,0,null),_m(e,0)}if(o||gF(e),mA(e),vA(e,0),n.contentQueries!==null&&OC(n,e),!s)if(h){let y=n.contentCheckHooks;y!==null&&ld(e,y)}else{let y=n.contentHooks;y!==null&&dd(e,y,1),_m(e,1)}yF(n,e);let p=n.components;p!==null&&EA(e,p,0);let g=n.viewQuery;if(g!==null&&Om(2,g,r),!s)if(h){let y=n.viewCheckHooks;y!==null&&ld(e,y)}else{let y=n.viewHooks;y!==null&&dd(e,y,2),_m(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Wl]){for(let y of e[Wl])y();e[Wl]=null}s||(fA(e),e[X]&=-73)}catch(h){throw s||Wi(e),h}finally{l!==null&&(Ra(l,u),a&&cF(l)),td()}}function vA(n,e){for(let t=bC(n);t!==null;t=DC(t))for(let r=Pe;r<t.length;r++){let i=t[r];_A(i,e)}}function gF(n){for(let e=bC(n);e!==null;e=DC(e)){if(!(e[X]&2))continue;let t=e[zi];for(let r=0;r<t.length;r++){let i=t[r];Zg(i)}}}function mF(n,e,t){me(he.ComponentStart);let r=$t(e,n);try{_A(r,t)}finally{me(he.ComponentEnd,r[Fe])}}function _A(n,e){Kl(n)&&zm(n,e)}function zm(n,e){let r=n[z],i=n[X],s=n[Nt],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Na(s)),o||=!1,s&&(s.dirty=!1),n[X]&=-9217,o)pF(r,n,r.template,n[Fe]);else if(i&8192){let a=q(null);try{mA(n),vA(n,1);let u=r.components;u!==null&&EA(n,u,1),fA(n)}finally{q(a)}}}function EA(n,e,t){for(let r=0;r<e.length;r++)mF(n,e[r],t)}function yF(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)zr(~i);else{let s=i,o=t[++r],a=t[++r];hD(o,s);let u=e[s];me(he.HostBindingsUpdateStart,u);try{a(2,u)}finally{me(he.HostBindingsUpdateEnd,u)}}}}finally{zr(-1)}}function Fy(n,e){let t=um()?64:1088;for(n[In].changeDetectionScheduler?.notify(e);n;){n[X]|=t;let r=Vr(n);if(ro(n)&&!r)return n;n=r}return null}function IA(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function wA(n,e){let t=Pe+e;if(t<n.length)return n[t]}function qd(n,e,t,r=!0){let i=e[z];if(vF(i,e,n,t),r){let o=qm(t,n),a=e[we],u=a.parentNode(n[$r]);u!==null&&kL(i,n[Bt],a,e,u,o)}let s=e[eo];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function TA(n,e){let t=lc(n,e);return t!==void 0&&jd(t[z],t),t}function lc(n,e){if(n.length<=Pe)return;let t=Pe+e,r=n[t];if(r){let i=r[Hr];i!==null&&i!==n&&Py(i,r),e>0&&(n[t-1][jt]=r[jt]);let s=Ka(n,Pe+e);PL(r[z],r);let o=s[wn];o!==null&&o.detachView(s[z]),r[Ge]=null,r[jt]=null,r[X]&=-129}return r}function vF(n,e,t,r){let i=Pe+r,s=t.length;r>0&&(t[i-1][jt]=e),r<s-Pe?(e[jt]=t[i],Fg(t,Pe+r,e)):(t.push(e),e[jt]=null),e[Ge]=t;let o=e[Hr];o!==null&&t!==o&&bA(o,e);let a=e[wn];a!==null&&a.insertView(n),Yl(e),e[X]|=128}function bA(n,e){let t=n[zi],r=e[Ge];if(Tn(r))n[X]|=2;else{let i=r[Ge][Rt];e[Rt]!==i&&(n[X]|=2)}t===null?n[zi]=[e]:t.push(e)}var Wr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[z];return uc(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[Fe]}set context(e){this._lView[Fe]=e}get destroyed(){return Gi(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ge];if(tn(e)){let t=e[Ja],r=t?t.indexOf(this):-1;r>-1&&(lc(e,r),Ka(t,r))}this._attachedToViewContainer=!1}jd(this._lView[z],this._lView)}onDestroy(e){em(this._lView,e)}markForCheck(){Fy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[X]&=-129}reattach(){Yl(this._lView),this._lView[X]|=128}detectChanges(){this._lView[X]|=1024,yA(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new B(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ro(this._lView),t=this._lView[Hr];t!==null&&!e&&Py(t,this._lView),iA(this._lView[z],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new B(902,!1);this._appRef=e;let t=ro(this._lView),r=this._lView[Hr];r!==null&&!t&&bA(r,this._lView),Yl(this._lView)}};var co=(()=>{class n{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=_F;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){let s=$d(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new Wr(s)}}return n})();function _F(){return Vy(Ye(),K())}function Vy(n,e){return n.type&4?new co(e,n,ho(n,e)):null}function fo(n,e,t,r,i){let s=n.data[e];if(s===null)s=EF(n,e,t,r,i),dD()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=oD();s.injectorIndex=o===null?-1:o.injectorIndex}return Ki(s,!0),s}function EF(n,e,t,r,i){let s=am(),o=cm(),a=o?s:s&&s.parent,u=n.data[e]=wF(n,a,t,e,r,i);return IF(n,u,s,o),u}function IF(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function wF(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return rD()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function TF(n){let e=n[Wg]??[],r=n[Ge][we],i=[];for(let s of e)s.data[RC]!==void 0?i.push(s):bF(s,r);n[Wg]=i}function bF(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[SC];for(;t<i;){let s=r.nextSibling;YC(e,r,!1),r=s,t++}}}var DF=()=>null,CF=()=>null;function Gm(n,e){return DF(n,e)}function DA(n,e,t){return CF(n,e,t)}var CA=class{},zd=class{},Wm=class{resolveComponentFactory(e){throw new B(917,!1)}},gc=class{static NULL=new Wm},Zi=class{},Qr=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>AF()}return n})();function AF(){let n=K(),e=Ye(),t=$t(e.index,n);return(Tn(t)?t:n)[we]}var AA=(()=>{class n{static \u0275prov=V({token:n,providedIn:"root",factory:()=>null})}return n})();var fd={},Km=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,fd,r);return i!==fd||t===fd?i:this.parentInjector.get(e,t,r)}};function Td(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Bl(i,a);else if(s==2){let u=a,l=e[++o];r=Bl(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Y(n,e=0){let t=K();if(t===null)return W(n,e);let r=Ye();return _C(r,t,nt(n),e)}function SF(){let n="invalid";throw new Error(n)}function SA(n,e,t,r,i){let s=r===null?null:{"":-1},o=i(n,t);if(o!==null){let a=o,u=null,l=null;for(let h of o)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(o);break}PF(n,e,t,a,s,u,l)}s!==null&&r!==null&&RF(t,r,s)}function RF(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new B(-301,!1);r.push(e[i],s)}}function NF(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function PF(n,e,t,r,i,s,o){let a=r.length,u=!1;for(let g=0;g<a;g++){let y=r[g];!u&&bn(y)&&(u=!0,NF(n,t,g)),Nm(_d(t,e),n,y.type)}FF(t,n.data.length,a);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=XC(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(t.mergedAttrs=oo(t.mergedAttrs,y.hostAttrs),MF(n,t,e,p,y),LF(p,y,i),o!==null&&o.has(y)){let[R,A]=o.get(y);t.directiveToIndex.set(y.type,[p,R+t.directiveStart,A+t.directiveStart])}else(s===null||!s.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let T=y.type.prototype;!l&&(T.ngOnChanges||T.ngOnInit||T.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(T.ngOnChanges||T.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}kF(n,t,s)}function kF(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))KD(0,e,i,r),KD(1,e,i,r),QD(e,r,!1);else{let s=t.get(i);YD(0,e,s,r),YD(1,e,s,r),QD(e,r,!0)}}}function KD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o;n===0?o=e.inputs??={}:o=e.outputs??={},o[s]??=[],o[s].push(r),RA(e,s)}}function YD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let s in i)if(i.hasOwnProperty(s)){let o=i[s],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[o]??=[],a[o].push(r,s),RA(e,o)}}function RA(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function QD(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:s}=n;if(r===null||!t&&i===null||t&&s===null||by(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let o=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){o??=[],o.push(u,r[a+1]);break}}else if(t&&s.hasOwnProperty(u)){let l=s[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){o??=[],o.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(o)}function MF(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Lr(i.type,!0)),o=new Ji(s,bn(i),Y,null);n.blueprint[r]=o,t[r]=o,OF(n,e,r,XC(n,t,i.hostVars,lt),i)}function OF(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;xF(o)!=a&&o.push(a),o.push(t,r,s)}}function xF(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function LF(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;bn(e)&&(t[""]=n)}}function FF(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function NA(n,e,t,r,i,s,o,a){let u=e[z],l=u.consts,h=qt(l,o),p=fo(u,n,t,r,h);return s&&SA(u,e,p,qt(l,a),i),p.mergedAttrs=oo(p.mergedAttrs,p.attrs),p.attrs!==null&&Td(p,p.attrs,!1),p.mergedAttrs!==null&&Td(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function PA(n,e){lC(n,e),Kg(e)&&n.queries.elementEnd(e)}function VF(n,e,t,r,i,s){let o=e.consts,a=qt(o,i),u=fo(e,n,t,r,a);if(u.mergedAttrs=oo(u.mergedAttrs,u.attrs),s!=null){let l=qt(o,s);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&Td(u,u.attrs,!1),u.mergedAttrs!==null&&Td(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function kA(n,e,t){return n[e]=t}function UF(n,e){return n[e]}function Mt(n,e,t){if(t===lt)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function jF(n,e,t,r){let i=Mt(n,e,t);return Mt(n,e+1,r)||i}function pd(n,e,t){return function r(i){let s=qr(n)?$t(n.index,e):e;Fy(s,5);let o=e[Fe],a=JD(e,o,t,i),u=r.__ngNextListenerFn__;for(;u;)a=JD(e,o,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function JD(n,e,t,r){let i=q(null);try{return me(he.OutputStart,e,t),t(r)!==!1}catch(s){return nF(n,s),!1}finally{me(he.OutputEnd,e,t),q(i)}}function MA(n,e,t,r,i,s,o,a){let u=Xa(n),l=!1,h=null;if(!r&&u&&(h=HF(e,t,s,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=o,h.__ngLastListenerFn__=o,l=!0}else{let p=nn(n,t),g=r?r(p):p;V1(t,g,s,a);let y=i.listen(g,s,a);if(!BF(s)){let T=r?R=>r(Ht(R[n.index])):n.index;OA(T,e,t,s,a,y,!1)}}return l}function BF(n){return n.startsWith("animation")||n.startsWith("transition")}function HF(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[to],u=i[s+2];return a&&a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function OA(n,e,t,r,i,s,o){let a=e.firstCreatePass?nm(e):null,u=tm(t),l=u.length;u.push(i,s),a&&a.push(r,n,l,(l+1)*(o?-1:1))}function XD(n,e,t,r,i,s){let o=e[t],a=e[z],l=a.data[t].outputs[r],p=o[l].subscribe(s);OA(n.index,a,e,i,s,p,!0)}var Ym=Symbol("BINDING");var bd=class extends gc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=_n(e);return new Kr(t,this.ngModule)}};function $F(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],s={propName:t,templateName:e,isSignal:(r&Vd.SignalBased)!==0};return i&&(s.transform=i),s})}function qF(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function zF(n,e,t){let r=e instanceof ut?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Km(t,r):t}function GF(n){let e=n.get(Zi,null);if(e===null)throw new B(407,!1);let t=n.get(AA,null),r=n.get(Kn,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function WF(n,e){let t=xA(n);return WC(e,t,t==="svg"?Yg:t==="math"?Yb:null)}function xA(n){return(n.selectors[0][0]||"div").toLowerCase()}var Kr=class extends zd{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=$F(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=qF(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=mL(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,s,o){me(he.DynamicComponentStart);let a=q(null);try{let u=this.componentDef,l=KF(r,u,o,s),h=zF(u,i||this.ngModule,e),p=GF(h),g=p.rendererFactory.createRenderer(null,u),y=r?zL(g,r,u.encapsulation,h):WF(u,g),T=o?.some(ZD)||s?.some(P=>typeof P!="function"&&P.bindings.some(ZD)),R=Cy(null,l,null,512|JC(u),null,null,p,g,h,null,MC(y,h,!0));R[Ne]=y,ed(R);let A=null;try{let P=NA(Ne,R,2,"#host",()=>l.directiveRegistry,!0,0);QC(g,y,P),ao(y,R),Oy(l,R,P),xC(l,P,R),PA(l,P),t!==void 0&&QF(P,this.ngContentSelectors,t),A=$t(P.index,R),R[Fe]=A[Fe],Ly(l,R,null)}catch(P){throw A!==null&&km(A),km(R),P}finally{me(he.DynamicComponentEnd),td()}return new Dd(this.componentType,R,!!T)}finally{q(a)}}};function KF(n,e,t,r){let i=n?["ng-version","21.0.1"]:yL(e.selectors[0]),s=null,o=null,a=0;if(t)for(let h of t)a+=h[Ym].requiredVars,h.create&&(h.targetIdx=0,(s??=[]).push(h)),h.update&&(h.targetIdx=0,(o??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let g of p.bindings){a+=g[Ym].requiredVars;let y=h+1;g.create&&(g.targetIdx=y,(s??=[]).push(g)),g.update&&(g.targetIdx=y,(o??=[]).push(g))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,g=Bg(p);u.push(g)}return Dy(0,null,YF(s,o),1,a,u,null,null,null,[i],null)}function YF(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function ZD(n){let e=n[Ym].kind;return e==="input"||e==="twoWay"}var Dd=class extends CA{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Za(t[z],Ne),this.location=ho(this._tNode,t),this.instance=$t(this._tNode.index,t)[Fe],this.hostView=this.changeDetectorRef=new Wr(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,s=xy(r,i[z],i,e,t);this.previousInputValues.set(e,t);let o=$t(r.index,i);Fy(o,1)}get injector(){return new Qi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function QF(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null&&s.length?Array.from(s):null)}}var mc=(()=>{class n{static __NG_ELEMENT_ID__=JF}return n})();function JF(){let n=Ye();return FA(n,K())}var XF=mc,LA=class extends XF{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ho(this._hostTNode,this._hostLView)}get injector(){return new Qi(this._hostTNode,this._hostLView)}get parentInjector(){let e=fy(this._hostTNode,this._hostLView);if(fC(e)){let t=yd(e,this._hostLView),r=md(e),i=t[z].data[r+8];return new Qi(i,t)}else return new Qi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=eC(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Pe}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Gm(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,cc(this._hostTNode,o)),a}createComponent(e,t,r,i,s,o,a){let u=e&&!d1(e),l;if(u)l=t;else{let A=t||{};l=A.index,r=A.injector,i=A.projectableNodes,s=A.environmentInjector||A.ngModuleRef,o=A.directives,a=A.bindings}let h=u?e:new Kr(_n(e)),p=r||this.parentInjector;if(!s&&h.ngModule==null){let P=(u?p:this.parentInjector).get(ut,null);P&&(s=P)}let g=_n(h.componentType??{}),y=Gm(this._lContainer,g?.id??null),T=y?.firstChild??null,R=h.create(p,i,T,s,o,a);return this.insertImpl(R.hostView,l,cc(this._hostTNode,y)),R}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(Jb(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Ge],l=new LA(u,u[Bt],u[Ge]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return qd(o,i,s,r),e.attachToViewContainerRef(),Fg(wm(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=eC(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=lc(this._lContainer,t);r&&(Ka(wm(this._lContainer),t),jd(r[z],r))}detach(e){let t=this._adjustIndex(e,-1),r=lc(this._lContainer,t);return r&&Ka(wm(this._lContainer),t)!=null?new Wr(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function eC(n){return n[Ja]}function wm(n){return n[Ja]||(n[Ja]=[])}function FA(n,e){let t,r=e[n.index];return tn(r)?t=r:(t=IA(r,e,null,n),e[n.index]=t,Ay(e,t)),eV(t,e,n,r),new LA(t,n,e)}function ZF(n,e){let t=n[we],r=t.createComment(""),i=nn(e,n),s=t.parentNode(i);return Id(t,s,r,t.nextSibling(i),!1),r}var eV=rV,tV=()=>!1;function nV(n,e,t){return tV(n,e,t)}function rV(n,e,t,r){if(n[$r])return;let i;t.type&8?i=Ht(r):i=ZF(e,t),n[$r]=i}var Qm=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Jm=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){let o=t.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)Uy(e,t).matches!==null&&this.queries[t].setDirty()}},Xm=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=dV(e):this.predicate=e}},Zm=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,t!==null?t.push(s):t=[s])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},ey=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,t,iV(t,s)),this.matchTNodeWithReadOption(e,t,hd(t,e,s,!1,!1))}else r===co?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,hd(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Ot||i===mc||i===co&&t.type&4)this.addMatch(t.index,-2);else{let s=hd(t,e,i,!1,!1);s!==null&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function iV(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function sV(n,e){return n.type&11?ho(n,e):n.type&4?Vy(n,e):null}function oV(n,e,t,r){return t===-1?sV(e,n):t===-2?aV(n,e,r):ac(n,n[z],t,e)}function aV(n,e,t){if(t===Ot)return ho(e,n);if(t===co)return Vy(e,n);if(t===mc)return FA(e,n)}function VA(n,e,t,r){let i=e[wn].queries[r];if(i.matches===null){let s=n.data,o=t.matches,a=[];for(let u=0;o!==null&&u<o.length;u+=2){let l=o[u];if(l<0)a.push(null);else{let h=s[l];a.push(oV(e,h,o[u+1],t.metadata.read))}}i.matches=a}return i.matches}function ty(n,e,t,r){let i=n.queries.getByIndex(t),s=i.matches;if(s!==null){let o=VA(n,e,i,t);for(let a=0;a<s.length;a+=2){let u=s[a];if(u>0)r.push(o[a/2]);else{let l=s[a+1],h=e[-u];for(let p=Pe;p<h.length;p++){let g=h[p];g[Hr]===g[Ge]&&ty(g[z],g,l,r)}if(h[zi]!==null){let p=h[zi];for(let g=0;g<p.length;g++){let y=p[g];ty(y[z],y,l,r)}}}}}return r}function cV(n,e){return n[wn].queries[e].queryList}function uV(n,e,t){let r=new Ed((t&4)===4);return eD(n,e,r,r.destroy),(e[wn]??=new Jm).queries.push(new Qm(r))-1}function lV(n,e,t,r){let i=Ce();if(i.firstCreatePass){let s=Ye();hV(i,new Xm(e,t,r),s.index),fV(i,n),(t&2)===2&&(i.staticContentQueries=!0)}return uV(i,K(),t)}function dV(n){return n.split(",").map(e=>e.trim())}function hV(n,e,t){n.queries===null&&(n.queries=new Zm),n.queries.track(new ey(e,t))}function fV(n,e){let t=n.contentQueries||(n.contentQueries=[]),r=t.length?t[t.length-1]:-1;e!==r&&t.push(n.queries.length-1,e)}function Uy(n,e){return n.queries.getByIndex(e)}function pV(n,e){let t=n[z],r=Uy(t,e);return r.crossesNgTemplate?ty(t,n,e,[]):VA(t,n,r,e)}var es=class{},UA=class{};var Cd=class extends es{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new bd(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let s=jg(e);this._bootstrapComponents=zC(s.bootstrap),this._r3Injector=fm(e,t,[{provide:es,useValue:this},{provide:gc,useValue:this.componentFactoryResolver},...r],Wn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Ad=class extends UA{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Cd(this.moduleType,e,[])}};var dc=class extends es{injector;componentFactoryResolver=new bd(this);instance=null;constructor(e){super();let t=new Vi([...e.providers,{provide:es,useValue:this},{provide:gc,useValue:this.componentFactoryResolver}],e.parent||Zs(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function jA(n,e,t=null){return new dc({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var gV=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Hg(!1,t.type),i=r.length>0?jA([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=V({token:n,providedIn:"environment",factory:()=>new n(W(ut))})}return n})();function mV(n){return lo(()=>{let e=BA(n),t=ie(j({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===gy.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(gV).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||an.Emulated,styles:n.styles||yt,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&nr("NgStandalone"),HA(t);let r=n.dependencies;return t.directiveDefs=tC(r,yV),t.pipeDefs=tC(r,Bb),t.id=EV(t),t})}function yV(n){return _n(n)||Bg(n)}function Gt(n){return lo(()=>({type:n.type,bootstrap:n.bootstrap||yt,declarations:n.declarations||yt,imports:n.imports||yt,exports:n.exports||yt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function vV(n,e){if(n==null)return Br;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a,u;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s,u=i[3]||null):(s=i,o=i,a=Vd.None,u=null),t[s]=[r,a,u],e[s]=o}return t}function _V(n){if(n==null)return Br;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Ee(n){return lo(()=>{let e=BA(n);return HA(e),e})}function yc(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function BA(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Br,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||yt,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:vV(n.inputs,e),outputs:_V(n.outputs),debugInfo:null}}function HA(n){n.features?.forEach(e=>e(n))}function tC(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let s=e(i);s!==null&&r.push(s)}return r}:null}function EV(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let s of r.join("|"))e=Math.imul(31,e)+s.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function IV(n){return Object.getPrototypeOf(n.prototype).constructor}function Ve(n){let e=IV(n.type),t=!0,r=[n];for(;e;){let i;if(bn(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new B(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=Tm(n.inputs),o.declaredInputs=Tm(n.declaredInputs),o.outputs=Tm(n.outputs);let a=i.hostBindings;a&&CV(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&bV(n,u),l&&DV(n,l),wV(n,i),kb(n.outputs,i.outputs),bn(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===Ve&&(t=!1)}}e=Object.getPrototypeOf(e)}TV(r)}function wV(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function TV(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=oo(i.hostAttrs,t=oo(t,i.hostAttrs))}}function Tm(n){return n===Br?{}:n===yt?[]:n}function bV(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function DV(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function CV(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function $A(n,e,t,r,i,s,o,a){if(t.firstCreatePass){n.mergedAttrs=oo(n.mergedAttrs,n.attrs);let h=n.tView=Dy(2,n,i,s,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Ki(n,!1);let u=SV(t,e,n,r);nd()&&ky(t,e,u,n),ao(u,e);let l=IA(u,e,u,n);e[r+Ne]=l,Ay(e,l),nV(l,n,e)}function AV(n,e,t,r,i,s,o,a,u,l,h){let p=t+Ne,g;return e.firstCreatePass?(g=fo(e,p,4,o||null,a||null),im()&&SA(e,n,g,qt(e.consts,l),uA),lC(e,g)):g=e.data[p],$A(g,n,e,t,r,i,s,u),Xa(g)&&Oy(e,n,g),l!=null&&Hd(n,g,h),g}function Sd(n,e,t,r,i,s,o,a,u,l,h){let p=t+Ne,g;if(e.firstCreatePass){if(g=fo(e,p,4,o||null,a||null),l!=null){let y=qt(e.consts,l);g.localNames=[];for(let T=0;T<y.length;T+=2)g.localNames.push(y[T],-1)}}else g=e.data[p];return $A(g,n,e,t,r,i,s,u),l!=null&&Hd(n,g,h),g}function qA(n,e,t,r,i,s,o,a){let u=K(),l=Ce(),h=qt(l.consts,s);return AV(u,l,n,e,t,r,i,h,void 0,o,a),qA}var SV=RV;function RV(n,e,t,r){return rd(!0),e[we].createComment("")}var zA=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function GA(n){return typeof n=="function"&&n[gt]!==void 0}function jy(n){return GA(n)&&typeof n.set=="function"}var By=new U("");function po(n){return!!n&&typeof n.then=="function"}function Hy(n){return!!n&&typeof n.subscribe=="function"}var $y=new U("");function NV(n){return wt([{provide:$y,multi:!0,useValue:n}])}var qy=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=M($y,{optional:!0})??[];injector=M(Le);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=En(this.injector,i);if(po(s))t.push(s);else if(Hy(s)){let o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),WA=new U("");function KA(){Yp(()=>{let n="";throw new B(600,n)})}function YA(n){return n.isBoundToModule}var PV=10;var rs=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=M(Xn);afterRenderManager=M(Ry);zonelessEnabled=M(ic);rootEffectScheduler=M(id);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new be;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=M(Yi);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(We(t=>!t))}constructor(){M(tr,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=M(ut);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Le.NULL){return this._injector.get(De).run(()=>{me(he.BootstrapComponentStart);let o=t instanceof zd;if(!this._injector.get(qy).done){let T="";throw new B(405,T)}let u;o?u=t:u=this._injector.get(gc).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let l=YA(u)?void 0:this._injector.get(es),h=r||u.selector,p=u.create(i,[],h,l),g=p.location.nativeElement,y=p.injector.get(By,null);return y?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),oc(this.components,p),y?.unregisterApplication(g)}),this._loadComponent(p),me(he.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){me(he.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Ud.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw me(he.ChangeDetectionEnd),new B(101,!1);let t=q(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,q(t),this.afterTick.next(),me(he.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Zi,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<PV;){me(he.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{me(he.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!tc(i))continue;let s=r&&!this.zonelessEnabled?0:1;yA(i,s),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>tc(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;oc(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(WA,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>oc(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new B(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function oc(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function vc(n,e,t,r){let i=K(),s=Jn();if(Mt(i,s,e)){let o=Ce(),a=nc();ZL(a,i,n,e,t,r)}return vc}var GQ=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var ny=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,t){this.attach(t,this.detach(e))}};function bm(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function kV(n,e,t,r){let i,s,o=0,a=n.length-1,u=void 0;if(Array.isArray(e)){q(r);let l=e.length-1;for(q(null);o<=a&&o<=l;){let h=n.at(o),p=e[o],g=bm(o,h,o,p,t);if(g!==0){g<0&&n.updateValue(o,p),o++;continue}let y=n.at(a),T=e[l],R=bm(a,y,l,T,t);if(R!==0){R<0&&n.updateValue(a,T),a--,l--;continue}let A=t(o,h),P=t(a,y),F=t(o,p);if(Object.is(F,P)){let $=t(l,T);Object.is($,A)?(n.swap(o,a),n.updateValue(a,T),l--,a--):n.move(a,o),n.updateValue(o,p),o++;continue}if(i??=new Rd,s??=rC(n,o,a,t),ry(n,i,o,F))n.updateValue(o,p),o++,a++;else if(s.has(F))i.set(A,n.detach(o)),a--;else{let $=n.create(o,e[o]);n.attach(o,$),o++,a++}}for(;o<=l;)nC(n,i,t,o,e[o]),o++}else if(e!=null){q(r);let l=e[Symbol.iterator]();q(null);let h=l.next();for(;!h.done&&o<=a;){let p=n.at(o),g=h.value,y=bm(o,p,o,g,t);if(y!==0)y<0&&n.updateValue(o,g),o++,h=l.next();else{i??=new Rd,s??=rC(n,o,a,t);let T=t(o,g);if(ry(n,i,o,T))n.updateValue(o,g),o++,a++,h=l.next();else if(!s.has(T))n.attach(o,n.create(o,g)),o++,a++,h=l.next();else{let R=t(o,p);i.set(R,n.detach(o)),a--}}}for(;!h.done;)nC(n,i,t,n.length,h.value),h=l.next()}for(;o<=a;)n.destroy(n.detach(a--));i?.forEach(l=>{n.destroy(l)})}function ry(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function nC(n,e,t,r,i){if(ry(n,e,r,t(r,i)))n.updateValue(r,i);else{let s=n.create(r,i);n.attach(r,s)}}function rC(n,e,t,r){let i=new Set;for(let s=e;s<=t;s++)i.add(r(s,n.at(s)));return i}var Rd=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function MV(n,e,t,r,i,s,o,a){nr("NgControlFlow");let u=K(),l=Ce(),h=qt(l.consts,s);return Sd(u,l,n,e,t,r,i,h,256,o,a),zy}function zy(n,e,t,r,i,s,o,a){nr("NgControlFlow");let u=K(),l=Ce(),h=qt(l.consts,s);return Sd(u,l,n,e,t,r,i,h,512,o,a),zy}function OV(n,e){nr("NgControlFlow");let t=K(),r=Jn(),i=t[r]!==lt?t[r]:-1,s=i!==-1?Nd(t,Ne+i):void 0,o=0;if(Mt(t,r,n)){let a=q(null);try{if(s!==void 0&&TA(s,o),n!==-1){let u=Ne+n,l=Nd(t,u),h=ay(t[z],u),p=DA(l,h,t),g=$d(t,h,e,{dehydratedView:p});qd(l,g,o,cc(h,p))}}finally{q(a)}}else if(s!==void 0){let a=wA(s,o);a!==void 0&&(a[Fe]=e)}}var iy=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Pe}};function xV(n){return n}function LV(n,e){return e}var sy=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function FV(n,e,t,r,i,s,o,a,u,l,h,p,g){nr("NgControlFlow");let y=K(),T=Ce(),R=u!==void 0,A=K(),P=a?o.bind(A[Rt][Fe]):o,F=new sy(R,P);A[Ne+n]=F,Sd(y,T,n+1,e,t,r,i,qt(T.consts,s),256),R&&Sd(y,T,n+2,u,l,h,p,qt(T.consts,g),512)}var oy=class extends ny{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-Pe}at(e){return this.getLView(e)[Fe].$implicit}attach(e,t){let r=t[eo];this.needsIndexUpdate||=e!==this.length,qd(this.lContainer,t,e,cc(this.templateTNode,r)),UV(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,jV(this.lContainer,e),BV(this.lContainer,e)}create(e,t){let r=Gm(this.lContainer,this.templateTNode.tView.ssrId),i=$d(this.hostLView,this.templateTNode,new iy(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){jd(e[z],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[Fe].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Fe].$index=e}getLView(e){return HV(this.lContainer,e)}};function VV(n){let e=q(null),t=rn();try{let r=K(),i=r[z],s=r[t],o=t+1,a=Nd(r,o);if(s.liveCollection===void 0){let l=ay(i,o);s.liveCollection=new oy(a,r,l)}else s.liveCollection.reset();let u=s.liveCollection;if(kV(u,n,s.trackByFn,e),u.updateIndexes(),s.hasEmptyBlock){let l=Jn(),h=u.length===0;if(Mt(r,l,h)){let p=t+2,g=Nd(r,p);if(h){let y=ay(i,p),T=DA(g,y,r),R=$d(r,y,void 0,{dehydratedView:T});qd(g,R,0,cc(y,T))}else i.firstUpdatePass&&TF(g),TA(g,0)}}}finally{q(e)}}function Nd(n,e){return n[e]}function UV(n,e){if(n.length<=Pe)return;let t=Pe+e,r=n[t],i=r?r[qi]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let s=r[Qn];RL(s,i),Xi.delete(r),i.detachedLeaveAnimationFns=void 0}}function jV(n,e){if(n.length<=Pe)return;let t=Pe+e,r=n[t],i=r?r[qi]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function BV(n,e){return lc(n,e)}function HV(n,e){return wA(n,e)}function ay(n,e){return Za(n,e)}function QA(n,e,t){let r=K(),i=Jn();if(Mt(r,i,e)){let s=Ce(),o=nc();aA(o,r,n,e,r[we],t)}return QA}function cy(n,e,t,r,i){xy(e,n,t,i?"class":"style",r)}function Gy(n,e,t,r){let i=K(),s=i[z],o=n+Ne,a=s.firstCreatePass?NA(o,i,2,e,uA,im(),t,r):s.data[o];if(lA(a,i,n,e,ZA),Xa(a)){let u=i[z];Oy(u,i,a),xC(u,a,i)}return r!=null&&Hd(i,a),Gy}function Wy(){let n=Ce(),e=Ye(),t=dA(e);return n.firstCreatePass&&PA(n,t),sm(t)&&om(),rm(),t.classesWithoutHost!=null&&y1(t)&&cy(n,t,K(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&v1(t)&&cy(n,t,K(),t.stylesWithoutHost,!1),Wy}function JA(n,e,t,r){return Gy(n,e,t,r),Wy(),JA}function Ky(n,e,t,r){let i=K(),s=i[z],o=n+Ne,a=s.firstCreatePass?VF(o,s,2,e,t,r):s.data[o];return lA(a,i,n,e,ZA),r!=null&&Hd(i,a),Ky}function Yy(){let n=Ye(),e=dA(n);return sm(e)&&om(),rm(),Yy}function XA(n,e,t,r){return Ky(n,e,t,r),Yy(),XA}var ZA=(n,e,t,r,i)=>(rd(!0),WC(e[we],r,ID()));function $V(){return K()}function eS(n,e,t){let r=K(),i=Jn();if(Mt(r,i,e)){let s=Ce(),o=nc();cA(o,r,n,e,r[we],t)}return eS}var _c="en-US";var qV=_c;function tS(n){typeof n=="string"&&(qV=n.toLowerCase().replace(/_/g,"-"))}function rr(n,e,t){let r=K(),i=Ce(),s=Ye();return rS(i,r,r[we],s,n,e,t),rr}function nS(n,e,t){let r=K(),i=Ce(),s=Ye();return(s.type&3||t)&&MA(s,i,r,t,r[we],n,e,pd(s,r,e)),nS}function rS(n,e,t,r,i,s,o){let a=!0,u=null;if((r.type&3||o)&&(u??=pd(r,e,s),MA(r,n,e,o,t,i,s,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let g=h[p],y=h[p+1];u??=pd(r,e,s),XD(r,e,g,y,i,u)}if(l&&l.length)for(let p of l)u??=pd(r,e,s),XD(r,e,p,i,i,u)}}function zV(n=1){return vD(n)}function GV(n,e,t,r){lV(n,e,t,r)}function WV(n){let e=K(),t=Ce(),r=lm();Zl(r+1);let i=Uy(t,r);if(n.dirty&&Qb(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let s=pV(e,r);n.reset(s,P1),n.notifyOnChanges()}return!0}return!1}function KV(){return cV(K(),lm())}function ud(n,e){return n<<17|e<<2}function ts(n){return n>>17&32767}function YV(n){return(n&2)==2}function QV(n,e){return n&131071|e<<17}function uy(n){return n|2}function uo(n){return(n&131068)>>2}function Dm(n,e){return n&-131069|e<<2}function JV(n){return(n&1)===1}function ly(n){return n|1}function XV(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=ts(o),u=uo(o);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||Xs(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let g=ts(n[a+1]);n[r+1]=ud(g,a),g!==0&&(n[g+1]=Dm(n[g+1],r)),n[a+1]=QV(n[a+1],r)}else n[r+1]=ud(a,0),a!==0&&(n[a+1]=Dm(n[a+1],r)),a=r;else n[r+1]=ud(u,0),a===0?a=r:n[u+1]=Dm(n[u+1],r),u=r;l&&(n[r+1]=uy(n[r+1])),iC(n,h,r,!0),iC(n,h,r,!1),ZV(e,h,n,r,s),o=ud(a,u),s?e.classBindings=o:e.styleBindings=o}function ZV(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Xs(s,e)>=0&&(t[r+1]=ly(t[r+1]))}function iC(n,e,t,r){let i=n[t+1],s=e===null,o=r?ts(i):uo(i),a=!1;for(;o!==0&&(a===!1||s);){let u=n[o],l=n[o+1];e2(u,e)&&(a=!0,n[o+1]=r?ly(l):uy(l)),o=r?ts(l):uo(l)}a&&(n[t+1]=r?uy(i):ly(i))}function e2(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Xs(n,e)>=0:!1}var on={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function t2(n){return n.substring(on.key,on.keyEnd)}function n2(n){return r2(n),iS(n,sS(n,0,on.textEnd))}function iS(n,e){let t=on.textEnd;return t===e?-1:(e=on.keyEnd=i2(n,on.key=e,t),sS(n,e,t))}function r2(n){on.key=0,on.keyEnd=0,on.value=0,on.valueEnd=0,on.textEnd=n.length}function sS(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function i2(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function Ec(n,e){return a2(n,e,null,!0),Ec}function s2(n){c2(p2,o2,n,!0)}function o2(n,e){for(let t=n2(e);t>=0;t=iS(e,t))zl(n,t2(e),!0)}function a2(n,e,t,r){let i=K(),s=Ce(),o=Jl(2);if(s.firstUpdatePass&&aS(s,n,o,r),e!==lt&&Mt(i,o,e)){let a=s.data[rn()];cS(s,a,i,i[we],n,i[o+1]=m2(e,t),r,o)}}function c2(n,e,t,r){let i=Ce(),s=Jl(2);i.firstUpdatePass&&aS(i,null,s,r);let o=K();if(t!==lt&&Mt(o,s,t)){let a=i.data[rn()];if(uS(a,r)&&!oS(i,s)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(t=Bl(u,t||"")),cy(i,a,o,t,r)}else g2(i,a,o,o[we],o[s+1],o[s+1]=f2(n,e,t),r,s)}}function oS(n,e){return e>=n.expandoStartIndex}function aS(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[rn()],o=oS(n,t);uS(s,r)&&e===null&&!o&&(e=!1),e=u2(i,s,e,r),XV(i,s,e,t,o,r)}}function u2(n,e,t,r){let i=pD(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Cm(null,n,e,t,r),t=hc(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=Cm(i,n,e,t,r),s===null){let u=l2(n,e,r);u!==void 0&&Array.isArray(u)&&(u=Cm(null,n,e,u[1],r),u=hc(u,e.attrs,r),d2(n,e,r,u))}else s=h2(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function l2(n,e,t){let r=t?e.classBindings:e.styleBindings;if(uo(r)!==0)return n[ts(r)]}function d2(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[ts(i)]=r}function h2(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=hc(r,o,t)}return hc(r,e.attrs,t)}function Cm(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=hc(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function hc(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),zl(n,o,t?!0:e[++s]))}return n===void 0?null:n}function f2(n,e,t){if(t==null||t==="")return yt;let r=[],i=xt(t);if(Array.isArray(i))for(let s=0;s<i.length;s++)n(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&n(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function p2(n,e,t){let r=String(e);r!==""&&!r.includes(" ")&&zl(n,r,t)}function g2(n,e,t,r,i,s,o,a){i===lt&&(i=yt);let u=0,l=0,h=0<i.length?i[0]:null,p=0<s.length?s[0]:null;for(;h!==null||p!==null;){let g=u<i.length?i[u+1]:void 0,y=l<s.length?s[l+1]:void 0,T=null,R;h===p?(u+=2,l+=2,g!==y&&(T=p,R=y)):p===null||h!==null&&h<p?(u+=2,T=h):(l+=2,T=p,R=y),T!==null&&cS(n,e,t,r,T,R,o,a),h=u<i.length?i[u]:null,p=l<s.length?s[l]:null}}function cS(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=JV(l)?sC(u,e,t,i,uo(l),o):void 0;if(!Pd(h)){Pd(s)||YV(l)&&(s=sC(u,null,t,i,a,o));let p=Qg(rn(),t);qL(r,o,p,i,s)}}function sC(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,g=t[i+1];g===lt&&(g=p?yt:void 0);let y=p?Gl(g,r):h===r?g:void 0;if(l&&!Pd(y)&&(y=Gl(u,r)),Pd(y)&&(a=y,o))return a;let T=n[i+1];i=o?ts(T):uo(T)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(a=Gl(u,r))}return a}function Pd(n){return n!==void 0}function m2(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Wn(xt(n)))),n}function uS(n,e){return(n.flags&(e?8:16))!==0}function y2(n,e=""){let t=K(),r=Ce(),i=n+Ne,s=r.firstCreatePass?fo(r,i,1,e,null):r.data[i],o=v2(r,t,s,e,n);t[i]=o,nd()&&ky(r,t,o,s),Ki(s,!1)}var v2=(n,e,t,r,i)=>(rd(!0),vL(e[we],r));function _2(n,e,t,r=""){return Mt(n,Jn(),t)?e+Yn(t)+r:lt}function E2(n,e,t,r,i,s=""){let o=uD(),a=jF(n,o,t,i);return Jl(2),a?e+Yn(t)+r+Yn(i)+s:lt}function lS(n){return Qy("",n),lS}function Qy(n,e,t){let r=K(),i=_2(r,n,e,t);return i!==lt&&hS(r,rn(),i),Qy}function dS(n,e,t,r,i){let s=K(),o=E2(s,n,e,t,r,i);return o!==lt&&hS(s,rn(),o),dS}function hS(n,e,t){let r=Qg(e,n);_L(n[we],r,t)}function fS(n,e,t){jy(e)&&(e=e());let r=K(),i=Jn();if(Mt(r,i,e)){let s=Ce(),o=nc();aA(o,r,n,e,r[we],t)}return fS}function I2(n,e){let t=jy(n);return t&&n.set(e),t}function pS(n,e){let t=K(),r=Ce(),i=Ye();return rS(r,t,t[we],i,n,e),pS}var gS={};function mS(n){nr("NgLet");let e=Ce(),t=K(),r=n+Ne,i=fo(e,r,128,null,null);return Ki(i,!1),ec(e,t,r,gS),mS}function w2(n){let e=Ce(),t=K(),r=rn();return ec(e,t,r,n),n}function T2(n){let e=cD(),t=Jg(e,Ne+n);if(t===gS)throw new B(314,!1);return t}function b2(n){return Mt(K(),Jn(),n)?Yn(n):lt}function D2(n,e,t){let r=Ce();if(r.firstCreatePass){let i=bn(n);dy(t,r.data,r.blueprint,i,!0),dy(e,r.data,r.blueprint,i,!1)}}function dy(n,e,t,r,i){if(n=nt(n),Array.isArray(n))for(let s=0;s<n.length;s++)dy(n[s],e,t,r,i);else{let s=Ce(),o=K(),a=Ye(),u=Fi(n)?n:nt(n.provide),l=qg(n),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(Fi(n)||!n.multi){let y=new Ji(l,i,Y,null),T=Sm(u,e,i?h:h+g,p);T===-1?(Nm(_d(a,o),s,u),Am(s,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),o.push(y)):(t[T]=y,o[T]=y)}else{let y=Sm(u,e,h+g,p),T=Sm(u,e,h,h+g),R=y>=0&&t[y],A=T>=0&&t[T];if(i&&!A||!i&&!R){Nm(_d(a,o),s,u);let P=S2(i?A2:C2,t.length,i,r,l,n);!i&&A&&(t[T].providerFactory=P),Am(s,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(P),o.push(P)}else{let P=yS(t[i?T:y],l,!i&&r);Am(s,n,y>-1?y:T,P)}!i&&r&&A&&t[T].componentProviders++}}}function Am(n,e,t,r){let i=Fi(e),s=Gb(e);if(i||s){let u=(s?nt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function yS(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Sm(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function C2(n,e,t,r,i){return hy(this.multi,[])}function A2(n,e,t,r,i){let s=this.multi,o;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=ac(r,r[z],this.providerFactory.index,i);o=u.slice(0,a),hy(s,o);for(let l=a;l<u.length;l++)o.push(u[l])}else o=[],hy(s,o);return o}function hy(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function S2(n,e,t,r,i,s){let o=new Ji(n,t,Y,null);return o.multi=[],o.index=e,o.componentProviders=0,yS(o,i,r&&!t),o}function vt(n,e=[]){return t=>{t.providersResolver=(r,i)=>D2(r,i?i(n):n,e)}}function R2(n,e,t){let r=Ql()+n,i=K();return i[r]===lt?kA(i,r,t?e.call(t):e()):UF(i,r)}function N2(n,e,t,r){return vS(K(),Ql(),n,e,t,r)}function P2(n,e){let t=n[e];return t===lt?void 0:t}function vS(n,e,t,r,i,s){let o=e+t;return Mt(n,o,i)?kA(n,o+1,s?r.call(s,i):r(i)):P2(n,o+1)}function k2(n,e){let t=Ce(),r,i=n+Ne;t.firstCreatePass?(r=M2(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=Lr(r.type,!0)),o,a=mt(Y);try{let u=vd(!1),l=s();return vd(u),ec(t,K(),i,l),l}finally{mt(a)}}function M2(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function O2(n,e,t){let r=n+Ne,i=K(),s=Jg(i,r);return x2(i,r)?vS(i,Ql(),e,s.transform,t,s):s.transform(t)}function x2(n,e){return n[z].data[e].pure}var kd=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},L2=(()=>{class n{compileModuleSync(t){return new Ad(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=jg(t),s=zC(i.declarations).reduce((o,a)=>{let u=_n(a);return u&&o.push(new Kr(u)),o},[]);return new kd(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var _S=(()=>{class n{applicationErrorHandler=M(Xn);appRef=M(rs);taskService=M(Yi);ngZone=M(De);zonelessEnabled=M(ic);tracing=M(tr,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new ze;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(za):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(vm,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?gm:pm;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(za+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,gm(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ES(){return[{provide:Kn,useExisting:_S},{provide:De,useClass:Ga},{provide:ic,useValue:!0}]}function F2(){return typeof $localize<"u"&&$localize.locale||_c}var Gd=new U("",{factory:()=>M(Gd,{optional:!0,skipSelf:!0})||F2()});function ir(n,e){return rl(n,e?.equal)}var bS=Symbol("InputSignalNode#UNSET"),X2=ie(j({},il),{transformFn:void 0,applyValueToInputSignal(n,e){Pa(n,e)}});function DS(n,e){let t=Object.create(X2);t.value=n,t.transformFn=e?.transform;function r(){if(Sa(t),t.value===bS){let i=null;throw new B(-950,i)}return t.value}return r[gt]=t,r}var IS=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>py(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function wS(n,e){return DS(n,e)}function Z2(n){return DS(bS,n)}var Mne=(wS.required=Z2,wS);var Jy=new U(""),eU=new U("");function Ic(n){return!n.moduleRef}function tU(n){let e=Ic(n)?n.r3Injector:n.moduleRef.injector,t=e.get(De);return t.run(()=>{Ic(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Xn),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),Ic(n)){let s=()=>e.destroy(),o=n.platformInjector.get(Jy);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(Jy);o.add(s),n.moduleRef.onDestroy(()=>{oc(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return rU(r,t,()=>{let s=e.get(Yi),o=s.add(),a=e.get(qy);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(Gd,_c);if(tS(u||_c),!e.get(eU,!0))return Ic(n)?e.get(rs):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Ic(n)){let h=e.get(rs);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return nU?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void s.remove(o))})})}var nU;function rU(n,e,t){try{let r=t();return po(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var Wd=null;function iU(n=[],e){return Le.create({name:e,providers:[{provide:Ya,useValue:"platform"},{provide:Jy,useValue:new Set([()=>Wd=null])},...n]})}function sU(n=[]){if(Wd)return Wd;let e=iU(n);return Wd=e,KA(),oU(e),e}function oU(n){let e=n.get(Od,null);En(n,()=>{e?.forEach(t=>t())})}function Xy(){return!1}var is=(()=>{class n{static __NG_ELEMENT_ID__=aU}return n})();function aU(n){return cU(Ye(),K(),(n&16)===16)}function cU(n,e,t){if(qr(n)&&!t){let r=$t(n.index,e);return new Wr(r,r)}else if(n.type&175){let r=e[Rt];return new Wr(r,e)}return null}function CS(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;me(he.BootstrapApplicationStart);try{let s=i?.injector??sU(r),o=[ES(),DD,...t||[]],a=new dc({providers:o,parent:s,debugName:"",runEnvironmentInitializers:!1});return tU({r3Injector:a.injector,platformInjector:s,rootComponent:e})}catch(s){return Promise.reject(s)}finally{me(he.BootstrapApplicationEnd)}}function Kd(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function uU(n,e=NaN){return!isNaN(parseFloat(n))&&!isNaN(Number(n))?Number(n):e}function One(n,e){let t=_n(n),r=e.elementInjector||Zs();return new Kr(t).create(r,e.projectableNodes,e.hostElement,e.environmentInjector,e.directives,e.bindings)}function xne(n){let e=_n(n);if(!e)return null;let t=new Kr(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var RS=null;function Kt(){return RS}function Zy(n){RS??=n}var wc=class{},Tc=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>M(NS),providedIn:"platform"})}return n})(),lU=new U(""),NS=(()=>{class n extends Tc{_location;_history;_doc=M(ke);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Kt().getBaseHref(this._doc)}onPopState(t){let r=Kt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Kt().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function Yd(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function AS(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function cn(n){return n&&n[0]!=="?"?`?${n}`:n}var go=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:()=>M(PS),providedIn:"root"})}return n})(),Qd=new U(""),PS=(()=>{class n extends go{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(ke).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Yd(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+cn(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+cn(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+cn(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(W(Tc),W(Qd,8))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),kS=(()=>{class n{_subject=new be;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=fU(AS(SS(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+cn(r))}normalize(t){return n.stripTrailingSlash(hU(this._basePath,SS(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+cn(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+cn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=cn;static joinWithSlash=Yd;static stripTrailingSlash=AS;static \u0275fac=function(r){return new(r||n)(W(go))};static \u0275prov=V({token:n,factory:()=>dU(),providedIn:"root"})}return n})();function dU(){return new kS(W(go))}function hU(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function SS(n){return n.replace(/\/index.html$/,"")}function fU(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var pU=(()=>{class n extends go{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=Yd(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+cn(s))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+cn(s))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(W(Tc),W(Qd,8))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})();function gU(n,e){return new B(2100,!1)}var mU=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw gU(n,t);return t.toUpperCase()}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=yc({name:"uppercase",type:n,pure:!0})}return n})();var MS=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Gt({type:n});static \u0275inj=St({})}return n})();function bc(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var ss=class{};var tv="browser";function Iie(n){return n===tv}var wie=(()=>{class n{static \u0275prov=V({token:n,providedIn:"root",factory:()=>new ev(M(ke),window)})}return n})(),ev=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,t){this.window.scrollTo(ie(j({},t),{left:e[0],top:e[1]}))}scrollToAnchor(e,t){let r=vU(this.document,e);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(Ur(2400,!1))}}scrollToElement(e,t){let r=e.getBoundingClientRect(),i=r.left+this.window.pageXOffset,s=r.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(ie(j({},t),{left:i-o[0],top:s-o[1]}))}};function vU(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var Dc=class{_doc;constructor(e){this._doc=e}manager},Jd=(()=>{class n extends Dc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,s){return t.addEventListener(r,i,s),()=>this.removeEventListener(t,r,i,s)}removeEventListener(t,r,i,s){return t.removeEventListener(r,i,s)}static \u0275fac=function(r){return new(r||n)(W(ke))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),eh=new U(""),sv=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(o=>{o.manager=this});let i=t.filter(o=>!(o instanceof Jd));this._plugins=i.slice().reverse();let s=t.find(o=>o instanceof Jd);s&&this._plugins.push(s)}addEventListener(t,r,i,s){return this._findPluginFor(r).addEventListener(t,r,i,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new B(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(W(eh),W(De))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),nv="ng-app-id";function OS(n){for(let e of n)e.remove()}function xS(n,e){let t=e.createElement("style");return t.textContent=n,t}function _U(n,e,t,r){let i=n.head?.querySelectorAll(`style[${nv}="${e}"],link[${nv}="${e}"]`);if(i)for(let s of i)s.removeAttribute(nv),s instanceof HTMLLinkElement?r.set(s.href.slice(s.href.lastIndexOf("/")+1),{usage:0,elements:[s]}):s.textContent&&t.set(s.textContent,{usage:0,elements:[s]})}function iv(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var ov=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,_U(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,xS);r?.forEach(i=>this.addUsage(i,this.external,iv))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let s=r.get(t);s?s.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(o=>this.addElement(o,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(OS(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])OS(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,xS(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,iv(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(W(ke),W(Md),W(xd,8),W(ns))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),rv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},av=/%COMP%/g;var FS="%COMP%",EU=`_nghost-${FS}`,IU=`_ngcontent-${FS}`,wU=!0,TU=new U("",{factory:()=>wU});function bU(n){return IU.replace(av,n)}function DU(n){return EU.replace(av,n)}function VS(n,e){return e.map(t=>t.replace(av,n))}var cv=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,s,o,a,u=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.ngZone=a,this.nonce=u,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new Cc(t,o,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Zd?i.applyToHost(t):i instanceof Ac&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case an.Emulated:s=new Zd(u,l,r,this.appId,h,o,a,p,g);break;case an.ShadowDom:return new Xd(u,t,r,o,a,this.nonce,p,g,l);case an.ExperimentalIsolatedShadowDom:return new Xd(u,t,r,o,a,this.nonce,p,g);default:s=new Ac(u,l,r,h,o,a,p,g);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(W(sv),W(ov),W(Md),W(TU),W(ke),W(De),W(xd),W(tr,8))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),Cc=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,s){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=s}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(rv[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(LS(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(LS(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new B(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=rv[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=rv[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Cn.DashCase|Cn.Important)?e.style.setProperty(t,r,i&Cn.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Cn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Kt().getGlobalEventTarget(this.doc,e),!e))throw new B(5102,!1);let s=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(s=this.tracingService.wrapEventListener(e,t,s)),this.eventManager.addEventListener(e,t,s,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function LS(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Xd=class extends Cc{hostEl;sharedStylesHost;shadowRoot;constructor(e,t,r,i,s,o,a,u,l){super(e,i,s,a,u),this.hostEl=t,this.sharedStylesHost=l,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let h=r.styles;h=VS(r.id,h);for(let g of h){let y=document.createElement("style");o&&y.setAttribute("nonce",o),y.textContent=g,this.shadowRoot.appendChild(y)}let p=r.getExternalStyles?.();if(p)for(let g of p){let y=iv(g,i);o&&y.setAttribute("nonce",o),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Ac=class extends Cc{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,s,o,a,u,l){super(e,s,o,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?VS(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Xi.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Zd=class extends Ac{contentAttr;hostAttr;constructor(e,t,r,i,s,o,a,u,l){let h=i+"-"+r.id;super(e,t,r,s,o,a,u,l,h),this.contentAttr=bU(h),this.hostAttr=DU(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var th=class n extends wc{supportsDOMEvents=!0;static makeCurrent(){Zy(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=CU();return t==null?null:AU(t)}resetBaseElement(){Sc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return bc(document.cookie,e)}},Sc=null;function CU(){return Sc=Sc||document.head.querySelector("base"),Sc?Sc.getAttribute("href"):null}function AU(n){return new URL(n,document.baseURI).pathname}var SU=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),US=["alt","control","meta","shift"],RU={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},NU={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},jS=(()=>{class n extends Dc{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,s){let o=n.parseEventName(r),a=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Kt().onAndCancel(t,o.domEventName,a,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),US.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(t,r){let i=RU[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),US.forEach(o=>{if(o!==i){let a=NU[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(W(ke))};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})();function PU(n,e,t){let r=j({rootComponent:n,platformRef:t?.platformRef},kU(e));return CS(r)}function kU(n){return{appProviders:[...FU,...n?.providers??[]],platformProviders:LU}}function MU(){th.makeCurrent()}function OU(){return new vn}function xU(){return my(document),document}var LU=[{provide:ns,useValue:tv},{provide:Od,useValue:MU,multi:!0},{provide:ke,useFactory:xU}];var FU=[{provide:Ya,useValue:"root"},{provide:vn,useFactory:OU},{provide:eh,useClass:Jd,multi:!0},{provide:eh,useClass:jS,multi:!0},cv,ov,sv,{provide:Zi,useExisting:cv},{provide:ss,useClass:SU},[]];var Jr=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),s=t.slice(r+1).trim();this.addHeaderEntry(i,s)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var rh=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}},ih=class{encodeKey(e){return BS(e)}encodeValue(e){return BS(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function VU(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=t.get(o)||[];u.push(a),t.set(o,u)}),t}var UU=/%(\d[a-f0-9])/gi,jU={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function BS(n){return encodeURIComponent(n).replace(UU,(e,t)=>jU[t]??e)}function nh(n){return`${n}`}var sr=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new ih,e.fromString){if(e.fromObject)throw new B(2805,!1);this.map=VU(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(nh):[nh(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(nh(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(nh(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};function BU(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function HS(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function $S(n){return typeof Blob<"u"&&n instanceof Blob}function qS(n){return typeof FormData<"u"&&n instanceof FormData}function HU(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var zS="Content-Type",GS="Accept",WS="text/plain",KS="application/json",$U=`${KS}, ${WS}, */*`,mo=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;referrerPolicy;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let s;if(BU(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s){if(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,this.keepalive=!!s.keepalive,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),s.priority&&(this.priority=s.priority),s.cache&&(this.cache=s.cache),s.credentials&&(this.credentials=s.credentials),typeof s.timeout=="number"){if(s.timeout<1||!Number.isInteger(s.timeout))throw new B(2822,"");this.timeout=s.timeout}s.mode&&(this.mode=s.mode),s.redirect&&(this.redirect=s.redirect),s.integrity&&(this.integrity=s.integrity),s.referrer&&(this.referrer=s.referrer),s.referrerPolicy&&(this.referrerPolicy=s.referrerPolicy),this.transferCache=s.transferCache}if(this.headers??=new Jr,this.context??=new rh,!this.params)this.params=new sr,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),u=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+u+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||HS(this.body)||$S(this.body)||qS(this.body)||HU(this.body)?this.body:this.body instanceof sr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||qS(this.body)?null:$S(this.body)?this.body.type||null:HS(this.body)?null:typeof this.body=="string"?WS:this.body instanceof sr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?KS:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.keepalive??this.keepalive,o=e.priority||this.priority,a=e.cache||this.cache,u=e.mode||this.mode,l=e.redirect||this.redirect,h=e.credentials||this.credentials,p=e.referrer||this.referrer,g=e.integrity||this.integrity,y=e.referrerPolicy||this.referrerPolicy,T=e.transferCache??this.transferCache,R=e.timeout??this.timeout,A=e.body!==void 0?e.body:this.body,P=e.withCredentials??this.withCredentials,F=e.reportProgress??this.reportProgress,$=e.headers||this.headers,J=e.params||this.params,xe=e.context??this.context;return e.setHeaders!==void 0&&($=Object.keys(e.setHeaders).reduce((ce,w)=>ce.set(w,e.setHeaders[w]),$)),e.setParams&&(J=Object.keys(e.setParams).reduce((ce,w)=>ce.set(w,e.setParams[w]),J)),new n(t,r,A,{params:J,headers:$,context:xe,reportProgress:F,responseType:i,withCredentials:P,transferCache:T,keepalive:s,cache:a,priority:o,timeout:R,mode:u,redirect:l,credentials:h,referrer:p,integrity:g,referrerPolicy:y})}},os=(function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n})(os||{}),vo=class{headers;status;statusText;url;ok;type;redirected;responseType;constructor(e,t=200,r="OK"){this.headers=e.headers||new Jr,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.responseType=e.responseType,this.ok=this.status>=200&&this.status<300}},sh=class n extends vo{constructor(e={}){super(e)}type=os.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Rc=class n extends vo{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=os.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected,responseType:e.responseType??this.responseType})}},yo=class extends vo{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},qU=200,zU=204;var GU=new U("");var WU=/^\)\]\}',?\n/;var lv=(()=>{class n{xhrFactory;tracingService=M(tr,{optional:!0});constructor(t){this.xhrFactory=t}maybePropagateTrace(t){return this.tracingService?.propagate?this.tracingService.propagate(t):t}handle(t){if(t.method==="JSONP")throw new B(-2800,!1);let r=this.xhrFactory;return mn(null).pipe(Oi(()=>new Z(s=>{let o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((A,P)=>o.setRequestHeader(A,P.join(","))),t.headers.has(GS)||o.setRequestHeader(GS,$U),!t.headers.has(zS)){let A=t.detectContentTypeHeader();A!==null&&o.setRequestHeader(zS,A)}if(t.timeout&&(o.timeout=t.timeout),t.responseType){let A=t.responseType.toLowerCase();o.responseType=A!=="json"?A:"text"}let a=t.serializeBody(),u=null,l=()=>{if(u!==null)return u;let A=o.statusText||"OK",P=new Jr(o.getAllResponseHeaders()),F=o.responseURL||t.url;return u=new sh({headers:P,status:o.status,statusText:A,url:F}),u},h=this.maybePropagateTrace(()=>{let{headers:A,status:P,statusText:F,url:$}=l(),J=null;P!==zU&&(J=typeof o.response>"u"?o.responseText:o.response),P===0&&(P=J?qU:0);let xe=P>=200&&P<300;if(t.responseType==="json"&&typeof J=="string"){let ce=J;J=J.replace(WU,"");try{J=J!==""?JSON.parse(J):null}catch(w){J=ce,xe&&(xe=!1,J={error:w,text:J})}}xe?(s.next(new Rc({body:J,headers:A,status:P,statusText:F,url:$||void 0})),s.complete()):s.error(new yo({error:J,headers:A,status:P,statusText:F,url:$||void 0}))}),p=this.maybePropagateTrace(A=>{let{url:P}=l(),F=new yo({error:A,status:o.status||0,statusText:o.statusText||"Unknown Error",url:P||void 0});s.error(F)}),g=p;t.timeout&&(g=this.maybePropagateTrace(A=>{let{url:P}=l(),F=new yo({error:new DOMException("Request timed out","TimeoutError"),status:o.status||0,statusText:o.statusText||"Request timeout",url:P||void 0});s.error(F)}));let y=!1,T=this.maybePropagateTrace(A=>{y||(s.next(l()),y=!0);let P={type:os.DownloadProgress,loaded:A.loaded};A.lengthComputable&&(P.total=A.total),t.responseType==="text"&&o.responseText&&(P.partialText=o.responseText),s.next(P)}),R=this.maybePropagateTrace(A=>{let P={type:os.UploadProgress,loaded:A.loaded};A.lengthComputable&&(P.total=A.total),s.next(P)});return o.addEventListener("load",h),o.addEventListener("error",p),o.addEventListener("timeout",g),o.addEventListener("abort",p),t.reportProgress&&(o.addEventListener("progress",T),a!==null&&o.upload&&o.upload.addEventListener("progress",R)),o.send(a),s.next({type:os.Sent}),()=>{o.removeEventListener("error",p),o.removeEventListener("abort",p),o.removeEventListener("load",h),o.removeEventListener("timeout",g),t.reportProgress&&(o.removeEventListener("progress",T),a!==null&&o.upload&&o.upload.removeEventListener("progress",R)),o.readyState!==o.DONE&&o.abort()}})))}static \u0275fac=function(r){return new(r||n)(W(ss))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function KU(n,e){return e(n)}function YU(n,e,t){return(r,i)=>En(t,()=>e(r,s=>n(s,i)))}var YS=new U("",{factory:()=>[]}),QS=new U(""),JS=new U("",{providedIn:"root",factory:()=>!0});var dv=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=W(lv),i},providedIn:"root"})}return n})();var oh=(()=>{class n{backend;injector;chain=null;pendingTasks=M(Gr);contributeToStability=M(JS);constructor(t,r){this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(YS),...this.injector.get(QS,[])]));this.chain=r.reduceRight((i,s)=>YU(i,s,this.injector),KU)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(hg(r))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(W(dv),W(ut))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),hv=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=W(oh),i},providedIn:"root"})}return n})();function uv(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,credentials:n.credentials,transferCache:n.transferCache,timeout:n.timeout,keepalive:n.keepalive,priority:n.priority,cache:n.cache,mode:n.mode,redirect:n.redirect,integrity:n.integrity,referrer:n.referrer,referrerPolicy:n.referrerPolicy}}var XS=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof mo)s=t;else{let u;i.headers instanceof Jr?u=i.headers:u=new Jr(i.headers);let l;i.params&&(i.params instanceof sr?l=i.params:l=new sr({fromObject:i.params})),s=new mo(t,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials,referrer:i.referrer,referrerPolicy:i.referrerPolicy,integrity:i.integrity,timeout:i.timeout})}let o=mn(s).pipe(ja(u=>this.handler.handle(u)));if(t instanceof mo||i.observe==="events")return o;let a=o.pipe(Ys(u=>u instanceof Rc));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(We(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new B(2806,!1);return u.body}));case"blob":return a.pipe(We(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new B(2807,!1);return u.body}));case"text":return a.pipe(We(u=>{if(u.body!==null&&typeof u.body!="string")throw new B(2808,!1);return u.body}));case"json":default:return a.pipe(We(u=>u.body))}case"response":return a;default:throw new B(2809,!1)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new sr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,uv(i,r))}post(t,r,i={}){return this.request("POST",t,uv(i,r))}put(t,r,i={}){return this.request("PUT",t,uv(i,r))}static \u0275fac=function(r){return new(r||n)(W(hv))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var QU=new U("",{factory:()=>!0}),JU="XSRF-TOKEN",XU=new U("",{providedIn:"root",factory:()=>JU}),ZU="X-XSRF-TOKEN",ej=new U("",{providedIn:"root",factory:()=>ZU}),tj=(()=>{class n{cookieName=M(XU);doc=M(ke);lastCookieString="";lastToken=null;parseCount=0;getToken(){let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=bc(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ZS=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=W(tj),i},providedIn:"root"})}return n})(),nj=/^(?:https?:)?\/\//i;function rj(n,e){if(!M(QU)||n.method==="GET"||n.method==="HEAD"||nj.test(n.url))return e(n);let t=M(ZS).getToken(),r=M(ej);return t!=null&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,t)})),e(n)}function ij(...n){let e=[XS,oh,{provide:hv,useExisting:oh},{provide:dv,useFactory:()=>M(GU,{optional:!0})??M(lv)},{provide:YS,useValue:rj,multi:!0}];for(let t of n)e.push(...t.\u0275providers);return wt(e)}var $se=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(W(ke))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var fv=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:function(r){let i=null;return r?i=new(r||n):i=W(sj),i},providedIn:"root"})}return n})(),sj=(()=>{class n extends fv{_doc;constructor(t){super(),this._doc=t}sanitize(t,r){if(r==null)return null;switch(t){case zt.NONE:return r;case zt.HTML:return An(r,"HTML")?xt(r):Fd(this._doc,String(r)).toString();case zt.STYLE:return An(r,"Style")?xt(r):r;case zt.SCRIPT:if(An(r,"Script"))return xt(r);throw new B(5200,!1);case zt.URL:return An(r,"URL")?xt(r):fc(String(r));case zt.RESOURCE_URL:if(An(r,"ResourceURL"))return xt(r);throw new B(5201,!1);default:throw new B(5202,!1)}}bypassSecurityTrustHtml(t){return vy(t)}bypassSecurityTrustStyle(t){return _y(t)}bypassSecurityTrustScript(t){return Ey(t)}bypassSecurityTrustUrl(t){return Iy(t)}bypassSecurityTrustResourceUrl(t){return wy(t)}static \u0275fac=function(r){return new(r||n)(W(ke))};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var kc=class{},t0=(()=>{class n{handle(t){return t.key}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),_o=class{},n0=(()=>{class n extends _o{compile(t,r){return t}compileTranslations(t,r){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Dt(n)))(i||n)}})();static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),Eo=class{},r0=(()=>{class n extends Eo{getTranslation(t){return mn({})}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Dt(n)))(i||n)}})();static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})();function ah(n,e){if(n===e)return!0;if(n===null||e===null)return!1;if(n!==n&&e!==e)return!0;let t=typeof n,r=typeof e,i;if(t==r&&t=="object")if(Array.isArray(n)){if(!Array.isArray(e))return!1;if((i=n.length)==e.length){for(let s=0;s<i;s++)if(!ah(n[s],e[s]))return!1;return!0}}else{if(Array.isArray(e))return!1;if(or(n)&&or(e)){let s=Object.create(null);for(let o in n){if(!ah(n[o],e[o]))return!1;s[o]=!0}for(let o in e)if(!(o in s)&&typeof e[o]<"u")return!1;return!0}}return!1}function Xr(n){return typeof n<"u"&&n!==null}function e0(n){return n!==void 0}function or(n){return Pc(n)&&!as(n)&&n!==null}function Pc(n){return typeof n=="object"&&n!==null}function as(n){return Array.isArray(n)}function ch(n){return typeof n=="string"}function oj(n){return typeof n=="function"}function uh(n){if(as(n))return n.map(e=>uh(e));if(or(n)){let e={};return Object.keys(n).forEach(t=>{e[t]=uh(n[t])}),e}else return n}function vv(n,e){if(!Pc(n))return uh(e);let t=uh(n);return Pc(t)&&Pc(e)&&Object.keys(e).forEach(r=>{or(e[r])?r in n?t[r]=vv(n[r],e[r]):Object.assign(t,{[r]:e[r]}):Object.assign(t,{[r]:e[r]})}),t}function i0(n,e){let t=e.split(".");e="";do{e+=t.shift();let r=!t.length;if(Xr(n)){if(or(n)&&e0(n[e])&&(or(n[e])||as(n[e])||r)){n=n[e],e="";continue}if(as(n)){let i=parseInt(e,10);if(e0(n[i])&&(or(n[i])||as(n[i])||r)){n=n[i],e="";continue}}}if(r){n=void 0;continue}e+="."}while(t.length);return n}function aj(n,e,t){return vv(n,cj(e,t))}function cj(n,e){return n.split(".").reduceRight((t,r)=>({[r]:t}),e)}var Io=class{},s0=(()=>{class n extends Io{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(t,r){if(ch(t))return this.interpolateString(t,r);if(oj(t))return this.interpolateFunction(t,r)}interpolateFunction(t,r){return t(r)}interpolateString(t,r){return r?t.replace(this.templateMatcher,(i,s)=>{let o=this.getInterpolationReplacement(r,s);return o!==void 0?o:i}):t}getInterpolationReplacement(t,r){return this.formatValue(i0(t,r))}formatValue(t){if(ch(t))return t;if(typeof t=="number"||typeof t=="boolean")return t.toString();if(t===null)return"null";if(as(t))return t.join(", ");if(Pc(t))return typeof t.toString=="function"&&t.toString!==Object.prototype.toString?t.toString():JSON.stringify(t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Dt(n)))(i||n)}})();static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),pv=(()=>{class n{_onTranslationChange=new be;_onLangChange=new be;_onFallbackLangChange=new be;fallbackLang=null;currentLang;translations={};languages=[];getTranslations(t){return this.translations[t]}setTranslations(t,r,i){this.translations[t]=i&&this.hasTranslationFor(t)?vv(this.translations[t],r):r,this.addLanguages([t]),this._onTranslationChange.next({lang:t,translations:this.getTranslations(t)})}getLanguages(){return this.languages}getCurrentLang(){return this.currentLang}getFallbackLang(){return this.fallbackLang}setFallbackLang(t,r=!0){this.fallbackLang=t,r&&this._onFallbackLangChange.next({lang:t,translations:this.translations[t]})}setCurrentLang(t,r=!0){this.currentLang=t,r&&this._onLangChange.next({lang:t,translations:this.translations[t]})}get onTranslationChange(){return this._onTranslationChange.asObservable()}get onLangChange(){return this._onLangChange.asObservable()}get onFallbackLangChange(){return this._onFallbackLangChange.asObservable()}addLanguages(t){this.languages=Array.from(new Set([...this.languages,...t]))}hasTranslationFor(t){return typeof this.translations[t]<"u"}deleteTranslations(t){delete this.translations[t]}getTranslation(t){let r=this.getValue(this.currentLang,t);return r===void 0&&this.fallbackLang!=null&&this.fallbackLang!==this.currentLang&&(r=this.getValue(this.fallbackLang,t)),r}getValue(t,r){return i0(this.getTranslations(t),r)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})(),gv=new U("TRANSLATE_CONFIG"),Nc=n=>Or(n)?n:mn(n);var mv=(()=>{class n{loadingTranslations;pending=!1;_translationRequests={};lastUseLanguage=null;currentLoader=M(Eo);compiler=M(_o);parser=M(Io);missingTranslationHandler=M(kc);store=M(pv);extend=!1;get onTranslationChange(){return this.store.onTranslationChange}get onLangChange(){return this.store.onLangChange}get onFallbackLangChange(){return this.store.onFallbackLangChange}get onDefaultLangChange(){return this.store.onFallbackLangChange}constructor(){let t=j({extend:!1,fallbackLang:null},M(gv,{optional:!0}));t.lang&&this.use(t.lang),t.fallbackLang&&this.setFallbackLang(t.fallbackLang),t.extend&&(this.extend=!0)}setFallbackLang(t){this.getFallbackLang()||this.store.setFallbackLang(t,!1);let r=this.loadOrExtendLanguage(t);return Or(r)?(r.pipe(xr(1)).subscribe({next:()=>{this.store.setFallbackLang(t)},error:()=>{}}),r):(this.store.setFallbackLang(t),mn(this.store.getTranslations(t)))}use(t){this.lastUseLanguage=t,this.getCurrentLang()||this.store.setCurrentLang(t,!1);let r=this.loadOrExtendLanguage(t);return Or(r)?(r.pipe(xr(1)).subscribe({next:()=>{this.changeLang(t)},error:()=>{}}),r):(this.changeLang(t),mn(this.store.getTranslations(t)))}loadOrExtendLanguage(t){if(!this.store.hasTranslationFor(t)||this.extend)return this._translationRequests[t]=this._translationRequests[t]||this.loadAndCompileTranslations(t),this._translationRequests[t]}changeLang(t){t===this.lastUseLanguage&&this.store.setCurrentLang(t)}getCurrentLang(){return this.store.getCurrentLang()}loadAndCompileTranslations(t){this.pending=!0;let r=this.currentLoader.getTranslation(t).pipe(kl(1),xr(1));return this.loadingTranslations=r.pipe(We(i=>this.compiler.compileTranslations(i,t)),kl(1),xr(1)),this.loadingTranslations.subscribe({next:i=>{this.store.setTranslations(t,i,this.extend),this.pending=!1},error:i=>{this.pending=!1}}),r}setTranslation(t,r,i=!1){let s=this.compiler.compileTranslations(r,t);this.store.setTranslations(t,s,i||this.extend)}getLangs(){return this.store.getLanguages()}addLangs(t){this.store.addLanguages(t)}getParsedResultForKey(t,r){let i=this.getTextToInterpolate(t);if(Xr(i))return this.runInterpolation(i,r);let s=this.missingTranslationHandler.handle(j({key:t,translateService:this},r!==void 0&&{interpolateParams:r}));return s!==void 0?s:t}getFallbackLang(){return this.store.getFallbackLang()}getTextToInterpolate(t){return this.store.getTranslation(t)}runInterpolation(t,r){if(Xr(t))return as(t)?this.runInterpolationOnArray(t,r):or(t)?this.runInterpolationOnDict(t,r):this.parser.interpolate(t,r)}runInterpolationOnArray(t,r){return t.map(i=>this.runInterpolation(i,r))}runInterpolationOnDict(t,r){let i={};for(let s in t){let o=this.runInterpolation(t[s],r);o!==void 0&&(i[s]=o)}return i}getParsedResult(t,r){return t instanceof Array?this.getParsedResultForArray(t,r):this.getParsedResultForKey(t,r)}getParsedResultForArray(t,r){let i={},s=!1;for(let a of t)i[a]=this.getParsedResultForKey(a,r),s=s||Or(i[a]);if(!s)return i;let o=t.map(a=>Nc(i[a]));return Ua(o).pipe(We(a=>{let u={};return a.forEach((l,h)=>{u[t[h]]=l}),u}))}get(t,r){if(!Xr(t)||!t.length)throw new Error('Parameter "key" is required and cannot be empty');return this.pending?this.loadingTranslations.pipe(ja(()=>Nc(this.getParsedResult(t,r)))):Nc(this.getParsedResult(t,r))}getStreamOnTranslationChange(t,r){if(!Xr(t)||!t.length)throw new Error('Parameter "key" is required and cannot be empty');return Mi(Nl(()=>this.get(t,r)),this.onTranslationChange.pipe(Oi(()=>{let i=this.getParsedResult(t,r);return Nc(i)})))}stream(t,r){if(!Xr(t)||!t.length)throw new Error('Parameter "key" required');return Mi(Nl(()=>this.get(t,r)),this.onLangChange.pipe(Oi(()=>{let i=this.getParsedResult(t,r);return Nc(i)})))}instant(t,r){if(!Xr(t)||t.length===0)throw new Error('Parameter "key" is required and cannot be empty');let i=this.getParsedResult(t,r);return Or(i)?Array.isArray(t)?t.reduce((s,o)=>(s[o]=o,s),{}):t:i}set(t,r,i=this.getCurrentLang()){this.store.setTranslations(i,aj(this.store.getTranslations(i),t,ch(r)?this.compiler.compile(r,i):this.compiler.compileTranslations(r,i)),!1)}reloadLang(t){return this.resetLang(t),this.loadAndCompileTranslations(t)}resetLang(t){delete this._translationRequests[t],this.store.deleteTranslations(t)}static getBrowserLang(){if(typeof window>"u"||!window.navigator)return;let t=this.getBrowserCultureLang();return t?t.split(/[-_]/)[0]:void 0}static getBrowserCultureLang(){if(!(typeof window>"u"||typeof window.navigator>"u"))return window.navigator.languages?window.navigator.languages[0]:window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage}getBrowserLang(){return n.getBrowserLang()}getBrowserCultureLang(){return n.getBrowserCultureLang()}get defaultLang(){return this.getFallbackLang()}get currentLang(){return this.store.getCurrentLang()}get langs(){return this.store.getLanguages()}setDefaultLang(t){return this.setFallbackLang(t)}getDefaultLang(){return this.getFallbackLang()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})();var eoe=(()=>{class n{translate=M(mv);_ref=M(is);value="";lastKey=null;lastParams=[];onTranslationChange;onLangChange;onFallbackLangChange;updateValue(t,r,i){let s=o=>{this.value=o!==void 0?o:t,this.lastKey=t,this._ref.markForCheck()};if(i){let o=this.translate.getParsedResult(t,r);Or(o)?o.subscribe(s):s(o)}this.translate.get(t,r).subscribe(s)}transform(t,...r){if(!t||!t.length)return t;if(ah(t,this.lastKey)&&ah(r,this.lastParams))return this.value;let i;if(Xr(r[0])&&r.length)if(ch(r[0])&&r[0].length){let s=r[0].replace(/(')?([a-zA-Z0-9_]+)(')?(\s)?:/g,'"$2":').replace(/:(\s)?(')(.*?)(')/g,':"$3"');try{i=JSON.parse(s)}catch(o){throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${r[0]}`)}}else or(r[0])&&(i=r[0]);return this.lastKey=t,this.lastParams=r,this.updateValue(t,i),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(s=>{(this.lastKey&&s.lang===this.translate.getCurrentLang()||s.lang===this.translate.getFallbackLang())&&(this.lastKey=null,this.updateValue(t,i,s.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(s=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,i,s.translations))})),this.onFallbackLangChange||(this.onFallbackLangChange=this.translate.onFallbackLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,i))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onFallbackLangChange<"u"&&(this.onFallbackLangChange.unsubscribe(),this.onFallbackLangChange=void 0)}ngOnDestroy(){this._dispose()}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=yc({name:"translate",type:n,pure:!1});static \u0275prov=V({token:n,factory:n.\u0275fac})}return n})();function o0(n){return{provide:Eo,useClass:n}}function a0(n){return{provide:_o,useClass:n}}function c0(n){return{provide:Io,useClass:n}}function u0(n){return{provide:kc,useClass:n}}function toe(n={}){return yv(j({compiler:a0(n0),parser:c0(s0),loader:o0(r0),missingTranslationHandler:u0(t0)},n),!0)}function yv(n={},e){let t=[];n.loader&&t.push(n.loader),n.compiler&&t.push(n.compiler),n.parser&&t.push(n.parser),n.missingTranslationHandler&&t.push(n.missingTranslationHandler),e&&t.push(pv),(n.useDefaultLang||n.defaultLanguage)&&(console.warn("The `useDefaultLang` and `defaultLanguage` options are deprecated. Please use `fallbackLang` instead."),n.useDefaultLang===!0&&n.defaultLanguage&&(n.fallbackLang=n.defaultLanguage));let r={fallbackLang:n.fallbackLang??null,lang:n.lang,extend:n.extend??!1};return t.push({provide:gv,useValue:r}),t.push({provide:mv,useClass:mv,deps:[pv,Eo,_o,Io,kc,gv]}),t}var noe=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[...yv(j({compiler:a0(n0),parser:c0(s0),loader:o0(r0),missingTranslationHandler:u0(t0)},t),!0)]}}static forChild(t={}){return{ngModule:n,providers:[...yv(t,t.isolate??!1)]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Gt({type:n});static \u0275inj=St({})}return n})();var _0=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(Y(Qr),Y(Ot))};static \u0275dir=Ee({type:n})}return n})(),Eh=(()=>{class n extends _0{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Dt(n)))(i||n)}})();static \u0275dir=Ee({type:n,features:[Ve]})}return n})(),cs=new U("");var uj={provide:cs,useExisting:Ke(()=>E0),multi:!0};function lj(){let n=Kt()?Kt().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var dj=new U(""),E0=(()=>{class n extends _0{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!lj())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(Y(Qr),Y(Ot),Y(dj,8))};static \u0275dir=Ee({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&rr("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},standalone:!1,features:[vt([uj]),Ve]})}return n})();function wv(n){return n==null||Tv(n)===0}function Tv(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var cr=new U(""),us=new U(""),hj=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,l0=class{static min(e){return I0(e)}static max(e){return fj(e)}static required(e){return w0(e)}static requiredTrue(e){return pj(e)}static email(e){return gj(e)}static minLength(e){return mj(e)}static maxLength(e){return yj(e)}static pattern(e){return vj(e)}static nullValidator(e){return dh()}static compose(e){return S0(e)}static composeAsync(e){return R0(e)}};function I0(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function fj(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function w0(n){return wv(n.value)?{required:!0}:null}function pj(n){return n.value===!0?null:{required:!0}}function gj(n){return wv(n.value)||hj.test(n.value)?null:{email:!0}}function mj(n){return e=>{let t=e.value?.length??Tv(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function yj(n){return e=>{let t=e.value?.length??Tv(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function vj(n){if(!n)return dh;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(wv(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function dh(n){return null}function T0(n){return n!=null}function b0(n){return po(n)?At(n):n}function D0(n){let e={};return n.forEach(t=>{e=t!=null?j(j({},e),t):e}),Object.keys(e).length===0?null:e}function C0(n,e){return e.map(t=>t(n))}function _j(n){return!n.validate}function A0(n){return n.map(e=>_j(e)?e:t=>e.validate(t))}function S0(n){if(!n)return null;let e=n.filter(T0);return e.length==0?null:function(t){return D0(C0(t,e))}}function bv(n){return n!=null?S0(A0(n)):null}function R0(n){if(!n)return null;let e=n.filter(T0);return e.length==0?null:function(t){let r=C0(t,e).map(b0);return Ua(r).pipe(We(D0))}}function Dv(n){return n!=null?R0(A0(n)):null}function d0(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function N0(n){return n._rawValidators}function P0(n){return n._rawAsyncValidators}function _v(n){return n?Array.isArray(n)?n:[n]:[]}function hh(n,e){return Array.isArray(n)?n.includes(e):n===e}function h0(n,e){let t=_v(e);return _v(n).forEach(i=>{hh(t,i)||t.push(i)}),t}function f0(n,e){return _v(e).filter(t=>!hh(n,t))}var fh=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=bv(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Dv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},_t=class extends fh{name;get formDirective(){return null}get path(){return null}},ar=class extends fh{_parent=null;name=null;valueAccessor=null},ph=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var Eoe=(()=>{class n extends ph{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Y(ar,2))};static \u0275dir=Ee({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Ec("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Ve]})}return n})(),Ioe=(()=>{class n extends ph{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Y(_t,10))};static \u0275dir=Ee({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Ec("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Ve]})}return n})();var Mc="VALID",lh="INVALID",wo="PENDING",Oc="DISABLED",Zr=class{},gh=class extends Zr{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Lc=class extends Zr{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Fc=class extends Zr{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},To=class extends Zr{status;source;constructor(e,t){super(),this.status=e,this.source=t}},mh=class extends Zr{source;constructor(e){super(),this.source=e}},Uc=class extends Zr{source;constructor(e){super(),this.source=e}};function Cv(n){return(Ih(n)?n.validators:n)||null}function Ej(n){return Array.isArray(n)?bv(n):n||null}function Av(n,e){return(Ih(e)?e.asyncValidators:n)||null}function Ij(n){return Array.isArray(n)?Dv(n):n||null}function Ih(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function k0(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new B(1e3,"");if(!r[t])throw new B(1001,"")}function M0(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new B(1002,"")})}var bo=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return kt(this.statusReactive)}set status(e){kt(()=>this.statusReactive.set(e))}_status=ir(()=>this.statusReactive(),{});statusReactive=Pt(void 0,{});get valid(){return this.status===Mc}get invalid(){return this.status===lh}get pending(){return this.status==wo}get disabled(){return this.status===Oc}get enabled(){return this.status!==Oc}errors;get pristine(){return kt(this.pristineReactive)}set pristine(e){kt(()=>this.pristineReactive.set(e))}_pristine=ir(()=>this.pristineReactive(),{});pristineReactive=Pt(!0,{});get dirty(){return!this.pristine}get touched(){return kt(this.touchedReactive)}set touched(e){kt(()=>this.touchedReactive.set(e))}_touched=ir(()=>this.touchedReactive(),{});touchedReactive=Pt(!1,{});get untouched(){return!this.touched}_events=new be;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(h0(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(h0(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(f0(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(f0(e,this._rawAsyncValidators))}hasValidator(e){return hh(this._rawValidators,e)}hasAsyncValidator(e){return hh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ie(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Fc(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Fc(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ie(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Lc(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Lc(!0,r))}markAsPending(e={}){this.status=wo;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new To(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ie(j({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Oc,this.errors=null,this._forEachChild(i=>{i.disable(ie(j({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new gh(this.value,r)),this._events.next(new To(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ie(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Mc,this._forEachChild(r=>{r.enable(ie(j({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ie(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Mc||this.status===wo)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new gh(this.value,t)),this._events.next(new To(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ie(j({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Oc:Mc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=wo,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=b0(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new To(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new rt,this.statusChanges=new rt}_calculateStatus(){return this._allControlsDisabled()?Oc:this.errors?lh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(wo)?wo:this._anyControlsHaveStatus(lh)?lh:Mc}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Lc(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Fc(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ih(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Ej(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Ij(this._rawAsyncValidators)}},Do=class extends bo{constructor(e,t,r){super(Cv(t),Av(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){M0(this,!0,e),Object.keys(e).forEach(r=>{k0(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,ie(j({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Uc(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Ev=class extends Do{};var Co=new U("",{factory:()=>wh}),wh="always";function Th(n,e){return[...e.path,n]}function jc(n,e,t=wh){Sv(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),Tj(n,e),Dj(n,e),bj(n,e),wj(n,e)}function yh(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),_h(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function vh(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function wj(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Sv(n,e){let t=N0(n);e.validator!==null?n.setValidators(d0(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=P0(n);e.asyncValidator!==null?n.setAsyncValidators(d0(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();vh(e._rawValidators,i),vh(e._rawAsyncValidators,i)}function _h(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=N0(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(e.asyncValidator!==null){let i=P0(n);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}let r=()=>{};return vh(e._rawValidators,r),vh(e._rawAsyncValidators,r),t}function Tj(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&O0(n,e)})}function bj(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&O0(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function O0(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Dj(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function x0(n,e){n==null,Sv(n,e)}function Cj(n,e){return _h(n,e)}function Rv(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Aj(n){return Object.getPrototypeOf(n.constructor)===Eh}function L0(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Nv(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===E0?t=s:Aj(s)?r=s:i=s}),i||r||t||null}function Sj(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var Rj={provide:_t,useExisting:Ke(()=>Nj)},xc=Promise.resolve(),Nj=(()=>{class n extends _t{callSetDisabledState;get submitted(){return kt(this.submittedReactive)}_submitted=ir(()=>this.submittedReactive(),{});submittedReactive=Pt(!1,{});_directives=new Set;form;ngSubmit=new rt;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Do({},bv(t),Dv(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){xc.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),jc(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){xc.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){xc.then(()=>{let r=this._findContainer(t.path),i=new Do({});x0(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){xc.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){xc.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),L0(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new mh(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(Y(cr,10),Y(us,10),Y(Co,8))};static \u0275dir=Ee({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup","",3,"formArray",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&rr("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[vt([Rj]),Ve]})}return n})();function p0(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function g0(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Vc=class extends bo{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(Cv(t),Av(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ih(t)&&(t.nonNullable||t.initialValueIsDefault)&&(g0(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),t.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new Uc(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){p0(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){p0(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){g0(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Pj=n=>n instanceof Vc,kj=(()=>{class n extends _t{_parent;ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Th(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Dt(n)))(i||n)}})();static \u0275dir=Ee({type:n,standalone:!1,features:[Ve]})}return n})();var Mj={provide:ar,useExisting:Ke(()=>Oj)},m0=Promise.resolve(),Oj=(()=>{class n extends ar{_changeDetectorRef;callSetDisabledState;control=new Vc;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new rt;constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Nv(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Rv(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){jc(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){m0.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Kd(r);m0.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Th(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(Y(_t,9),Y(cr,10),Y(us,10),Y(cs,10),Y(is,8),Y(Co,8))};static \u0275dir=Ee({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[vt([Mj]),Ve,Yr]})}return n})();var Toe=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ee({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),xj={provide:cs,useExisting:Ke(()=>Lj),multi:!0},Lj=(()=>{class n extends Eh{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Dt(n)))(i||n)}})();static \u0275dir=Ee({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&rr("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[vt([xj]),Ve]})}return n})();var Iv=class extends bo{constructor(e,t,r){super(Cv(t),Av(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){Array.isArray(e)?e.forEach(r=>{this.controls.push(r),this._registerControl(r)}):(this.controls.push(e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){M0(this,!1,e),e.forEach((r,i)=>{k0(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],ie(j({},t),{onlySelf:!0}))}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new Uc(this))}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};var F0=(()=>{class n extends _t{callSetDisabledState;get submitted(){return kt(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=ir(()=>this._submittedReactive(),{});_submittedReactive=Pt(!1,{});_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this.onChanges(t)}ngOnDestroy(){this.onDestroy()}onChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}onDestroy(){this.form&&(_h(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get path(){return[]}addControl(t){let r=this.form.get(t.path);return jc(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){yh(t.control||null,t,!1),Sj(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}getFormArray(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}updateModel(t,r){this.form.get(t.path).setValue(r)}onReset(){this.resetForm()}resetForm(t=void 0,r={}){this.form.reset(t,r),this._submittedReactive.set(!1)}onSubmit(t){return this.submitted=!0,L0(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new mh(this.control)),t?.target?.method==="dialog"}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(yh(r||null,t),Pj(i)&&(jc(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);x0(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&Cj(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Sv(this.form,this),this._oldForm&&_h(this._oldForm,this)}_checkFormPresent(){this.form}static \u0275fac=function(r){return new(r||n)(Y(cr,10),Y(us,10),Y(Co,8))};static \u0275dir=Ee({type:n,features:[Ve,Yr]})}return n})();var Pv=new U(""),Fj={provide:ar,useExisting:Ke(()=>Vj)},Vj=(()=>{class n extends ar{_ngModelWarningConfig;callSetDisabledState;viewModel;form;set isDisabled(t){}model;update=new rt;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=s,this.callSetDisabledState=o,this._setValidators(t),this._setAsyncValidators(r),this.valueAccessor=Nv(this,i)}ngOnChanges(t){if(this._isControlChanged(t)){let r=t.form.previousValue;r&&yh(r,this,!1),jc(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}Rv(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&yh(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_isControlChanged(t){return t.hasOwnProperty("form")}static \u0275fac=function(r){return new(r||n)(Y(cr,10),Y(us,10),Y(cs,10),Y(Pv,8),Y(Co,8))};static \u0275dir=Ee({type:n,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],standalone:!1,features:[vt([Fj]),Ve,Yr]})}return n})(),Uj={provide:_t,useExisting:Ke(()=>V0)},V0=(()=>{class n extends kj{name=null;constructor(t,r,i){super(),this._parent=t,this._setValidators(r),this._setAsyncValidators(i)}_checkParentType(){j0(this._parent)}static \u0275fac=function(r){return new(r||n)(Y(_t,13),Y(cr,10),Y(us,10))};static \u0275dir=Ee({type:n,selectors:[["","formGroupName",""]],inputs:{name:[0,"formGroupName","name"]},standalone:!1,features:[vt([Uj]),Ve]})}return n})(),jj={provide:_t,useExisting:Ke(()=>U0)},U0=(()=>{class n extends _t{_parent;name=null;constructor(t,r,i){super(),this._parent=t,this._setValidators(r),this._setAsyncValidators(i)}ngOnInit(){j0(this._parent),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective?.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Th(this.name==null?this.name:this.name.toString(),this._parent)}static \u0275fac=function(r){return new(r||n)(Y(_t,13),Y(cr,10),Y(us,10))};static \u0275dir=Ee({type:n,selectors:[["","formArrayName",""]],inputs:{name:[0,"formArrayName","name"]},standalone:!1,features:[vt([jj]),Ve]})}return n})();function j0(n){return!(n instanceof V0)&&!(n instanceof F0)&&!(n instanceof U0)}var Bj={provide:ar,useExisting:Ke(()=>Hj)},Hj=(()=>{class n extends ar{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new rt;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,s,o){super(),this._ngModelWarningConfig=o,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=Nv(this,s)}ngOnChanges(t){this._added||this._setUpControl(),Rv(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Th(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(Y(_t,13),Y(cr,10),Y(us,10),Y(cs,10),Y(Pv,8))};static \u0275dir=Ee({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[vt([Bj]),Ve,Yr]})}return n})();var $j={provide:_t,useExisting:Ke(()=>qj)},qj=(()=>{class n extends F0{form=null;ngSubmit=new rt;get control(){return this.form}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Dt(n)))(i||n)}})();static \u0275dir=Ee({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&rr("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[vt([$j]),Ve]})}return n})(),zj={provide:cs,useExisting:Ke(()=>H0),multi:!0};function B0(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Gj(n){return n.split(":")[0]}var H0=(()=>{class n extends Eh{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=M(rs).injector;destroyRef=M(Tt);cdr=M(is);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Ny({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=B0(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=Gj(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Dt(n)))(i||n)}})();static \u0275dir=Ee({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&rr("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[vt([zj]),Ve]})}return n})(),boe=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(B0(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(Y(Ot),Y(Qr),Y(H0,9))};static \u0275dir=Ee({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),Wj={provide:cs,useExisting:Ke(()=>$0),multi:!0};function y0(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Kj(n){return n.split(":")[0]}var $0=(()=>{class n extends Eh{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let u=o[a],l=this._getOptionValue(u.value);i.push(l)}}else{let o=r.options;for(let a=0;a<o.length;a++){let u=o[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=Kj(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Dt(n)))(i||n)}})();static \u0275dir=Ee({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&rr("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[vt([Wj]),Ve]})}return n})(),Doe=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(y0(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(y0(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(Y(Ot),Y(Qr),Y($0,9))};static \u0275dir=Ee({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function Yj(n){return typeof n=="number"?n:parseFloat(n)}var q0=(()=>{class n{_validator=dh;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):dh,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ee({type:n,features:[Yr]})}return n})();var Qj={provide:cr,useExisting:Ke(()=>Jj),multi:!0},Jj=(()=>{class n extends q0{min;inputName="min";normalizeInput=t=>Yj(t);createValidator=t=>I0(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Dt(n)))(i||n)}})();static \u0275dir=Ee({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&vc("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[vt([Qj]),Ve]})}return n})(),Xj={provide:cr,useExisting:Ke(()=>Zj),multi:!0};var Zj=(()=>{class n extends q0{required;inputName="required";normalizeInput=Kd;createValidator=t=>w0;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Dt(n)))(i||n)}})();static \u0275dir=Ee({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&vc("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[vt([Xj]),Ve]})}return n})();var z0=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Gt({type:n});static \u0275inj=St({})}return n})();function v0(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Coe=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),s={};return v0(r)?s=r:r!==null&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new Do(i,s)}record(t,r=null){let i=this._reduceControls(t);return new Ev(i,r)}control(t,r,i){let s={};return this.useNonNullable?(v0(r)?s=r:(s.validators=r,s.asyncValidators=i),new Vc(t,ie(j({},s),{nonNullable:!0}))):new Vc(t,r,i)}array(t,r,i){let s=t.map(o=>this._createControl(o));return new Iv(s,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof Vc)return t;if(t instanceof bo)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,s=t.length>2?t[2]:null;return this.control(r,i,s)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Aoe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Co,useValue:t.callSetDisabledState??wh}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Gt({type:n});static \u0275inj=St({imports:[z0]})}return n})(),Soe=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Pv,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Co,useValue:t.callSetDisabledState??wh}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Gt({type:n});static \u0275inj=St({imports:[z0]})}return n})();var kv={passing:{style:"bg-blue-50 text-blue-700 border-blue-200 dark:bg-blue-900/30 dark:text-blue-400 dark:border-blue-800",icon:'<ellipse cx="12" cy="12" rx="9" ry="5" stroke="currentColor" stroke-width="2" fill="none"/><line x1="8" y1="12" x2="16" y2="12" stroke="currentColor" stroke-width="2"/>'},defense:{style:"bg-red-50 text-red-700 border-red-200 dark:bg-red-900/30 dark:text-red-400 dark:border-red-800",icon:'<path d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>'},offense:{style:"bg-orange-50 text-orange-700 border-orange-200 dark:bg-orange-900/30 dark:text-orange-400 dark:border-orange-800",icon:'<path d="M13 10V3L4 14h7v7l9-11h-7z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>'},conditioning:{style:"bg-teal-50 text-teal-700 border-teal-200 dark:bg-teal-900/30 dark:text-teal-400 dark:border-teal-800",icon:'<path d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 7.636V4m0 16.364V20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>'},warmup:{style:"bg-yellow-50 text-yellow-700 border-yellow-200 dark:bg-yellow-900/30 dark:text-yellow-400 dark:border-yellow-800",icon:'<path d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M9.879 16.121A3 3 0 1012.015 11L11 14H9c0 .768.293 1.536.879 2.121z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>'},flag_pulling:{style:"bg-pink-50 text-pink-700 border-pink-200 dark:bg-pink-900/30 dark:text-pink-400 dark:border-pink-800",icon:'<path d="M7 11.5V14m0-2.5v-6a1.5 1.5 0 113 0m-3 6a1.5 1.5 0 00-3 0v2a7.5 7.5 0 0015 0v-5a1.5 1.5 0 00-3 0m-6-3V11m0-5.5v-1a1.5 1.5 0 013 0v1m0 0V11m0-5.5a1.5 1.5 0 013 0v3m0 0V11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>'}},Mv={beginner:{style:"bg-green-50 text-green-700 border-green-200 dark:bg-green-900/30 dark:text-green-400 dark:border-green-800",icon:'<path d="M12 2l2.5 7.5H22l-6 4.5 2.5 7.5-6.5-4.5-6.5 4.5 2.5-7.5-6-4.5h7.5L12 2z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/>'},intermediate:{style:"bg-blue-50 text-blue-700 border-blue-200 dark:bg-blue-900/30 dark:text-blue-400 dark:border-blue-800",icon:'<path d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>'},advanced:{style:"bg-purple-50 text-purple-700 border-purple-200 dark:bg-purple-900/30 dark:text-purple-400 dark:border-purple-800",icon:'<path d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>'}};var G0=class n{sanitizer=M(fv);getCategoryStyle(e){return e&&kv[e]?.style||"bg-gray-100 text-gray-700 border-gray-200"}getCategoryIcon(e){let r=(e?kv[e]?.icon:null)||'<path d="M4 6h16M4 10h16M4 14h16M4 18h16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>';return this.sanitizer.bypassSecurityTrustHtml(`<svg class="w-4 h-4" viewBox="0 0 24 24" fill="none">${r}</svg>`)}getLevelStyle(e){return e&&Mv[e]?.style||"bg-gray-100 text-gray-700 border-gray-200"}getLevelIcon(e){let r=(e?Mv[e]?.icon:null)||'<path d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>';return this.sanitizer.bypassSecurityTrustHtml(`<svg class="w-4 h-4" viewBox="0 0 24 24" fill="none">${r}</svg>`)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};var Voe=[{value:"passing",label:"Passing",translationKey:"DRILL.CATEGORIES.PASSING"},{value:"defense",label:"Defense",translationKey:"DRILL.CATEGORIES.DEFENSE"},{value:"offense",label:"Offense",translationKey:"DRILL.CATEGORIES.OFFENSE"},{value:"conditioning",label:"Conditioning",translationKey:"DRILL.CATEGORIES.CONDITIONING"},{value:"warmup",label:"Warm-up",translationKey:"DRILL.CATEGORIES.WARMUP"},{value:"flag_pulling",label:"Flag Pulling",translationKey:"DRILL.CATEGORIES.FLAG_PULLING"}],Uoe=[{value:"beginner",label:"Beginner",translationKey:"DRILL.LEVELS.BEGINNER"},{value:"intermediate",label:"Intermediate",translationKey:"DRILL.LEVELS.INTERMEDIATE"},{value:"advanced",label:"Advanced",translationKey:"DRILL.LEVELS.ADVANCED"}];var W0=class n{_toasts=Pt([],{});toasts=this._toasts.asReadonly();constructor(){}show(e,t="info",r=3e3){let i=this.generateId(),s={id:i,message:e,type:t,duration:r};this._toasts.update(o=>[...o,s]),r>0&&setTimeout(()=>{this.dismiss(i)},r)}success(e,t=3e3){this.show(e,"success",t)}error(e,t=4e3){this.show(e,"error",t)}info(e,t=3e3){this.show(e,"info",t)}dismiss(e){this._toasts.update(t=>t.filter(r=>r.id!==e))}clear(){this._toasts.set([])}generateId(){return`toast_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}static \u0275fac=function(t){return new(t||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};var K0=class n{confirmDataSubject=new be;isVisibleSubject=new be;resolverSubject=new be;confirmData$=this.confirmDataSubject.asObservable();isVisible$=this.isVisibleSubject.asObservable();confirm(e){return new Z(t=>{this.confirmDataSubject.next(e),this.isVisibleSubject.next(!0);let r=this.resolverSubject.subscribe(i=>{t.next(i),t.complete()});return()=>{r.unsubscribe(),this.close()}})}resolve(e){this.resolverSubject.next(e),this.close()}close(){this.isVisibleSubject.next(!1),this.confirmDataSubject.next(null)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})};var Y0=()=>{};var X0=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},eB=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},bh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;u||(y=64,o||(g=64)),r.push(t[h],t[p],t[g],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(X0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):eB(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new xv;let g=s<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let T=l<<6&192|p;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},xv=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},tB=function(n){let e=X0(n);return bh.encodeByteArray(e,!0)},Hc=function(n){return tB(n).replace(/\./g,"")},Dh=function(n){try{return bh.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Fv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var nB=()=>Fv().__FIREBASE_DEFAULTS__,rB=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},iB=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Dh(n[1]);return e&&JSON.parse(e)},Ch=()=>{try{return Y0()||nB()||rB()||iB()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Vv=n=>{var e,t;return(t=(e=Ch())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Z0=n=>{let e=Vv(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Uv=()=>{var n;return(n=Ch())===null||n===void 0?void 0:n.config},jv=n=>{var e;return(e=Ch())===null||e===void 0?void 0:e[`_${n}`]};var ls=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function ei(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ah(n){return(await fetch(n,{credentials:"include"})).ok}function eR(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Hc(JSON.stringify(t)),Hc(JSON.stringify(o)),""].join(".")}var Bc={};function sB(){let n={prod:[],emulator:[]};for(let e of Object.keys(Bc))Bc[e]?n.emulator.push(e):n.prod.push(e);return n}function oB(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var Q0=!1;function Sh(n,e){if(typeof window>"u"||typeof document>"u"||!ei(window.location.host)||Bc[n]===e||Bc[n]||Q0)return;Bc[n]=e;function t(g){return`__firebase__banner__${g}`}let r="__firebase__banner",s=sB().prod.length>0;function o(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Q0=!0,o()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=oB(r),y=t("text"),T=document.getElementById(y)||document.createElement("span"),R=t("learnmore"),A=document.getElementById(R)||document.createElement("a"),P=t("preprendIcon"),F=document.getElementById(P)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let $=g.element;a($),h(A,R);let J=l();u(F,P),$.append(F,T,A,J),document.body.appendChild($)}s?(T.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function Qe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qe())}function aB(){var n;let e=(n=Ch())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rR(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function iR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sR(){let n=Qe();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function oR(){return!aB()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $c(){try{return typeof indexedDB=="object"}catch{return!1}}function aR(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var cB="FirebaseError",Lt=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=cB,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,un.prototype.create)}},un=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?uB(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Lt(i,a,r)}};function uB(n,e){return n.replace(lB,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var lB=/\{\$([^}]+)}/g;function cR(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Sn(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],o=e[i];if(J0(s)&&J0(o)){if(!Sn(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function J0(n){return n!==null&&typeof n=="object"}function qc(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ao(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function So(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function uR(n,e){let t=new Lv(n,e);return t.subscribe.bind(t)}var Lv=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");dB(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Ov),i.error===void 0&&(i.error=Ov),i.complete===void 0&&(i.complete=Ov);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function dB(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ov(){}var Koe=14400*1e3;function Ue(n){return n&&n._delegate?n._delegate:n}var Et=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ds="[DEFAULT]";var Bv=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new ls;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fB(e))try{this.getOrInitializeService({instanceIdentifier:ds})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ds){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ds){return this.instances.has(e)}getOptions(e=ds){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hB(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ds){return this.component?this.component.multipleInstances?e:ds:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function hB(n){return n===ds?void 0:n}function fB(n){return n.instantiationMode==="EAGER"}var Rh=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Bv(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var pB=[],oe=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(oe||{}),gB={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},mB=oe.INFO,yB={[oe.DEBUG]:"log",[oe.VERBOSE]:"log",[oe.INFO]:"info",[oe.WARN]:"warn",[oe.ERROR]:"error"},vB=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=yB[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Rn=class{constructor(e){this.name=e,this._logLevel=mB,this._logHandler=vB,this._userLogHandler=null,pB.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,oe.DEBUG,...e),this._logHandler(this,oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,oe.VERBOSE,...e),this._logHandler(this,oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,oe.INFO,...e),this._logHandler(this,oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,oe.WARN,...e),this._logHandler(this,oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,oe.ERROR,...e),this._logHandler(this,oe.ERROR,...e)}};var _B=(n,e)=>e.some(t=>n instanceof t),lR,dR;function EB(){return lR||(lR=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IB(){return dR||(dR=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var hR=new WeakMap,$v=new WeakMap,fR=new WeakMap,Hv=new WeakMap,zv=new WeakMap;function wB(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(Nn(n.result)),i()},o=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&hR.set(t,n)}).catch(()=>{}),zv.set(e,n),e}function TB(n){if($v.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),i()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});$v.set(n,e)}var qv={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return $v.get(n);if(e==="objectStoreNames")return n.objectStoreNames||fR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Nn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function pR(n){qv=n(qv)}function bB(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Nh(this),e,...t);return fR.set(r,e.sort?e.sort():[e]),Nn(r)}:IB().includes(n)?function(...e){return n.apply(Nh(this),e),Nn(hR.get(this))}:function(...e){return Nn(n.apply(Nh(this),e))}}function DB(n){return typeof n=="function"?bB(n):(n instanceof IDBTransaction&&TB(n),_B(n,EB())?new Proxy(n,qv):n)}function Nn(n){if(n instanceof IDBRequest)return wB(n);if(Hv.has(n))return Hv.get(n);let e=DB(n);return e!==n&&(Hv.set(n,e),zv.set(e,n)),e}var Nh=n=>zv.get(n);function Ph(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(n,e),a=Nn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Nn(o.result),u.oldVersion,u.newVersion,Nn(o.transaction),u)}),t&&o.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var CB=["get","getKey","getAll","getAllKeys","count"],AB=["put","add","delete","clear"],Gv=new Map;function gR(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Gv.get(e))return Gv.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=AB.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||CB.includes(t)))return;let s=async function(o,...a){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[t](...a),i&&u.done]))[0]};return Gv.set(e,s),s}pR(n=>ie(j({},n),{get:(e,t,r)=>gR(e,t)||n.get(e,t,r),has:(e,t)=>!!gR(e,t)||n.has(e,t)}));var Kv=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(SB(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function SB(n){let e=n.getComponent();return e?.type==="VERSION"}var Yv="@firebase/app",mR="0.13.2";var ur=new Rn("@firebase/app"),RB="@firebase/app-compat",NB="@firebase/analytics-compat",PB="@firebase/analytics",kB="@firebase/app-check-compat",MB="@firebase/app-check",OB="@firebase/auth",xB="@firebase/auth-compat",LB="@firebase/database",FB="@firebase/data-connect",VB="@firebase/database-compat",UB="@firebase/functions",jB="@firebase/functions-compat",BB="@firebase/installations",HB="@firebase/installations-compat",$B="@firebase/messaging",qB="@firebase/messaging-compat",zB="@firebase/performance",GB="@firebase/performance-compat",WB="@firebase/remote-config",KB="@firebase/remote-config-compat",YB="@firebase/storage",QB="@firebase/storage-compat",JB="@firebase/firestore",XB="@firebase/ai",ZB="@firebase/firestore-compat",eH="firebase",tH="11.10.0";var Qv="[DEFAULT]",nH={[Yv]:"fire-core",[RB]:"fire-core-compat",[PB]:"fire-analytics",[NB]:"fire-analytics-compat",[MB]:"fire-app-check",[kB]:"fire-app-check-compat",[OB]:"fire-auth",[xB]:"fire-auth-compat",[LB]:"fire-rtdb",[FB]:"fire-data-connect",[VB]:"fire-rtdb-compat",[UB]:"fire-fn",[jB]:"fire-fn-compat",[BB]:"fire-iid",[HB]:"fire-iid-compat",[$B]:"fire-fcm",[qB]:"fire-fcm-compat",[zB]:"fire-perf",[GB]:"fire-perf-compat",[WB]:"fire-rc",[KB]:"fire-rc-compat",[YB]:"fire-gcs",[QB]:"fire-gcs-compat",[JB]:"fire-fst",[ZB]:"fire-fst-compat",[XB]:"fire-vertex","fire-js":"fire-js",[eH]:"fire-js-all"};var zc=new Map,rH=new Map,Jv=new Map;function yR(n,e){try{n.container.addComponent(e)}catch(t){ur.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ln(n){let e=n.name;if(Jv.has(e))return ur.debug(`There were multiple attempts to register component ${e}.`),!1;Jv.set(e,n);for(let t of zc.values())yR(t,n);for(let t of rH.values())yR(t,n);return!0}function Ro(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Ft(n){return n==null?!1:n.settings!==void 0}var iH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ti=new un("app","Firebase",iH);var Xv=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Et("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ti.create("app-deleted",{appName:this._name})}};var ni=tH;function t_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Qv,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw ti.create("bad-app-name",{appName:String(i)});if(t||(t=Uv()),!t)throw ti.create("no-options");let s=zc.get(i);if(s){if(Sn(t,s.options)&&Sn(r,s.config))return s;throw ti.create("duplicate-app",{appName:i})}let o=new Rh(i);for(let u of Jv.values())o.addComponent(u);let a=new Xv(t,r,o);return zc.set(i,a),a}function hs(n=Qv){let e=zc.get(n);if(!e&&n===Qv&&Uv())return t_();if(!e)throw ti.create("no-app",{appName:n});return e}function kh(){return Array.from(zc.values())}function Me(n,e,t){var r;let i=(r=nH[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ur.warn(a.join(" "));return}ln(new Et(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var sH="firebase-heartbeat-database",oH=1,Gc="firebase-heartbeat-store",Wv=null;function IR(){return Wv||(Wv=Ph(sH,oH,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Gc)}catch(t){console.warn(t)}}}}).catch(n=>{throw ti.create("idb-open",{originalErrorMessage:n.message})})),Wv}async function aH(n){try{let t=(await IR()).transaction(Gc),r=await t.objectStore(Gc).get(wR(n));return await t.done,r}catch(e){if(e instanceof Lt)ur.warn(e.message);else{let t=ti.create("idb-get",{originalErrorMessage:e?.message});ur.warn(t.message)}}}async function vR(n,e){try{let r=(await IR()).transaction(Gc,"readwrite");await r.objectStore(Gc).put(e,wR(n)),await r.done}catch(t){if(t instanceof Lt)ur.warn(t.message);else{let r=ti.create("idb-set",{originalErrorMessage:t?.message});ur.warn(r.message)}}}function wR(n){return`${n.name}!${n.options.appId}`}var cH=1024,uH=30,Zv=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new e_(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=_R();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>uH){let o=dH(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ur.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=_R(),{heartbeatsToSend:r,unsentEntries:i}=lH(this._heartbeatsCache.heartbeats),s=Hc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return ur.warn(t),""}}};function _R(){return new Date().toISOString().substring(0,10)}function lH(n,e=cH){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),ER(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),ER(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var e_=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $c()?aR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await aH(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return vR(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return vR(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function ER(n){return Hc(JSON.stringify({version:2,heartbeats:n})).length}function dH(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function hH(n){ln(new Et("platform-logger",e=>new Kv(e),"PRIVATE")),ln(new Et("heartbeat",e=>new Zv(e),"PRIVATE")),Me(Yv,mR,n),Me(Yv,mR,"esm2017"),Me("fire-js","")}hH("");var fH="firebase",pH="11.10.0";Me(fH,pH,"app");function wae(n,e){let r=!e?.manualCleanup?e?.injector?.get(Tt)??M(Tt):null,i=gH(e?.equal),s;e?.requireSync?s=Pt({kind:0},{equal:i}):s=Pt({kind:1,value:e?.initialValue},{equal:i});let o,a=n.subscribe({next:u=>s.set({kind:1,value:u}),error:u=>{s.set({kind:2,error:u}),o?.()},complete:()=>{o?.()}});if(e?.requireSync&&s().kind===0)throw new B(601,!1);return o=r?.onDestroy(a.unsubscribe.bind(a)),ir(()=>{let u=s();switch(u.kind){case 1:return u.value;case 2:throw u.error;case 0:throw new B(601,!1)}},{equal:e?.equal})}function gH(n=Object.is){return(e,t)=>e.kind===1&&t.kind===1&&n(e.value,t.value)}function TR(n){n===void 0&&(n=M(Le));let e=n.get(Gr);return t=>new Z(r=>{let i=e.add(),s=!1;function o(){s||(i(),s=!0)}let a=t.subscribe({next:u=>{r.next(u),o()},complete:()=>{r.complete(),o()},error:u=>{r.error(u),o()}});return a.add(()=>{r.unsubscribe(),o()}),a})}var ri=new Gn("ANGULARFIRE2_VERSION");function Wc(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Po=(n,e)=>{let t=e?[e]:kh(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},No=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(No||{}),bR=Xy()&&typeof Zone<"u"?No.WARN:No.SILENT;var Mh=class{zone;delegate;constructor(e,t=cg){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i?i.runGuarded(()=>{e.apply(this,[o])}):e.apply(this,[o])};return this.delegate.schedule(s,t,r)}},ii=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=M(De);this.outsideAngular=t.runOutsideAngular(()=>new Mh(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Mh(typeof Zone>"u"?void 0:Zone.current,Pr))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=V({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),DR=!1;function mH(n,e){!DR&&(bR>No.SILENT||Xy())&&(DR=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),bR>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function yH(n){let e=M(De,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function fs(n){let e=M(De,{optional:!0});return e?e.run(()=>n()):n()}var vH=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),En(t,()=>fs(()=>n.apply(void 0,r)))),Je=(n,e,t)=>(t||=e?No.WARN:No.VERBOSE,function(){let r,i=arguments,s,o,a;try{s=M(ii),o=M(Gr),a=M(ut)}catch{return mH(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=fs(()=>o.add())),i[l]=vH(i[l],r,a));let u=yH(()=>n.apply(this,i));return e?u instanceof Z?u.pipe(Mr(s.outsideAngular),kr(s.insideAngular),TR(a)):u instanceof Promise?fs(()=>{let l=o.add();return new Promise((h,p)=>{u.then(g=>En(a,()=>fs(()=>h(g))),g=>En(a,()=>fs(()=>p(g)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:fs(()=>u):u instanceof Z?u.pipe(Mr(s.outsideAngular),kr(s.insideAngular)):fs(()=>u)});var lr=class{constructor(e){return e}},ps=class{constructor(){return kh()}};function _H(n){return n&&n.length===1?n[0]:new lr(hs())}var n_=new U("angularfire2._apps"),EH={provide:lr,useFactory:_H,deps:[[new bt,n_]]},IH={provide:ps,deps:[[new bt,n_]]};function wH(n){return(e,t)=>{let r=t.get(ns);Me("angularfire",ri.full,"core"),Me("angularfire",ri.full,"app"),Me("angular",Sg.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new lr(i)}}function Bae(n,...e){return wt([EH,IH,{provide:n_,useFactory:wH(n),multi:!0,deps:[De,Le,ii,...e]}])}var Hae=Je(t_,!0);var TH=new Map,bH={activated:!1,tokenObservers:[]},DH={initialized:!1,enabled:!1};function dn(n){return TH.get(n)||Object.assign({},bH)}function RR(){return DH}var CH="https://content-firebaseappcheck.googleapis.com/v1";var AH="exchangeDebugToken",CR={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},Jae=1440*60*1e3;var s_=class{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new ls,this.pending.promise.catch(t=>{}),await SH(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new ls,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function SH(n){return new Promise(e=>{setTimeout(e,n)})}var RH={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},si=new un("appCheck","AppCheck",RH);function NR(n){if(!dn(n).activated)throw si.create("use-before-activation",{appName:n.name})}async function PR({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}let s={method:"POST",body:JSON.stringify(e),headers:r},o;try{o=await fetch(n,s)}catch(p){throw si.create("fetch-network-error",{originalErrorMessage:p?.message})}if(o.status!==200)throw si.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(p){throw si.create("fetch-parse-error",{originalErrorMessage:p?.message})}let u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw si.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let l=Number(u[1])*1e3,h=Date.now();return{token:a.token,expireTimeMillis:h+l,issuedAtTimeMillis:h}}function kR(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${CH}/projects/${t}/apps/${r}:${AH}?key=${i}`,body:{debug_token:e}}}var NH="firebase-app-check-database",PH=1,o_="firebase-app-check-store";var Oh=null;function kH(){return Oh||(Oh=new Promise((n,e)=>{try{let t=indexedDB.open(NH,PH);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(si.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(o_,{keyPath:"compositeKey"})}}}catch(t){e(si.create("storage-open",{originalErrorMessage:t?.message}))}}),Oh)}function MH(n,e){return OH(xH(n),e)}async function OH(n,e){let r=(await kH()).transaction(o_,"readwrite"),s=r.objectStore(o_).put({compositeKey:n,value:e});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(si.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}function xH(n){return`${n.options.appId}-${n.name}`}var Kc=new Rn("@firebase/app-check");function r_(n,e){return $c()?MH(n,e).catch(t=>{Kc.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function MR(){return RR().enabled}async function OR(){let n=RR();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var LH={error:"UNKNOWN_ERROR"};function FH(n){return bh.encodeString(JSON.stringify(n),!1)}async function a_(n,e=!1,t=!1){let r=n.app;NR(r);let i=dn(r),s=i.token,o;if(s&&!Yc(s)&&(i.token=void 0,s=void 0),!s){let l=await i.cachedTokenPromise;l&&(Yc(l)?s=l:await r_(r,void 0))}if(!e&&s&&Yc(s))return{token:s.token};let a=!1;if(MR())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=PR(kR(r,await OR()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=await i.exchangeTokenPromise;return await r_(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Kc.warn(l.message):t&&Kc.error(l),i_(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),s=await dn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Kc.warn(l.message):t&&Kc.error(l),o=l}let u;return s?o?Yc(s)?u={token:s.token,internalError:o}:u=i_(o):(u={token:s.token},i.token=s,await r_(r,s)):u=i_(o),a&&BH(r,u),u}async function VH(n){let e=n.app;NR(e);let{provider:t}=dn(e);if(MR()){let r=await OR(),{token:i}=await PR(kR(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function UH(n,e,t,r){let{app:i}=n,s=dn(i),o={next:t,error:r,type:e};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Yc(s.token)){let a=s.token;Promise.resolve().then(()=>{t({token:a.token}),AR(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>AR(n))}function xR(n,e){let t=dn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function AR(n){let{app:e}=n,t=dn(e),r=t.tokenRefresher;r||(r=jH(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function jH(n){let{app:e}=n;return new s_(async()=>{let t=dn(e),r;if(t.token?r=await a_(n,!0):r=await a_(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=dn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},CR.RETRIAL_MIN_WAIT,CR.RETRIAL_MAX_WAIT)}function BH(n,e){let t=dn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Yc(n){return n.expireTimeMillis-Date.now()>0}function i_(n){return{token:FH(LH),error:n}}var c_=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=dn(this.app);for(let t of e)xR(this.app,t.next);return Promise.resolve()}};function HH(n,e){return new c_(n,e)}function $H(n){return{getToken:e=>a_(n,e),getLimitedUseToken:()=>VH(n),addTokenListener:e=>UH(n,"INTERNAL",e),removeTokenListener:e=>xR(n.app,e)}}var qH="@firebase/app-check",zH="0.10.1";var GH="app-check",SR="app-check-internal";function WH(){ln(new Et(GH,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return HH(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(SR).initialize()})),ln(new Et(SR,n=>{let e=n.getProvider("app-check").getImmediate();return $H(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),Me(qH,zH)}WH();var KH="app-check";var ko=class{constructor(){return Po(KH)}};var YH=["localhost","0.0.0.0","127.0.0.1"],uce=typeof window<"u"&&YH.includes(window.location.hostname);var LR=()=>{};var FR=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},QH=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],o=n[t++],a=n[t++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=n[t++],o=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},VR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],o=i+1<n.length,a=o?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;u||(y=64,o||(g=64)),r.push(t[h],t[p],t[g],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(FR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):QH(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new l_;let g=s<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let T=l<<6&192|p;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},l_=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},JH=function(n){let e=FR(n);return VR.encodeByteArray(e,!0)},h_=function(n){return JH(n).replace(/\./g,"")},xh=function(n){try{return VR.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function XH(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var ZH=()=>XH().__FIREBASE_DEFAULTS__,e$=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},t$=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&xh(n[1]);return e&&JSON.parse(e)},n$=()=>{try{return LR()||ZH()||e$()||t$()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}};var UR=n=>n$()?.[`_${n}`];function f_(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function BR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function HR(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function $R(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qR(){try{return typeof indexedDB=="object"}catch{return!1}}function zR(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(t){e(t)}})}var r$="FirebaseError",Pn=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=r$,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dr.prototype.create)}},dr=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?i$(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Pn(i,a,r)}};function i$(n,e){return n.replace(s$,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var s$=/\{\$([^}]+)}/g;function p_(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function GR(n,e){let t=new d_(n,e);return t.subscribe.bind(t)}var d_=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");o$(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=u_),i.error===void 0&&(i.error=u_),i.complete===void 0&&(i.complete=u_);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function o$(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function u_(){}var pce=14400*1e3;function Mo(n){return n&&n._delegate?n._delegate:n}var hr=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var a$=[],Ie=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(Ie||{}),c$={debug:Ie.DEBUG,verbose:Ie.VERBOSE,info:Ie.INFO,warn:Ie.WARN,error:Ie.ERROR,silent:Ie.SILENT},u$=Ie.INFO,l$={[Ie.DEBUG]:"log",[Ie.VERBOSE]:"log",[Ie.INFO]:"info",[Ie.WARN]:"warn",[Ie.ERROR]:"error"},d$=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=l$[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Oo=class{constructor(e){this.name=e,this._logLevel=u$,this._logHandler=d$,this._userLogHandler=null,a$.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?c$[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ie.DEBUG,...e),this._logHandler(this,Ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ie.VERBOSE,...e),this._logHandler(this,Ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ie.INFO,...e),this._logHandler(this,Ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ie.WARN,...e),this._logHandler(this,Ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ie.ERROR,...e),this._logHandler(this,Ie.ERROR,...e)}};var m_=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(f$(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function f$(n){return n.getComponent()?.type==="VERSION"}var y_="@firebase/app",WR="0.14.6";var fr=new Oo("@firebase/app"),p$="@firebase/app-compat",g$="@firebase/analytics-compat",m$="@firebase/analytics",y$="@firebase/app-check-compat",v$="@firebase/app-check",_$="@firebase/auth",E$="@firebase/auth-compat",I$="@firebase/database",w$="@firebase/data-connect",T$="@firebase/database-compat",b$="@firebase/functions",D$="@firebase/functions-compat",C$="@firebase/installations",A$="@firebase/installations-compat",S$="@firebase/messaging",R$="@firebase/messaging-compat",N$="@firebase/performance",P$="@firebase/performance-compat",k$="@firebase/remote-config",M$="@firebase/remote-config-compat",O$="@firebase/storage",x$="@firebase/storage-compat",L$="@firebase/firestore",F$="@firebase/ai",V$="@firebase/firestore-compat",U$="firebase",j$="12.6.0";var B$={[y_]:"fire-core",[p$]:"fire-core-compat",[m$]:"fire-analytics",[g$]:"fire-analytics-compat",[v$]:"fire-app-check",[y$]:"fire-app-check-compat",[_$]:"fire-auth",[E$]:"fire-auth-compat",[I$]:"fire-rtdb",[w$]:"fire-data-connect",[T$]:"fire-rtdb-compat",[b$]:"fire-fn",[D$]:"fire-fn-compat",[C$]:"fire-iid",[A$]:"fire-iid-compat",[S$]:"fire-fcm",[R$]:"fire-fcm-compat",[N$]:"fire-perf",[P$]:"fire-perf-compat",[k$]:"fire-rc",[M$]:"fire-rc-compat",[O$]:"fire-gcs",[x$]:"fire-gcs-compat",[L$]:"fire-fst",[V$]:"fire-fst-compat",[F$]:"fire-vertex","fire-js":"fire-js",[U$]:"fire-js-all"};var H$=new Map,$$=new Map,KR=new Map;function YR(n,e){try{n.container.addComponent(e)}catch(t){fr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Lo(n){let e=n.name;if(KR.has(e))return fr.debug(`There were multiple attempts to register component ${e}.`),!1;KR.set(e,n);for(let t of H$.values())YR(t,n);for(let t of $$.values())YR(t,n);return!0}function gs(n){return n==null?!1:n.settings!==void 0}var q$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},E_=new dr("app","Firebase",q$);var Lh=j$;function xo(n,e,t){let r=B$[n]??n;t&&(r+=`-${t}`);let i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){let o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),fr.warn(o.join(" "));return}Lo(new hr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var z$="firebase-heartbeat-database",G$=1,Qc="firebase-heartbeat-store",g_=null;function ZR(){return g_||(g_=Ph(z$,G$,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Qc)}catch(t){console.warn(t)}}}}).catch(n=>{throw E_.create("idb-open",{originalErrorMessage:n.message})})),g_}async function W$(n){try{let t=(await ZR()).transaction(Qc),r=await t.objectStore(Qc).get(eN(n));return await t.done,r}catch(e){if(e instanceof Pn)fr.warn(e.message);else{let t=E_.create("idb-get",{originalErrorMessage:e?.message});fr.warn(t.message)}}}async function QR(n,e){try{let r=(await ZR()).transaction(Qc,"readwrite");await r.objectStore(Qc).put(e,eN(n)),await r.done}catch(t){if(t instanceof Pn)fr.warn(t.message);else{let r=E_.create("idb-set",{originalErrorMessage:t?.message});fr.warn(r.message)}}}function eN(n){return`${n.name}!${n.options.appId}`}var K$=1024,Y$=30,v_=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new __(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=JR();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>Y$){let i=J$(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){fr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=JR(),{heartbeatsToSend:t,unsentEntries:r}=Q$(this._heartbeatsCache.heartbeats),i=h_(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return fr.warn(e),""}}};function JR(){return new Date().toISOString().substring(0,10)}function Q$(n,e=K$){let t=[],r=n.slice();for(let i of n){let s=t.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),XR(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),XR(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var __=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qR()?zR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await W$(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return QR(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return QR(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function XR(n){return h_(JSON.stringify({version:2,heartbeats:n})).length}function J$(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function X$(n){Lo(new hr("platform-logger",e=>new m_(e),"PRIVATE")),Lo(new hr("heartbeat",e=>new v_(e),"PRIVATE")),xo(y_,WR,n),xo(y_,WR,"esm2020"),xo("fire-js","")}X$("");function cN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var uN=cN,lN=new dr("auth","Firebase",cN());var jh=new Oo("@firebase/auth");function Z$(n,...e){jh.logLevel<=Ie.WARN&&jh.warn(`Auth (${Lh}): ${n}`,...e)}function Vh(n,...e){jh.logLevel<=Ie.ERROR&&jh.error(`Auth (${Lh}): ${n}`,...e)}function tN(n,...e){throw k_(n,...e)}function P_(n,...e){return k_(n,...e)}function dN(n,e,t){let r=ie(j({},uN()),{[e]:t});return new dr("auth","Firebase",r).create(e,{appName:n.name})}function Uh(n){return dN(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function k_(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return lN.create(n,...e)}function pe(n,e,...t){if(!n)throw k_(e,...t)}function Jc(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Vh(e),new Error(e)}function Bh(n,e){n||Jc(e)}function e4(){return nN()==="http:"||nN()==="https:"}function nN(){return typeof self<"u"&&self.location?.protocol||null}function t4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(e4()||HR()||"connection"in navigator)?navigator.onLine:!0}function n4(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var vs=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Bh(t>e,"Short delay should be less than long delay!"),this.isMobile=jR()||$R()}get(){return t4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function r4(n,e){Bh(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Hh=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Jc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Jc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Jc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var i4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var s4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],o4=new vs(3e4,6e4);function hN(n,e){return n.tenantId&&!e.tenantId?ie(j({},e),{tenantId:n.tenantId}):e}async function Wh(n,e,t,r,i={}){return fN(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=p_(j({key:n.config.apiKey},o)).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);let l=j({method:e,headers:u},s);return BR()||(l.referrerPolicy="no-referrer"),n.emulatorConfig&&f_(n.emulatorConfig.host)&&(l.credentials="include"),Hh.fetch()(await pN(n,n.config.apiHost,t,a),l)})}async function fN(n,e,t){n._canInitEmulator=!1;let r=j(j({},i4),e);try{let i=new T_(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw Fh(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Fh(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Fh(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw Fh(n,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw dN(n,h,l);tN(n,h)}}catch(i){if(i instanceof Pn)throw i;tN(n,"network-request-failed",{message:String(i)})}}async function pN(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?r4(n.config,i):`${n.config.apiScheme}://${i}`;return s4.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}var T_=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(P_(this.auth,"network-request-failed")),o4.get())})}};function Fh(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=P_(n,e,r);return i.customData._tokenResponse=t,i}async function a4(n,e){return Wh(n,"POST","/v1/accounts:delete",e)}async function $h(n,e){return Wh(n,"POST","/v1/accounts:lookup",e)}function Xc(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function gN(n,e=!1){let t=Mo(n),r=await t.getIdToken(e),i=mN(r);pe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Xc(I_(i.auth_time)),issuedAtTime:Xc(I_(i.iat)),expirationTime:Xc(I_(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function I_(n){return Number(n)*1e3}function mN(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Vh("JWT malformed, contained fewer than 3 sections"),null;try{let i=xh(t);return i?JSON.parse(i):(Vh("Failed to decode base64 JWT payload"),null)}catch(i){return Vh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function rN(n){let e=mN(n);return pe(e,"internal-error"),pe(typeof e.exp<"u","internal-error"),pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function b_(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Pn&&c4(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function c4({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var D_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){let t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;let r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var eu=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xc(this.lastLoginAt),this.creationTime=Xc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function qh(n){let e=n.auth,t=await n.getIdToken(),r=await b_(n,$h(e,{idToken:t}));pe(r?.users.length,e,"internal-error");let i=r.users[0];n._notifyReloadListener(i);let s=i.providerUserInfo?.length?vN(i.providerUserInfo):[],o=u4(n.providerData,s),a=n.isAnonymous,u=!(n.email&&i.passwordHash)&&!o?.length,l=a?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new eu(i.createdAt,i.lastLoginAt),isAnonymous:l};Object.assign(n,h)}async function yN(n){let e=Mo(n);await qh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function u4(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function vN(n){return n.map(r=>{var i=r,{providerId:e}=i,t=Zu(i,["providerId"]);return{providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}async function l4(n,e){let t=await fN(n,{},async()=>{let r=p_({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await pN(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return n.emulatorConfig&&f_(n.emulatorConfig.host)&&(u.credentials="include"),Hh.fetch()(o,u)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function d4(n,e){return Wh(n,"POST","/v2/accounts:revokeToken",hN(n,e))}var Zc=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pe(e.idToken,"internal-error"),pe(typeof e.idToken<"u","internal-error"),pe(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){pe(e.length!==0,"internal-error");let t=rN(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await l4(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(pe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(pe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(pe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Jc("not implemented")}};function oi(n,e){pe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ms=class n{constructor(s){var o=s,{uid:e,auth:t,stsTokenManager:r}=o,i=Zu(o,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new D_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new eu(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){let t=await b_(this,this.stsTokenManager.getToken(this.auth,e));return pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return gN(this,e)}reload(){return yN(this)}_assign(e){this!==e&&(pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>j({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(ie(j({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await qh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gs(this.auth.app))return Promise.reject(Uh(this.auth));let e=await this.getIdToken();return await b_(this,a4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return ie(j({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>j({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){let r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,u=t._redirectEventId??void 0,l=t.createdAt??void 0,h=t.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:y,providerData:T,stsTokenManager:R}=t;pe(p&&R,e,"internal-error");let A=Zc.fromJSON(this.name,R);pe(typeof p=="string",e,"internal-error"),oi(r,e.name),oi(i,e.name),pe(typeof g=="boolean",e,"internal-error"),pe(typeof y=="boolean",e,"internal-error"),oi(s,e.name),oi(o,e.name),oi(a,e.name),oi(u,e.name),oi(l,e.name),oi(h,e.name);let P=new n({uid:p,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:y,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:A,createdAt:l,lastLoginAt:h});return T&&Array.isArray(T)&&(P.providerData=T.map(F=>j({},F))),u&&(P._redirectEventId=u),P}static async _fromIdTokenResponse(e,t,r=!1){let i=new Zc;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await qh(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];pe(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?vN(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Zc;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new eu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u}};var iN=new Map;function ys(n){Bh(n instanceof Function,"Expected a class definition");let e=iN.get(n);return e?(Bh(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,iN.set(n,e),e)}var h4=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),C_=h4;function w_(n,e,t){return`firebase:${n}:${e}:${t}`}var zh=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=w_(this.userKey,i.apiKey,s),this.fullPersistenceKey=w_("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await $h(this.auth,{idToken:e}).catch(()=>{});return t?ms._fromGetAccountInfoResponse(this.auth,t,e):null}return ms._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(ys(C_),e,r);let i=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),s=i[0]||ys(C_),o=w_(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=await l._get(o);if(h){let p;if(typeof h=="string"){let g=await $h(e,{idToken:h}).catch(()=>{});if(!g)break;p=await ms._fromGetAccountInfoResponse(e,g,h)}else p=ms._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new n(s,e,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new n(s,e,r))}};function sN(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(m4(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(f4(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(v4(e))return"Blackberry";if(_4(e))return"Webos";if(p4(e))return"Safari";if((e.includes("chrome/")||g4(e))&&!e.includes("edge/"))return"Chrome";if(y4(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function f4(n=hn()){return/firefox\//i.test(n)}function p4(n=hn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function g4(n=hn()){return/crios\//i.test(n)}function m4(n=hn()){return/iemobile/i.test(n)}function y4(n=hn()){return/android/i.test(n)}function v4(n=hn()){return/blackberry/i.test(n)}function _4(n=hn()){return/webos/i.test(n)}function _N(n,e=[]){let t;switch(n){case"Browser":t=sN(hn());break;case"Worker":t=`${sN(hn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Lh}/${r}`}var A_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function E4(n,e={}){return Wh(n,"GET","/v2/passwordPolicy",hN(n,e))}var I4=6,S_=class{constructor(e){let t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??I4,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){let t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var R_=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gh(this),this.idTokenSubscription=new Gh(this),this.beforeStateQueue=new A_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ys(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await zh.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await $h(this,{idToken:e}),r=await ms._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(gs(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(o,o))}):this.directlySetCurrentUser(null)}let t=await this.assertedPersistence.getCurrentUser(),r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=this.redirectUser?._redirectEventId,o=r?._redirectEventId,a=await this.tryRedirectSignIn(e);(!s||s===o)&&a?.user&&(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(s){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await qh(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=n4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gs(this.app))return Promise.reject(Uh(this));let t=e?Mo(e):null;return t&&pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gs(this.app)?Promise.reject(Uh(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gs(this.app)?Promise.reject(Uh(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ys(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await E4(this),t=new S_(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new dr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await d4(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&ys(e)||this._popupRedirectResolver;pe(t,this,"argument-error"),this.redirectPersistenceManager=await zh.create(this,[ys(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(pe(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(t);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_N(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);let r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(gs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&Z$(`Error while retrieving App Check token: ${e.error}`),e?.token}};function w4(n){return Mo(n)}var Gh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=GR(t=>this.observer=t)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var T4={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function b4(n){T4=n}function D4(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function C4(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ys);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function M_(n,e,t,r){return Mo(n).onAuthStateChanged(e,t,r)}var Wce=D4("rcb"),Kce=new vs(3e4,6e4);var Yce=new vs(2e3,1e4);var Qce=600*1e3;var Jce=new vs(3e4,6e4);var Xce=new vs(5e3,15e3);var Zce=encodeURIComponent("fac");var oN="@firebase/auth",aN="1.12.0";var N_=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function A4(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function S4(n){Lo(new hr("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;pe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_N(n)},l=new R_(r,i,s,u);return C4(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Lo(new hr("auth-internal",e=>{let t=w4(e.getProvider("auth").getImmediate());return(r=>new N_(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),xo(oN,aN,A4(n)),xo(oN,aN,"esm2020")}var R4=300,eue=UR("authIdTokenMaxAge")||R4;function N4(){return document.getElementsByTagName("head")?.[0]??document}b4({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=P_("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",N4().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});S4("Browser");function EN(n){return new Z(function(e){var t=M_(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function FN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var VN=FN,UN=new un("auth","Firebase",FN());var Zh=new Rn("@firebase/auth");function M4(n,...e){Zh.logLevel<=oe.WARN&&Zh.warn(`Auth (${ni}): ${n}`,...e)}function Yh(n,...e){Zh.logLevel<=oe.ERROR&&Zh.error(`Auth (${ni}): ${n}`,...e)}function Mn(n,...e){throw rE(n,...e)}function _s(n,...e){return rE(n,...e)}function jN(n,e,t){let r=Object.assign(Object.assign({},VN()),{[e]:t});return new un("auth","Firebase",r).create(e,{appName:n.name})}function ui(n){return jN(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rE(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return UN.create(n,...e)}function Q(n,e,...t){if(!n)throw rE(e,...t)}function pr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Yh(e),new Error(e)}function li(n,e){n||pr(e)}function F_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function O4(){return IN()==="http:"||IN()==="https:"}function IN(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function x4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(O4()||rR()||"connection"in navigator)?navigator.onLine:!0}function L4(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Es=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,li(t>e,"Short delay should be less than long delay!"),this.isMobile=tR()||iR()}get(){return x4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function iE(n,e){li(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var ef=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var F4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var V4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],U4=new Es(3e4,6e4);function ws(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function di(n,e,t,r,i={}){return BN(n,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});let a=qc(Object.assign({key:n.config.apiKey},o)).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);let l=Object.assign({method:e,headers:u},s);return nR()||(l.referrerPolicy="no-referrer"),n.emulatorConfig&&ei(n.emulatorConfig.host)&&(l.credentials="include"),ef.fetch()(await HN(n,n.config.apiHost,t,a),l)})}async function BN(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},F4),e);try{let i=new V_(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=await s.json();if("needConfirmation"in o)throw Kh(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kh(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Kh(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw Kh(n,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw jN(n,h,l);Mn(n,h)}}catch(i){if(i instanceof Lt)throw i;Mn(n,"network-request-failed",{message:String(i)})}}async function hf(n,e,t,r,i={}){let s=await di(n,e,t,r,i);return"mfaPendingCredential"in s&&Mn(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function HN(n,e,t,r){let i=`${e}${t}?${r}`,s=n,o=s.config.emulator?iE(n.config,i):`${n.config.apiScheme}://${i}`;return V4.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function j4(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var V_=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(_s(this.auth,"network-request-failed")),U4.get())})}};function Kh(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=_s(n,e,r);return i.customData._tokenResponse=t,i}function wN(n){return n!==void 0&&n.enterprise!==void 0}var U_=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return j4(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};async function B4(n,e){return di(n,"GET","/v2/recaptchaConfig",ws(n,e))}async function H4(n,e){return di(n,"POST","/v1/accounts:delete",e)}async function tf(n,e){return di(n,"POST","/v1/accounts:lookup",e)}function nu(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function sE(n,e=!1){let t=Ue(n),r=await t.getIdToken(e),i=oE(r);Q(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:nu(O_(i.auth_time)),issuedAtTime:nu(O_(i.iat)),expirationTime:nu(O_(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function O_(n){return Number(n)*1e3}function oE(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Yh("JWT malformed, contained fewer than 3 sections"),null;try{let i=Dh(t);return i?JSON.parse(i):(Yh("Failed to decode base64 JWT payload"),null)}catch(i){return Yh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function TN(n){let e=oE(n);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function iu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Lt&&$4(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function $4({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var j_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var su=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=nu(this.lastLoginAt),this.creationTime=nu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function nf(n){var e;let t=n.auth,r=await n.getIdToken(),i=await iu(n,tf(t,{idToken:r}));Q(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?$N(s.providerUserInfo):[],a=q4(n.providerData,o),u=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new su(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,p)}async function aE(n){let e=Ue(n);await nf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function q4(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function $N(n){return n.map(e=>{var{providerId:t}=e,r=lg(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function z4(n,e){let t=await BN(n,{},async()=>{let r=qc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=await HN(n,i,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return n.emulatorConfig&&ei(n.emulatorConfig.host)&&(u.credentials="include"),ef.fetch()(o,u)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function G4(n,e){return di(n,"POST","/v2/accounts:revokeToken",ws(n,e))}var ru=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):TN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Q(e.length!==0,"internal-error");let t=TN(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:s}=await z4(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(Q(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Q(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Q(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return pr("not implemented")}};function ai(n,e){Q(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ci=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=lg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new j_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new su(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){let t=await iu(this,this.stsTokenManager.getToken(this.auth,e));return Q(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return sE(this,e)}reload(){return aE(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await nf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ft(this.auth.app))return Promise.reject(ui(this.auth));let e=await this.getIdToken();return await iu(this,H4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,y=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,T=(o=t.photoURL)!==null&&o!==void 0?o:void 0,R=(a=t.tenantId)!==null&&a!==void 0?a:void 0,A=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,P=(l=t.createdAt)!==null&&l!==void 0?l:void 0,F=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:$,emailVerified:J,isAnonymous:xe,providerData:ce,stsTokenManager:w}=t;Q($&&w,e,"internal-error");let v=ru.fromJSON(this.name,w);Q(typeof $=="string",e,"internal-error"),ai(p,e.name),ai(g,e.name),Q(typeof J=="boolean",e,"internal-error"),Q(typeof xe=="boolean",e,"internal-error"),ai(y,e.name),ai(T,e.name),ai(R,e.name),ai(A,e.name),ai(P,e.name),ai(F,e.name);let E=new n({uid:$,auth:e,email:g,emailVerified:J,displayName:p,isAnonymous:xe,photoURL:T,phoneNumber:y,tenantId:R,stsTokenManager:v,createdAt:P,lastLoginAt:F});return ce&&Array.isArray(ce)&&(E.providerData=ce.map(I=>Object.assign({},I))),A&&(E._redirectEventId=A),E}static async _fromIdTokenResponse(e,t,r=!1){let i=new ru;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await nf(s),s}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];Q(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?$N(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new ru;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new su(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u}};var bN=new Map;function gr(n){li(n instanceof Function,"Expected a class definition");let e=bN.get(n);return e?(li(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,bN.set(n,e),e)}var W4=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),B_=W4;function Qh(n,e,t){return`firebase:${n}:${e}:${t}`}var rf=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Qh(this.userKey,i.apiKey,s),this.fullPersistenceKey=Qh("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await tf(this.auth,{idToken:e}).catch(()=>{});return t?ci._fromGetAccountInfoResponse(this.auth,t,e):null}return ci._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(gr(B_),e,r);let i=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),s=i[0]||gr(B_),o=Qh(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=await l._get(o);if(h){let p;if(typeof h=="string"){let g=await tf(e,{idToken:h}).catch(()=>{});if(!g)break;p=await ci._fromGetAccountInfoResponse(e,g,h)}else p=ci._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new n(s,e,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new n(s,e,r))}};function DN(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(WN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(qN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(YN(e))return"Blackberry";if(QN(e))return"Webos";if(zN(e))return"Safari";if((e.includes("chrome/")||GN(e))&&!e.includes("edge/"))return"Chrome";if(KN(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function qN(n=Qe()){return/firefox\//i.test(n)}function zN(n=Qe()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function GN(n=Qe()){return/crios\//i.test(n)}function WN(n=Qe()){return/iemobile/i.test(n)}function KN(n=Qe()){return/android/i.test(n)}function YN(n=Qe()){return/blackberry/i.test(n)}function QN(n=Qe()){return/webos/i.test(n)}function cE(n=Qe()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function K4(n=Qe()){var e;return cE(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Y4(){return sR()&&document.documentMode===10}function JN(n=Qe()){return cE(n)||KN(n)||QN(n)||YN(n)||/windows phone/i.test(n)||WN(n)}function XN(n,e=[]){let t;switch(n){case"Browser":t=DN(Qe());break;case"Worker":t=`${DN(Qe())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ni}/${r}`}var H_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function Q4(n,e={}){return di(n,"GET","/v2/passwordPolicy",ws(n,e))}var J4=6,$_=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:J4,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var q_=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sf(this),this.idTokenSubscription=new sf(this),this.beforeStateQueue=new H_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=UN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=gr(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await rf.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await tf(this,{idToken:e}),r=await ci._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Ft(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await nf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=L4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ft(this.app))return Promise.reject(ui(this));let t=e?Ue(e):null;return t&&Q(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ft(this.app)?Promise.reject(ui(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ft(this.app)?Promise.reject(ui(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await Q4(this),t=new $_(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new un("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await G4(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&gr(e)||this._popupRedirectResolver;Q(t,this,"argument-error"),this.redirectPersistenceManager=await rf.create(this,[gr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(t);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=XN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Ft(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&M4(`Error while retrieving App Check token: ${t.error}`),t?.token}};function Fo(n){return Ue(n)}var sf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=uR(t=>this.observer=t)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var ff={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function X4(n){ff=n}function ZN(n){return ff.loadJS(n)}function Z4(){return ff.recaptchaEnterpriseScript}function e3(){return ff.gapiScript}function eP(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var z_=class{constructor(){this.enterprise=new G_}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},G_=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var t3="recaptcha-enterprise",tP="NO_RECAPTCHA",W_=class{constructor(e){this.type=t3,this.auth=Fo(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{B4(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new U_(u);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(u=>{a(u)})})}function i(s,o,a){let u=window.grecaptcha;wN(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(tP)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new z_().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!t&&wN(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=Z4();u.length!==0&&(u+=a),ZN(u).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})}};async function tu(n,e,t,r=!1,i=!1){let s=new W_(n),o;if(i)o=tP;else try{o=await s.verify(t)}catch{o=await s.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function CN(n,e,t,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=await tu(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=await tu(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){let a=await tu(n,e,t);return r(n,a).catch(async u=>{var l;if(((l=n._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let h=await tu(n,e,t,!1,!0);return r(n,h)}return Promise.reject(u)})}else{let a=await tu(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")}function uE(n,e){let t=Ro(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(Sn(s,e??{}))return i;Mn(i,"already-initialized")}return t.initialize({options:e})}function n3(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(gr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function lE(n,e,t){let r=Fo(n);Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=nP(e),{host:o,port:a}=r3(e),u=a===null?"":`:${a}`,l={url:`${s}//${o}${u}/`},h=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Q(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Q(Sn(l,r.config.emulator)&&Sn(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,ei(o)?(Ah(`${s}//${o}${u}`),Sh("Auth",!0)):i||i3()}function nP(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function r3(n){let e=nP(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:AN(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:AN(o)}}}function AN(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function i3(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var ou=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return pr("not implemented")}_getIdTokenResponse(e){return pr("not implemented")}_linkToIdToken(e,t){return pr("not implemented")}_getReauthenticationResolver(e){return pr("not implemented")}};async function s3(n,e){return di(n,"POST","/v1/accounts:signUp",e)}async function o3(n,e){return hf(n,"POST","/v1/accounts:signInWithPassword",ws(n,e))}async function a3(n,e){return hf(n,"POST","/v1/accounts:signInWithEmailLink",ws(n,e))}async function c3(n,e){return hf(n,"POST","/v1/accounts:signInWithEmailLink",ws(n,e))}var au=class n extends ou{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return CN(e,t,"signInWithPassword",o3,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return a3(e,{email:this._email,oobCode:this._password});default:Mn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return CN(e,r,"signUpPassword",s3,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return c3(e,{idToken:t,email:this._email,oobCode:this._password});default:Mn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function x_(n,e){return hf(n,"POST","/v1/accounts:signInWithIdp",ws(n,e))}function u3(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function l3(n){let e=Ao(So(n)).link,t=e?Ao(So(e)).deep_link_id:null,r=Ao(So(n)).deep_link_id;return(r?Ao(So(r)).link:null)||r||t||e||n}var of=class n{constructor(e){var t,r,i,s,o,a;let u=Ao(So(e)),l=(t=u.apiKey)!==null&&t!==void 0?t:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=u3((i=u.mode)!==null&&i!==void 0?i:null);Q(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.lang)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=l3(e);try{return new n(t)}catch{return null}}};var rP=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return au._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=of.parseLink(r);return Q(i,"argument-error"),au._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),af=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var K_=class extends af{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var cu=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let s=await ci._fromIdTokenResponse(e,r,i),o=SN(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=SN(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function SN(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Y_=class n extends Lt{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function iP(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Y_._fromErrorAndOperation(n,s,e,r):s})}async function d3(n,e,t=!1){let r=await iu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return cu._forOperation(n,"link",r)}async function h3(n,e,t=!1){let{auth:r}=n;if(Ft(r.app))return Promise.reject(ui(r));let i="reauthenticate";try{let s=await iu(n,iP(r,i,e,n),t);Q(s.idToken,r,"internal-error");let o=oE(s.idToken);Q(o,r,"internal-error");let{sub:a}=o;return Q(n.uid===a,r,"user-mismatch"),cu._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Mn(r,"user-mismatch"),s}}async function sP(n,e,t=!1){if(Ft(n.app))return Promise.reject(ui(n));let r="signIn",i=await iP(n,r,e),s=await cu._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function dE(n,e){return sP(Fo(n),e)}async function f3(n){let e=Fo(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function hE(n,e,t){return Ft(n.app)?Promise.reject(ui(n)):dE(Ue(n),rP.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&f3(n),r})}function fE(n,e,t,r){return Ue(n).onIdTokenChanged(e,t,r)}function pE(n,e,t){return Ue(n).beforeAuthStateChanged(e,t)}var cf="__sak";var uf=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(cf,"1"),this.storage.removeItem(cf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var p3=1e3,g3=10,m3=(()=>{class n extends uf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=JN(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);Y4()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,g3):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},p3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),oP=m3;var y3=(()=>{class n extends uf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),gE=y3;function v3(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var _3=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(a).map(async h=>h(r.origin,o)),l=await v3(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function aP(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Q_=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{let l=aP("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(g.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};function kn(){return window}function E3(n){kn().location.href=n}function cP(){return typeof kn().WorkerGlobalScope<"u"&&typeof kn().importScripts=="function"}async function I3(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function w3(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function T3(){return cP()?self:null}var uP="firebaseLocalStorageDb",b3=1,lf="firebaseLocalStorage",lP="fbase_key",Is=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function pf(n,e){return n.transaction([lf],e?"readwrite":"readonly").objectStore(lf)}function D3(){let n=indexedDB.deleteDatabase(uP);return new Is(n).toPromise()}function J_(){let n=indexedDB.open(uP,b3);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(lf,{keyPath:lP})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(lf)?e(r):(r.close(),await D3(),e(await J_()))})})}async function RN(n,e,t){let r=pf(n,!0).put({[lP]:e,value:t});return new Is(r).toPromise()}async function C3(n,e){let t=pf(n,!1).get(e),r=await new Is(t).toPromise();return r===void 0?null:r.value}function NN(n,e){let t=pf(n,!0).delete(e);return new Is(t).toPromise()}var A3=800,S3=3,R3=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await J_(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>S3)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return cP()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_3._getInstance(T3()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await I3(),!this.activeServiceWorker)return;this.sender=new Q_(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||w3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await J_();return await RN(t,cf,"1"),await NN(t,cf),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>RN(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>C3(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>NN(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(s=>{let o=pf(s,!1).getAll();return new Is(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),A3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),dP=R3;var $le=eP("rcb"),qle=new Es(3e4,6e4);function N3(n,e){return e?gr(e):(Q(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var uu=class extends ou{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return x_(e,this._buildIdpRequest())}_linkToIdToken(e,t){return x_(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return x_(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function P3(n){return sP(n.auth,new uu(n),n.bypassAuthState)}function k3(n){let{auth:e,user:t}=n;return Q(t,e,"internal-error"),h3(t,new uu(n),n.bypassAuthState)}async function M3(n){let{auth:e,user:t}=n;return Q(t,e,"internal-error"),d3(t,new uu(n),n.bypassAuthState)}var X_=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return P3;case"linkViaPopup":case"linkViaRedirect":return M3;case"reauthViaPopup":case"reauthViaRedirect":return k3;default:Mn(this.auth,"internal-error")}}resolve(e){li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){li(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var zle=new Es(2e3,1e4);var O3="pendingRedirect",Jh=new Map,Z_=class extends X_{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Jh.get(this.auth._key());if(!e){try{let r=await x3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Jh.set(this.auth._key(),e)}return this.bypassAuthState||Jh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function x3(n,e){let t=V3(e),r=F3(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function L3(n,e){Jh.set(n._key(),e)}function F3(n){return gr(n._redirectPersistence)}function V3(n){return Qh(O3,n.config.apiKey,n.name)}async function U3(n,e,t=!1){if(Ft(n.app))return Promise.reject(ui(n));let r=Fo(n),i=N3(r,e),o=await new Z_(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}var j3=600*1e3,eE=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!B3(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!hP(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(_s(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=j3&&this.cachedEventUids.clear(),this.cachedEventUids.has(PN(e))}saveEventToCache(e){this.cachedEventUids.add(PN(e)),this.lastProcessedEventTime=Date.now()}};function PN(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function hP({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function B3(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hP(n);default:return!1}}async function H3(n,e={}){return di(n,"GET","/v1/projects",e)}var $3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,q3=/^https?/;async function z3(n){if(n.config.emulator)return;let{authorizedDomains:e}=await H3(n);for(let t of e)try{if(G3(t))return}catch{}Mn(n,"unauthorized-domain")}function G3(n){let e=F_(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!q3.test(t))return!1;if($3.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var W3=new Es(3e4,6e4);function kN(){let n=kn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function K3(n){return new Promise((e,t)=>{var r,i,s;function o(){kN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{kN(),t(_s(n,"network-request-failed"))},timeout:W3.get()})}if(!((i=(r=kn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=kn().gapi)===null||s===void 0)&&s.load)o();else{let a=eP("iframefcb");return kn()[a]=()=>{gapi.load?o():t(_s(n,"network-request-failed"))},ZN(`${e3()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw Xh=null,e})}var Xh=null;function Y3(n){return Xh=Xh||K3(n),Xh}var Q3=new Es(5e3,15e3),J3="__/auth/iframe",X3="emulator/auth/iframe",Z3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},e6=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function t6(n){let e=n.config;Q(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?iE(e,X3):`https://${n.config.authDomain}/${J3}`,r={apiKey:e.apiKey,appName:n.name,v:ni},i=e6.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${qc(r).slice(1)}`}async function n6(n){let e=await Y3(n),t=kn().gapi;return Q(t,n,"internal-error"),e.open({where:document.body,url:t6(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Z3,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});let o=_s(n,"network-request-failed"),a=kn().setTimeout(()=>{s(o)},Q3.get());function u(){kn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}var r6={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},i6=500,s6=600,o6="_blank",a6="http://localhost",df=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function c6(n,e,t,r=i6,i=s6){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},r6),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Qe().toLowerCase();t&&(a=GN(l)?o6:t),qN(l)&&(e=e||a6,u.scrollbars="yes");let h=Object.entries(u).reduce((g,[y,T])=>`${g}${y}=${T},`,"");if(K4(l)&&a!=="_self")return u6(e||"",a),new df(null);let p=window.open(e||"",a,h);Q(p,n,"popup-blocked");try{p.focus()}catch{}return new df(p)}function u6(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var l6="__/auth/handler",d6="emulator/auth/handler",h6=encodeURIComponent("fac");async function MN(n,e,t,r,i,s){Q(n.config.authDomain,n,"auth-domain-config-required"),Q(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ni,eventId:i};if(e instanceof af){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",cR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof K_){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=await n._getAppCheckToken(),l=u?`#${h6}=${encodeURIComponent(u)}`:"";return`${f6(n)}?${qc(a).slice(1)}${l}`}function f6({config:n}){return n.emulator?iE(n,d6):`https://${n.authDomain}/${l6}`}var L_="webStorageSupport",tE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gE,this._completeRedirectFn=U3,this._overrideRedirectResult=L3}async _openPopup(e,t,r,i){var s;li((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=await MN(e,t,r,F_(),i);return c6(e,o,aP())}async _openRedirect(e,t,r,i){await this._originValidation(e);let s=await MN(e,t,r,F_(),i);return E3(s),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(li(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await n6(e),r=new eE(e);return t.register("authEvent",i=>(Q(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(L_,{type:L_},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[L_];o!==void 0&&t(!!o),Mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=z3(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return JN()||zN()||cE()}},fP=tE;var ON="@firebase/auth",xN="1.10.8";var nE=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function p6(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function g6(n){ln(new Et("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Q(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:XN(n)},l=new q_(r,i,s,u);return n3(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ln(new Et("auth-internal",e=>{let t=Fo(e.getProvider("auth").getImmediate());return(r=>new nE(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Me(ON,xN,p6(n)),Me(ON,xN,"esm2017")}var m6=300,y6=jv("authIdTokenMaxAge")||m6,LN=null,v6=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>y6)return;let i=t?.token;LN!==i&&(LN=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function mE(n=hs()){let e=Ro(n,"auth");if(e.isInitialized())return e.getImmediate();let t=uE(n,{popupRedirectResolver:fP,persistence:[dP,oP,gE]}),r=jv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=v6(s.toString());pE(t,o,()=>o(t.currentUser)),fE(t,a=>o(a))}}let i=Vv("auth");return i&&lE(t,`http://${i}`),t}function _6(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}X4({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=_s("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",_6().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});g6("Browser");var pP="auth",lu=class{constructor(e){return e}},du=class{constructor(){return Po(pP)}};var yE=new U("angularfire2.auth-instances");function lq(n,e){let t=Wc(pP,n,e);return t&&new lu(t)}function dq(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new lu(r)}}var hq={provide:du,deps:[[new bt,yE]]},fq={provide:lu,useFactory:lq,deps:[[new bt,yE],lr]};function Mde(n,...e){return Me("angularfire",ri.full,"auth"),wt([fq,hq,{provide:yE,useFactory:dq(n),multi:!0,deps:[De,Le,ii,ps,[new bt,ko],...e]}])}var Ode=Je(EN,!0);var xde=Je(mE,!0);var Lde=Je(hE,!0,2);var gP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mP={};var mr,vE;(function(){var n;function e(w,v){function E(){}E.prototype=v.prototype,w.D=v.prototype,w.prototype=new E,w.prototype.constructor=w,w.C=function(I,b,C){for(var _=Array(arguments.length-2),Bn=2;Bn<arguments.length;Bn++)_[Bn-2]=arguments[Bn];return v.prototype[b].apply(I,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,v,E){E||(E=0);var I=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)I[b]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(b=0;16>b;++b)I[b]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=w.g[0],E=w.g[1],b=w.g[2];var C=w.g[3],_=v+(C^E&(b^C))+I[0]+3614090360&4294967295;v=E+(_<<7&4294967295|_>>>25),_=C+(b^v&(E^b))+I[1]+3905402710&4294967295,C=v+(_<<12&4294967295|_>>>20),_=b+(E^C&(v^E))+I[2]+606105819&4294967295,b=C+(_<<17&4294967295|_>>>15),_=E+(v^b&(C^v))+I[3]+3250441966&4294967295,E=b+(_<<22&4294967295|_>>>10),_=v+(C^E&(b^C))+I[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(b^v&(E^b))+I[5]+1200080426&4294967295,C=v+(_<<12&4294967295|_>>>20),_=b+(E^C&(v^E))+I[6]+2821735955&4294967295,b=C+(_<<17&4294967295|_>>>15),_=E+(v^b&(C^v))+I[7]+4249261313&4294967295,E=b+(_<<22&4294967295|_>>>10),_=v+(C^E&(b^C))+I[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(b^v&(E^b))+I[9]+2336552879&4294967295,C=v+(_<<12&4294967295|_>>>20),_=b+(E^C&(v^E))+I[10]+4294925233&4294967295,b=C+(_<<17&4294967295|_>>>15),_=E+(v^b&(C^v))+I[11]+2304563134&4294967295,E=b+(_<<22&4294967295|_>>>10),_=v+(C^E&(b^C))+I[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=C+(b^v&(E^b))+I[13]+4254626195&4294967295,C=v+(_<<12&4294967295|_>>>20),_=b+(E^C&(v^E))+I[14]+2792965006&4294967295,b=C+(_<<17&4294967295|_>>>15),_=E+(v^b&(C^v))+I[15]+1236535329&4294967295,E=b+(_<<22&4294967295|_>>>10),_=v+(b^C&(E^b))+I[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^b&(v^E))+I[6]+3225465664&4294967295,C=v+(_<<9&4294967295|_>>>23),_=b+(v^E&(C^v))+I[11]+643717713&4294967295,b=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(b^C))+I[0]+3921069994&4294967295,E=b+(_<<20&4294967295|_>>>12),_=v+(b^C&(E^b))+I[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^b&(v^E))+I[10]+38016083&4294967295,C=v+(_<<9&4294967295|_>>>23),_=b+(v^E&(C^v))+I[15]+3634488961&4294967295,b=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(b^C))+I[4]+3889429448&4294967295,E=b+(_<<20&4294967295|_>>>12),_=v+(b^C&(E^b))+I[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^b&(v^E))+I[14]+3275163606&4294967295,C=v+(_<<9&4294967295|_>>>23),_=b+(v^E&(C^v))+I[3]+4107603335&4294967295,b=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(b^C))+I[8]+1163531501&4294967295,E=b+(_<<20&4294967295|_>>>12),_=v+(b^C&(E^b))+I[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=C+(E^b&(v^E))+I[2]+4243563512&4294967295,C=v+(_<<9&4294967295|_>>>23),_=b+(v^E&(C^v))+I[7]+1735328473&4294967295,b=C+(_<<14&4294967295|_>>>18),_=E+(C^v&(b^C))+I[12]+2368359562&4294967295,E=b+(_<<20&4294967295|_>>>12),_=v+(E^b^C)+I[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^b)+I[8]+2272392833&4294967295,C=v+(_<<11&4294967295|_>>>21),_=b+(C^v^E)+I[11]+1839030562&4294967295,b=C+(_<<16&4294967295|_>>>16),_=E+(b^C^v)+I[14]+4259657740&4294967295,E=b+(_<<23&4294967295|_>>>9),_=v+(E^b^C)+I[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^b)+I[4]+1272893353&4294967295,C=v+(_<<11&4294967295|_>>>21),_=b+(C^v^E)+I[7]+4139469664&4294967295,b=C+(_<<16&4294967295|_>>>16),_=E+(b^C^v)+I[10]+3200236656&4294967295,E=b+(_<<23&4294967295|_>>>9),_=v+(E^b^C)+I[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^b)+I[0]+3936430074&4294967295,C=v+(_<<11&4294967295|_>>>21),_=b+(C^v^E)+I[3]+3572445317&4294967295,b=C+(_<<16&4294967295|_>>>16),_=E+(b^C^v)+I[6]+76029189&4294967295,E=b+(_<<23&4294967295|_>>>9),_=v+(E^b^C)+I[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=C+(v^E^b)+I[12]+3873151461&4294967295,C=v+(_<<11&4294967295|_>>>21),_=b+(C^v^E)+I[15]+530742520&4294967295,b=C+(_<<16&4294967295|_>>>16),_=E+(b^C^v)+I[2]+3299628645&4294967295,E=b+(_<<23&4294967295|_>>>9),_=v+(b^(E|~C))+I[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~b))+I[7]+1126891415&4294967295,C=v+(_<<10&4294967295|_>>>22),_=b+(v^(C|~E))+I[14]+2878612391&4294967295,b=C+(_<<15&4294967295|_>>>17),_=E+(C^(b|~v))+I[5]+4237533241&4294967295,E=b+(_<<21&4294967295|_>>>11),_=v+(b^(E|~C))+I[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~b))+I[3]+2399980690&4294967295,C=v+(_<<10&4294967295|_>>>22),_=b+(v^(C|~E))+I[10]+4293915773&4294967295,b=C+(_<<15&4294967295|_>>>17),_=E+(C^(b|~v))+I[1]+2240044497&4294967295,E=b+(_<<21&4294967295|_>>>11),_=v+(b^(E|~C))+I[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~b))+I[15]+4264355552&4294967295,C=v+(_<<10&4294967295|_>>>22),_=b+(v^(C|~E))+I[6]+2734768916&4294967295,b=C+(_<<15&4294967295|_>>>17),_=E+(C^(b|~v))+I[13]+1309151649&4294967295,E=b+(_<<21&4294967295|_>>>11),_=v+(b^(E|~C))+I[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=C+(E^(v|~b))+I[11]+3174756917&4294967295,C=v+(_<<10&4294967295|_>>>22),_=b+(v^(C|~E))+I[2]+718787259&4294967295,b=C+(_<<15&4294967295|_>>>17),_=E+(C^(b|~v))+I[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(b+(_<<21&4294967295|_>>>11))&4294967295,w.g[2]=w.g[2]+b&4294967295,w.g[3]=w.g[3]+C&4294967295}r.prototype.u=function(w,v){v===void 0&&(v=w.length);for(var E=v-this.blockSize,I=this.B,b=this.h,C=0;C<v;){if(b==0)for(;C<=E;)i(this,w,C),C+=this.blockSize;if(typeof w=="string"){for(;C<v;)if(I[b++]=w.charCodeAt(C++),b==this.blockSize){i(this,I),b=0;break}}else for(;C<v;)if(I[b++]=w[C++],b==this.blockSize){i(this,I),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var w=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;var E=8*this.o;for(v=w.length-8;v<w.length;++v)w[v]=E&255,E/=256;for(this.u(w),w=Array(16),v=E=0;4>v;++v)for(var I=0;32>I;I+=8)w[E++]=this.g[v]>>>I&255;return w};function s(w,v){var E=a;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=v(w)}function o(w,v){this.h=v;for(var E=[],I=!0,b=w.length-1;0<=b;b--){var C=w[b]|0;I&&C==v||(E[b]=C,I=!1)}this.g=E}var a={};function u(w){return-128<=w&&128>w?s(w,function(v){return new o([v|0],0>v?-1:0)}):new o([w|0],0>w?-1:0)}function l(w){if(isNaN(w)||!isFinite(w))return p;if(0>w)return A(l(-w));for(var v=[],E=1,I=0;w>=E;I++)v[I]=w/E|0,E*=4294967296;return new o(v,0)}function h(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return A(h(w.substring(1),v));if(0<=w.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(v,8)),I=p,b=0;b<w.length;b+=8){var C=Math.min(8,w.length-b),_=parseInt(w.substring(b,b+C),v);8>C?(C=l(Math.pow(v,C)),I=I.j(C).add(l(_))):(I=I.j(E),I=I.add(l(_)))}return I}var p=u(0),g=u(1),y=u(16777216);n=o.prototype,n.m=function(){if(R(this))return-A(this).m();for(var w=0,v=1,E=0;E<this.g.length;E++){var I=this.i(E);w+=(0<=I?I:4294967296+I)*v,v*=4294967296}return w},n.toString=function(w){if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(T(this))return"0";if(R(this))return"-"+A(this).toString(w);for(var v=l(Math.pow(w,6)),E=this,I="";;){var b=J(E,v).g;E=P(E,b.j(v));var C=((0<E.g.length?E.g[0]:E.h)>>>0).toString(w);if(E=b,T(E))return C+I;for(;6>C.length;)C="0"+C;I=C+I}},n.i=function(w){return 0>w?0:w<this.g.length?this.g[w]:this.h};function T(w){if(w.h!=0)return!1;for(var v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function R(w){return w.h==-1}n.l=function(w){return w=P(this,w),R(w)?-1:T(w)?0:1};function A(w){for(var v=w.g.length,E=[],I=0;I<v;I++)E[I]=~w.g[I];return new o(E,~w.h).add(g)}n.abs=function(){return R(this)?A(this):this},n.add=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0,b=0;b<=v;b++){var C=I+(this.i(b)&65535)+(w.i(b)&65535),_=(C>>>16)+(this.i(b)>>>16)+(w.i(b)>>>16);I=_>>>16,C&=65535,_&=65535,E[b]=_<<16|C}return new o(E,E[E.length-1]&-2147483648?-1:0)};function P(w,v){return w.add(A(v))}n.j=function(w){if(T(this)||T(w))return p;if(R(this))return R(w)?A(this).j(A(w)):A(A(this).j(w));if(R(w))return A(this.j(A(w)));if(0>this.l(y)&&0>w.l(y))return l(this.m()*w.m());for(var v=this.g.length+w.g.length,E=[],I=0;I<2*v;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(var b=0;b<w.g.length;b++){var C=this.i(I)>>>16,_=this.i(I)&65535,Bn=w.i(b)>>>16,ua=w.i(b)&65535;E[2*I+2*b]+=_*ua,F(E,2*I+2*b),E[2*I+2*b+1]+=C*ua,F(E,2*I+2*b+1),E[2*I+2*b+1]+=_*Bn,F(E,2*I+2*b+1),E[2*I+2*b+2]+=C*Bn,F(E,2*I+2*b+2)}for(I=0;I<v;I++)E[I]=E[2*I+1]<<16|E[2*I];for(I=v;I<2*v;I++)E[I]=0;return new o(E,0)};function F(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function $(w,v){this.g=w,this.h=v}function J(w,v){if(T(v))throw Error("division by zero");if(T(w))return new $(p,p);if(R(w))return v=J(A(w),v),new $(A(v.g),A(v.h));if(R(v))return v=J(w,A(v)),new $(A(v.g),v.h);if(30<w.g.length){if(R(w)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var E=g,I=v;0>=I.l(w);)E=xe(E),I=xe(I);var b=ce(E,1),C=ce(I,1);for(I=ce(I,2),E=ce(E,2);!T(I);){var _=C.add(I);0>=_.l(w)&&(b=b.add(E),C=_),I=ce(I,1),E=ce(E,1)}return v=P(w,b.j(v)),new $(b,v)}for(b=p;0<=w.l(v);){for(E=Math.max(1,Math.floor(w.m()/v.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),C=l(E),_=C.j(v);R(_)||0<_.l(w);)E-=I,C=l(E),_=C.j(v);T(C)&&(C=g),b=b.add(C),w=P(w,_)}return new $(b,w)}n.A=function(w){return J(this,w).h},n.and=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)&w.i(I);return new o(E,this.h&w.h)},n.or=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)|w.i(I);return new o(E,this.h|w.h)},n.xor=function(w){for(var v=Math.max(this.g.length,w.g.length),E=[],I=0;I<v;I++)E[I]=this.i(I)^w.i(I);return new o(E,this.h^w.h)};function xe(w){for(var v=w.g.length+1,E=[],I=0;I<v;I++)E[I]=w.i(I)<<1|w.i(I-1)>>>31;return new o(E,w.h)}function ce(w,v){var E=v>>5;v%=32;for(var I=w.g.length-E,b=[],C=0;C<I;C++)b[C]=0<v?w.i(C+E)>>>v|w.i(C+E+1)<<32-v:w.i(C+E);return new o(b,w.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,vE=mP.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,mr=mP.Integer=o}).apply(typeof gP<"u"?gP:typeof self<"u"?self:typeof window<"u"?window:{});var gf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},yr={};var _E,pq,Vo,EE,hu,mf,IE,wE,TE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof gf=="object"&&gf];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var D=c[m];if(!(D in f))break e;f=f[D]}c=c[c.length-1],m=f[c],d=d(m),d!=m&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function s(c,d){c instanceof String&&(c+="");var f=0,m=!1,D={next:function(){if(!m&&f<c.length){var S=f++;return{value:d(S,c[S]),done:!1}}return m=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(c){return c||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,m),c.apply(d,D)}}return function(){return c.apply(d,arguments)}}function g(c,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function T(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(m,D,S){for(var O=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)O[ve-2]=arguments[ve];return d.prototype[D].apply(m,O)}}function R(c){let d=c.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=c[m];return f}return[]}function A(c,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(u(m)){let D=c.length||0,S=m.length||0;c.length=D+S;for(let O=0;O<S;O++)c[D+O]=m[O]}else c.push(m)}}class P{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function F(c){return/^[\s\xa0]*$/.test(c)}function $(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function J(c){return J[" "](c),c}J[" "]=function(){};var xe=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function ce(c,d,f){for(let m in c)d.call(f,c[m],m,c)}function w(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,d){let f,m;for(let D=1;D<arguments.length;D++){m=arguments[D];for(f in m)c[f]=m[f];for(let S=0;S<E.length;S++)f=E[S],Object.prototype.hasOwnProperty.call(m,f)&&(c[f]=m[f])}}function b(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function C(c){a.setTimeout(()=>{throw c},0)}function _(){var c=hp;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Bn{constructor(){this.h=this.g=null}add(d,f){let m=ua.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var ua=new P(()=>new KM,c=>c.reset());class KM{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let la,da=!1,hp=new Bn,Bw=()=>{let c=a.Promise.resolve(void 0);la=()=>{c.then(YM)}};var YM=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){C(f)}var d=ua;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}da=!1};function Dr(){this.s=this.s,this.C=this.C}Dr.prototype.s=!1,Dr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Dr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function it(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}it.prototype.h=function(){this.defaultPrevented=!0};var QM=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c})();function ha(c,d){if(it.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(xe){e:{try{J(d.nodeName);var D=!0;break e}catch{}D=!1}D||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:JM[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&ha.aa.h.call(this)}}T(ha,it);var JM={2:"touch",3:"pen",4:"mouse"};ha.prototype.h=function(){ha.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var fa="closure_listenable_"+(1e6*Math.random()|0),XM=0;function ZM(c,d,f,m,D){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=D,this.key=++XM,this.da=this.fa=!1}function xu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Lu(c){this.src=c,this.g={},this.h=0}Lu.prototype.add=function(c,d,f,m,D){var S=c.toString();c=this.g[S],c||(c=this.g[S]=[],this.h++);var O=pp(c,d,m,D);return-1<O?(d=c[O],f||(d.fa=!1)):(d=new ZM(d,this.src,S,!!m,D),d.fa=f,c.push(d)),d};function fp(c,d){var f=d.type;if(f in c.g){var m=c.g[f],D=Array.prototype.indexOf.call(m,d,void 0),S;(S=0<=D)&&Array.prototype.splice.call(m,D,1),S&&(xu(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function pp(c,d,f,m){for(var D=0;D<c.length;++D){var S=c[D];if(!S.da&&S.listener==d&&S.capture==!!f&&S.ha==m)return D}return-1}var gp="closure_lm_"+(1e6*Math.random()|0),mp={};function Hw(c,d,f,m,D){if(m&&m.once)return qw(c,d,f,m,D);if(Array.isArray(d)){for(var S=0;S<d.length;S++)Hw(c,d[S],f,m,D);return null}return f=Ep(f),c&&c[fa]?c.K(d,f,l(m)?!!m.capture:!!m,D):$w(c,d,f,!1,m,D)}function $w(c,d,f,m,D,S){if(!d)throw Error("Invalid event type");var O=l(D)?!!D.capture:!!D,ve=vp(c);if(ve||(c[gp]=ve=new Lu(c)),f=ve.add(d,f,m,O,S),f.proxy)return f;if(m=eO(),f.proxy=m,m.src=c,m.listener=f,c.addEventListener)QM||(D=O),D===void 0&&(D=!1),c.addEventListener(d.toString(),m,D);else if(c.attachEvent)c.attachEvent(Gw(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function eO(){function c(f){return d.call(c.src,c.listener,f)}let d=tO;return c}function qw(c,d,f,m,D){if(Array.isArray(d)){for(var S=0;S<d.length;S++)qw(c,d[S],f,m,D);return null}return f=Ep(f),c&&c[fa]?c.L(d,f,l(m)?!!m.capture:!!m,D):$w(c,d,f,!0,m,D)}function zw(c,d,f,m,D){if(Array.isArray(d))for(var S=0;S<d.length;S++)zw(c,d[S],f,m,D);else m=l(m)?!!m.capture:!!m,f=Ep(f),c&&c[fa]?(c=c.i,d=String(d).toString(),d in c.g&&(S=c.g[d],f=pp(S,f,m,D),-1<f&&(xu(S[f]),Array.prototype.splice.call(S,f,1),S.length==0&&(delete c.g[d],c.h--)))):c&&(c=vp(c))&&(d=c.g[d.toString()],c=-1,d&&(c=pp(d,f,m,D)),(f=-1<c?d[c]:null)&&yp(f))}function yp(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[fa])fp(d.i,c);else{var f=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(f,m,c.capture):d.detachEvent?d.detachEvent(Gw(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=vp(d))?(fp(f,c),f.h==0&&(f.src=null,d[gp]=null)):xu(c)}}}function Gw(c){return c in mp?mp[c]:mp[c]="on"+c}function tO(c,d){if(c.da)c=!0;else{d=new ha(d,this);var f=c.listener,m=c.ha||c.src;c.fa&&yp(c),c=f.call(m,d)}return c}function vp(c){return c=c[gp],c instanceof Lu?c:null}var _p="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ep(c){return typeof c=="function"?c:(c[_p]||(c[_p]=function(d){return c.handleEvent(d)}),c[_p])}function st(){Dr.call(this),this.i=new Lu(this),this.M=this,this.F=null}T(st,Dr),st.prototype[fa]=!0,st.prototype.removeEventListener=function(c,d,f,m){zw(this,c,d,f,m)};function ft(c,d){var f,m=c.F;if(m)for(f=[];m;m=m.F)f.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new it(d,c);else if(d instanceof it)d.target=d.target||c;else{var D=d;d=new it(m,c),I(d,D)}if(D=!0,f)for(var S=f.length-1;0<=S;S--){var O=d.g=f[S];D=Fu(O,m,!0,d)&&D}if(O=d.g=c,D=Fu(O,m,!0,d)&&D,D=Fu(O,m,!1,d)&&D,f)for(S=0;S<f.length;S++)O=d.g=f[S],D=Fu(O,m,!1,d)&&D}st.prototype.N=function(){if(st.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],m=0;m<f.length;m++)xu(f[m]);delete c.g[d],c.h--}}this.F=null},st.prototype.K=function(c,d,f,m){return this.i.add(String(c),d,!1,f,m)},st.prototype.L=function(c,d,f,m){return this.i.add(String(c),d,!0,f,m)};function Fu(c,d,f,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var D=!0,S=0;S<d.length;++S){var O=d[S];if(O&&!O.da&&O.capture==f){var ve=O.listener,tt=O.ha||O.src;O.fa&&fp(c.i,O),D=ve.call(tt,m)!==!1&&D}}return D&&!m.defaultPrevented}function Ww(c,d,f){if(typeof c=="function")f&&(c=g(c,f));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function Kw(c){c.g=Ww(()=>{c.g=null,c.i&&(c.i=!1,Kw(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class nO extends Dr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Kw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pa(c){Dr.call(this),this.h=c,this.g={}}T(pa,Dr);var Yw=[];function Qw(c){ce(c.g,function(d,f){this.g.hasOwnProperty(f)&&yp(d)},c),c.g={}}pa.prototype.N=function(){pa.aa.N.call(this),Qw(this)},pa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ip=a.JSON.stringify,rO=a.JSON.parse,iO=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function wp(){}wp.prototype.h=null;function Jw(c){return c.h||(c.h=c.i())}function Xw(){}var ga={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Tp(){it.call(this,"d")}T(Tp,it);function bp(){it.call(this,"c")}T(bp,it);var wi={},Zw=null;function Vu(){return Zw=Zw||new st}wi.La="serverreachability";function eT(c){it.call(this,wi.La,c)}T(eT,it);function ma(c){let d=Vu();ft(d,new eT(d))}wi.STAT_EVENT="statevent";function tT(c,d){it.call(this,wi.STAT_EVENT,c),this.stat=d}T(tT,it);function pt(c){let d=Vu();ft(d,new tT(d,c))}wi.Ma="timingevent";function nT(c,d){it.call(this,wi.Ma,c),this.size=d}T(nT,it);function ya(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function va(){this.g=!0}va.prototype.xa=function(){this.g=!1};function sO(c,d,f,m,D,S){c.info(function(){if(c.g)if(S)for(var O="",ve=S.split("&"),tt=0;tt<ve.length;tt++){var fe=ve[tt].split("=");if(1<fe.length){var ot=fe[0];fe=fe[1];var at=ot.split("_");O=2<=at.length&&at[1]=="type"?O+(ot+"="+fe+"&"):O+(ot+"=redacted&")}}else O=null;else O=S;return"XMLHTTP REQ ("+m+") [attempt "+D+"]: "+d+`
`+f+`
`+O})}function oO(c,d,f,m,D,S,O){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+D+"]: "+d+`
`+f+`
`+S+" "+O})}function Ls(c,d,f,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+cO(c,f)+(m?" "+m:"")})}function aO(c,d){c.info(function(){return"TIMEOUT: "+d})}va.prototype.info=function(){};function cO(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var m=f[c];if(!(2>m.length)){var D=m[1];if(Array.isArray(D)&&!(1>D.length)){var S=D[0];if(S!="noop"&&S!="stop"&&S!="close")for(var O=1;O<D.length;O++)D[O]=""}}}}return Ip(f)}catch{return d}}var Uu={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},rT={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Dp;function ju(){}T(ju,wp),ju.prototype.g=function(){return new XMLHttpRequest},ju.prototype.i=function(){return{}},Dp=new ju;function Cr(c,d,f,m){this.j=c,this.i=d,this.l=f,this.R=m||1,this.U=new pa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new iT}function iT(){this.i=null,this.g="",this.h=!1}var sT={},Cp={};function Ap(c,d,f){c.L=1,c.v=qu(Hn(d)),c.m=f,c.P=!0,oT(c,null)}function oT(c,d){c.F=Date.now(),Bu(c),c.A=Hn(c.v);var f=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),ET(f.i,"t",m),c.C=0,f=c.j.J,c.h=new iT,c.g=VT(c.j,f?d:null,!c.m),0<c.O&&(c.M=new nO(g(c.Y,c,c.g),c.O)),d=c.U,f=c.g,m=c.ca;var D="readystatechange";Array.isArray(D)||(D&&(Yw[0]=D.toString()),D=Yw);for(var S=0;S<D.length;S++){var O=Hw(f,D[S],m||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),ma(),sO(c.i,c.u,c.A,c.l,c.R,c.m)}Cr.prototype.ca=function(c){c=c.target;let d=this.M;d&&$n(c)==3?d.j():this.Y(c)},Cr.prototype.Y=function(c){try{if(c==this.g)e:{let at=$n(this.g);var d=this.g.Ba();let Us=this.g.Z();if(!(3>at)&&(at!=3||this.g&&(this.h.h||this.g.oa()||AT(this.g)))){this.J||at!=4||d==7||(d==8||0>=Us?ma(3):ma(2)),Sp(this);var f=this.g.Z();this.X=f;t:if(aT(this)){var m=AT(this.g);c="";var D=m.length,S=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ti(this),_a(this);var O="";break t}this.h.i=new a.TextDecoder}for(d=0;d<D;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(S&&d==D-1)});m.length=0,this.h.g+=c,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=f==200,oO(this.i,this.u,this.A,this.l,this.R,at,f),this.o){if(this.T&&!this.K){t:{if(this.g){var ve,tt=this.g;if((ve=tt.g?tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(ve)){var fe=ve;break t}}fe=null}if(f=fe)Ls(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Rp(this,f);else{this.o=!1,this.s=3,pt(12),Ti(this),_a(this);break e}}if(this.P){f=!0;let Jt;for(;!this.J&&this.C<O.length;)if(Jt=uO(this,O),Jt==Cp){at==4&&(this.s=4,pt(14),f=!1),Ls(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==sT){this.s=4,pt(15),Ls(this.i,this.l,O,"[Invalid Chunk]"),f=!1;break}else Ls(this.i,this.l,Jt,null),Rp(this,Jt);if(aT(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),at!=4||O.length!=0||this.h.h||(this.s=1,pt(16),f=!1),this.o=this.o&&f,!f)Ls(this.i,this.l,O,"[Invalid Chunked Response]"),Ti(this),_a(this);else if(0<O.length&&!this.W){this.W=!0;var ot=this.j;ot.g==this&&ot.ba&&!ot.M&&(ot.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),xp(ot),ot.M=!0,pt(11))}}else Ls(this.i,this.l,O,null),Rp(this,O);at==4&&Ti(this),this.o&&!this.J&&(at==4?OT(this.j,this):(this.o=!1,Bu(this)))}else CO(this.g),f==400&&0<O.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),Ti(this),_a(this)}}}catch{}finally{}};function aT(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function uO(c,d){var f=c.C,m=d.indexOf(`
`,f);return m==-1?Cp:(f=Number(d.substring(f,m)),isNaN(f)?sT:(m+=1,m+f>d.length?Cp:(d=d.slice(m,m+f),c.C=m+f,d)))}Cr.prototype.cancel=function(){this.J=!0,Ti(this)};function Bu(c){c.S=Date.now()+c.I,cT(c,c.I)}function cT(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=ya(g(c.ba,c),d)}function Sp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Cr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(aO(this.i,this.A),this.L!=2&&(ma(),pt(17)),Ti(this),this.s=2,_a(this)):cT(this,this.S-c)};function _a(c){c.j.G==0||c.J||OT(c.j,c)}function Ti(c){Sp(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,Qw(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Rp(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Np(f.h,c))){if(!c.K&&Np(f.h,c)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var D=m;if(D[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Yu(f),Wu(f);else break e;Op(f),pt(18)}}else f.za=D[1],0<f.za-f.T&&37500>D[2]&&f.F&&f.v==0&&!f.C&&(f.C=ya(g(f.Za,f),6e3));if(1>=dT(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Di(f,11)}else if((c.K||f.g==c)&&Yu(f),!F(d))for(D=f.Da.g.parse(d),d=0;d<D.length;d++){let fe=D[d];if(f.T=fe[0],fe=fe[1],f.G==2)if(fe[0]=="c"){f.K=fe[1],f.ia=fe[2];let ot=fe[3];ot!=null&&(f.la=ot,f.j.info("VER="+f.la));let at=fe[4];at!=null&&(f.Aa=at,f.j.info("SVER="+f.Aa));let Us=fe[5];Us!=null&&typeof Us=="number"&&0<Us&&(m=1.5*Us,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let Jt=c.g;if(Jt){let Ju=Jt.g?Jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ju){var S=m.h;S.g||Ju.indexOf("spdy")==-1&&Ju.indexOf("quic")==-1&&Ju.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(Pp(S,S.h),S.h=null))}if(m.D){let Lp=Jt.g?Jt.g.getResponseHeader("X-HTTP-Session-Id"):null;Lp&&(m.ya=Lp,Te(m.I,m.D,Lp))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var O=c;if(m.qa=FT(m,m.J?m.ia:null,m.W),O.K){hT(m.h,O);var ve=O,tt=m.L;tt&&(ve.I=tt),ve.B&&(Sp(ve),Bu(ve)),m.g=O}else kT(m);0<f.i.length&&Ku(f)}else fe[0]!="stop"&&fe[0]!="close"||Di(f,7);else f.G==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?Di(f,7):Mp(f):fe[0]!="noop"&&f.l&&f.l.ta(fe),f.v=0)}}ma(4)}catch{}}var lO=class{constructor(c,d){this.g=c,this.map=d}};function uT(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function lT(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function dT(c){return c.h?1:c.g?c.g.size:0}function Np(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Pp(c,d){c.g?c.g.add(d):c.h=d}function hT(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}uT.prototype.cancel=function(){if(this.i=fT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function fT(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return R(c.i)}function dO(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,m=0;m<f;m++)d.push(c[m]);return d}d=[],f=0;for(m in c)d[f++]=c[m];return d}function hO(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let m in c)d[f++]=m;return d}}}function pT(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=hO(c),m=dO(c),D=m.length,S=0;S<D;S++)d.call(void 0,m[S],f&&f[S],c)}var gT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fO(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var m=c[f].indexOf("="),D=null;if(0<=m){var S=c[f].substring(0,m);D=c[f].substring(m+1)}else S=c[f];d(S,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function bi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof bi){this.h=c.h,Hu(this,c.j),this.o=c.o,this.g=c.g,$u(this,c.s),this.l=c.l;var d=c.i,f=new wa;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),mT(this,f),this.m=c.m}else c&&(d=String(c).match(gT))?(this.h=!1,Hu(this,d[1]||"",!0),this.o=Ea(d[2]||""),this.g=Ea(d[3]||"",!0),$u(this,d[4]),this.l=Ea(d[5]||"",!0),mT(this,d[6]||"",!0),this.m=Ea(d[7]||"")):(this.h=!1,this.i=new wa(null,this.h))}bi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Ia(d,yT,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Ia(d,yT,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Ia(f,f.charAt(0)=="/"?mO:gO,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Ia(f,vO)),c.join("")};function Hn(c){return new bi(c)}function Hu(c,d,f){c.j=f?Ea(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function $u(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function mT(c,d,f){d instanceof wa?(c.i=d,_O(c.i,c.h)):(f||(d=Ia(d,yO)),c.i=new wa(d,c.h))}function Te(c,d,f){c.i.set(d,f)}function qu(c){return Te(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ea(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ia(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,pO),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function pO(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var yT=/[#\/\?@]/g,gO=/[#\?:]/g,mO=/[#\?]/g,yO=/[#\?@]/g,vO=/#/g;function wa(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Ar(c){c.g||(c.g=new Map,c.h=0,c.i&&fO(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=wa.prototype,n.add=function(c,d){Ar(this),this.i=null,c=Fs(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function vT(c,d){Ar(c),d=Fs(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function _T(c,d){return Ar(c),d=Fs(c,d),c.g.has(d)}n.forEach=function(c,d){Ar(this),this.g.forEach(function(f,m){f.forEach(function(D){c.call(d,D,m,this)},this)},this)},n.na=function(){Ar(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let D=c[m];for(let S=0;S<D.length;S++)f.push(d[m])}return f},n.V=function(c){Ar(this);let d=[];if(typeof c=="string")_T(this,c)&&(d=d.concat(this.g.get(Fs(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return Ar(this),this.i=null,c=Fs(this,c),_T(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function ET(c,d,f){vT(c,d),0<f.length&&(c.i=null,c.g.set(Fs(c,d),R(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let S=encodeURIComponent(String(m)),O=this.V(m);for(m=0;m<O.length;m++){var D=S;O[m]!==""&&(D+="="+encodeURIComponent(String(O[m]))),c.push(D)}}return this.i=c.join("&")};function Fs(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function _O(c,d){d&&!c.j&&(Ar(c),c.i=null,c.g.forEach(function(f,m){var D=m.toLowerCase();m!=D&&(vT(this,m),ET(this,D,f))},c)),c.j=d}function EO(c,d){let f=new va;if(a.Image){let m=new Image;m.onload=y(Sr,f,"TestLoadImage: loaded",!0,d,m),m.onerror=y(Sr,f,"TestLoadImage: error",!1,d,m),m.onabort=y(Sr,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(Sr,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function IO(c,d){let f=new va,m=new AbortController,D=setTimeout(()=>{m.abort(),Sr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(S=>{clearTimeout(D),S.ok?Sr(f,"TestPingServer: ok",!0,d):Sr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),Sr(f,"TestPingServer: error",!1,d)})}function Sr(c,d,f,m,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),m(f)}catch{}}function wO(){this.g=new iO}function TO(c,d,f){let m=f||"";try{pT(c,function(D,S){let O=D;l(D)&&(O=Ip(D)),d.push(m+S+"="+encodeURIComponent(O))})}catch(D){throw d.push(m+"type="+encodeURIComponent("_badmap")),D}}function Ta(c){this.l=c.Ub||null,this.j=c.eb||!1}T(Ta,wp),Ta.prototype.g=function(){return new zu(this.l,this.j)},Ta.prototype.i=(function(c){return function(){return c}})({});function zu(c,d){st.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(zu,st),n=zu.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Da(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ba(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Da(this)),this.g&&(this.readyState=3,Da(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;IT(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function IT(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?ba(this):Da(this),this.readyState==3&&IT(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,ba(this))},n.Qa=function(c){this.g&&(this.response=c,ba(this))},n.ga=function(){this.g&&ba(this)};function ba(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Da(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Da(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(zu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function wT(c){let d="";return ce(c,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function kp(c,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=wT(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Te(c,d,f))}function Re(c){st.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Re,st);var bO=/^https?$/i,DO=["POST","PUT"];n=Re.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Dp.g(),this.v=this.o?Jw(this.o):Jw(Dp),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(S){TT(this,S);return}if(c=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var D in m)f.set(D,m[D]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let S of m.keys())f.set(S,m.get(S));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(S=>S.toLowerCase()=="content-type"),D=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(DO,d,void 0))||m||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,O]of f)this.g.setRequestHeader(S,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{CT(this),this.u=!0,this.g.send(c),this.u=!1}catch(S){TT(this,S)}};function TT(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,bT(c),Gu(c)}function bT(c){c.A||(c.A=!0,ft(c,"complete"),ft(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,ft(this,"complete"),ft(this,"abort"),Gu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gu(this,!0)),Re.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?DT(this):this.bb())},n.bb=function(){DT(this)};function DT(c){if(c.h&&typeof o<"u"&&(!c.v[1]||$n(c)!=4||c.Z()!=2)){if(c.u&&$n(c)==4)Ww(c.Ea,0,c);else if(ft(c,"readystatechange"),$n(c)==4){c.h=!1;try{let O=c.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=O===0){var D=String(c.D).match(gT)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),m=!bO.test(D?D.toLowerCase():"")}f=m}if(f)ft(c,"complete"),ft(c,"success");else{c.m=6;try{var S=2<$n(c)?c.g.statusText:""}catch{S=""}c.l=S+" ["+c.Z()+"]",bT(c)}}finally{Gu(c)}}}}function Gu(c,d){if(c.g){CT(c);let f=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||ft(c,"ready");try{f.onreadystatechange=m}catch{}}}function CT(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function $n(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),rO(d)}};function AT(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function CO(c){let d={};c=(c.g&&2<=$n(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(F(c[m]))continue;var f=b(c[m]);let D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let S=d[D]||[];d[D]=S,S.push(f)}w(d,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ca(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function ST(c){this.Aa=0,this.i=[],this.j=new va,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ca("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ca("baseRetryDelayMs",5e3,c),this.cb=Ca("retryDelaySeedMs",1e4,c),this.Wa=Ca("forwardChannelMaxRetries",2,c),this.wa=Ca("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new uT(c&&c.concurrentRequestLimit),this.Da=new wO,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ST.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,m){pt(0),this.W=c,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=FT(this,null,this.W),Ku(this)};function Mp(c){if(RT(c),c.G==3){var d=c.U++,f=Hn(c.I);if(Te(f,"SID",c.K),Te(f,"RID",d),Te(f,"TYPE","terminate"),Aa(c,f),d=new Cr(c,c.j,d),d.L=2,d.v=qu(Hn(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=VT(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Bu(d)}LT(c)}function Wu(c){c.g&&(xp(c),c.g.cancel(),c.g=null)}function RT(c){Wu(c),c.u&&(a.clearTimeout(c.u),c.u=null),Yu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Ku(c){if(!lT(c.h)&&!c.s){c.s=!0;var d=c.Ga;la||Bw(),da||(la(),da=!0),hp.add(d,c),c.B=0}}function AO(c,d){return dT(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=ya(g(c.Ga,c,d),xT(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let D=new Cr(this,this.j,c),S=this.o;if(this.S&&(S?(S=v(S),I(S,this.S)):S=this.S),this.m!==null||this.O||(D.H=S,S=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=PT(this,D,d),f=Hn(this.I),Te(f,"RID",c),Te(f,"CVER",22),this.D&&Te(f,"X-HTTP-Session-Id",this.D),Aa(this,f),S&&(this.O?d="headers="+encodeURIComponent(String(wT(S)))+"&"+d:this.m&&kp(f,this.m,S)),Pp(this.h,D),this.Ua&&Te(f,"TYPE","init"),this.P?(Te(f,"$req",d),Te(f,"SID","null"),D.T=!0,Ap(D,f,null)):Ap(D,f,d),this.G=2}}else this.G==3&&(c?NT(this,c):this.i.length==0||lT(this.h)||NT(this))};function NT(c,d){var f;d?f=d.l:f=c.U++;let m=Hn(c.I);Te(m,"SID",c.K),Te(m,"RID",f),Te(m,"AID",c.T),Aa(c,m),c.m&&c.o&&kp(m,c.m,c.o),f=new Cr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=PT(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Pp(c.h,f),Ap(f,m,d)}function Aa(c,d){c.H&&ce(c.H,function(f,m){Te(d,m,f)}),c.l&&pT({},function(f,m){Te(d,m,f)})}function PT(c,d,f){f=Math.min(c.i.length,f);var m=c.l?g(c.l.Na,c.l,c):null;e:{var D=c.i;let S=-1;for(;;){let O=["count="+f];S==-1?0<f?(S=D[0].g,O.push("ofs="+S)):S=0:O.push("ofs="+S);let ve=!0;for(let tt=0;tt<f;tt++){let fe=D[tt].g,ot=D[tt].map;if(fe-=S,0>fe)S=Math.max(0,D[tt].g-100),ve=!1;else try{TO(ot,O,"req"+fe+"_")}catch{m&&m(ot)}}if(ve){m=O.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,m}function kT(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;la||Bw(),da||(la(),da=!0),hp.add(d,c),c.v=0}}function Op(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=ya(g(c.Fa,c),xT(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,MT(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=ya(g(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),Wu(this),MT(this))};function xp(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function MT(c){c.g=new Cr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Hn(c.qa);Te(d,"RID","rpc"),Te(d,"SID",c.K),Te(d,"AID",c.T),Te(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Te(d,"TO",c.ja),Te(d,"TYPE","xmlhttp"),Aa(c,d),c.m&&c.o&&kp(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=qu(Hn(d)),f.m=null,f.P=!0,oT(f,c)}n.Za=function(){this.C!=null&&(this.C=null,Wu(this),Op(this),pt(19))};function Yu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function OT(c,d){var f=null;if(c.g==d){Yu(c),xp(c),c.g=null;var m=2}else if(Np(c.h,d))f=d.D,hT(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var D=c.B;m=Vu(),ft(m,new nT(m,f)),Ku(c)}else kT(c);else if(D=d.s,D==3||D==0&&0<d.X||!(m==1&&AO(c,d)||m==2&&Op(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),D){case 1:Di(c,5);break;case 4:Di(c,10);break;case 3:Di(c,6);break;default:Di(c,2)}}}function xT(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Di(c,d){if(c.j.info("Error code "+d),d==2){var f=g(c.fb,c),m=c.Xa;let D=!m;m=new bi(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Hu(m,"https"),qu(m),D?EO(m.toString(),f):IO(m.toString(),f)}else pt(2);c.G=0,c.l&&c.l.sa(d),LT(c),RT(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function LT(c){if(c.G=0,c.ka=[],c.l){let d=fT(c.h);(d.length!=0||c.i.length!=0)&&(A(c.ka,d),A(c.ka,c.i),c.h.i.length=0,R(c.i),c.i.length=0),c.l.ra()}}function FT(c,d,f){var m=f instanceof bi?Hn(f):new bi(f);if(m.g!="")d&&(m.g=d+"."+m.g),$u(m,m.s);else{var D=a.location;m=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;var S=new bi(null);m&&Hu(S,m),d&&(S.g=d),D&&$u(S,D),f&&(S.l=f),m=S}return f=c.D,d=c.ya,f&&d&&Te(m,f,d),Te(m,"VER",c.la),Aa(c,m),m}function VT(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Re(new Ta({eb:f})):new Re(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function UT(){}n=UT.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Qu(){}Qu.prototype.g=function(c,d){return new Ct(c,d)};function Ct(c,d){st.call(this),this.g=new ST(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!F(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!F(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Vs(this)}T(Ct,st),Ct.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ct.prototype.close=function(){Mp(this.g)},Ct.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Ip(c),c=f);d.i.push(new lO(d.Ya++,c)),d.G==3&&Ku(d)},Ct.prototype.N=function(){this.g.l=null,delete this.j,Mp(this.g),delete this.g,Ct.aa.N.call(this)};function jT(c){Tp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}T(jT,Tp);function BT(){bp.call(this),this.status=1}T(BT,bp);function Vs(c){this.g=c}T(Vs,UT),Vs.prototype.ua=function(){ft(this.g,"a")},Vs.prototype.ta=function(c){ft(this.g,new jT(c))},Vs.prototype.sa=function(c){ft(this.g,new BT)},Vs.prototype.ra=function(){ft(this.g,"b")},Qu.prototype.createWebChannel=Qu.prototype.g,Ct.prototype.send=Ct.prototype.o,Ct.prototype.open=Ct.prototype.m,Ct.prototype.close=Ct.prototype.close,TE=yr.createWebChannelTransport=function(){return new Qu},wE=yr.getStatEventTarget=function(){return Vu()},IE=yr.Event=wi,mf=yr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Uu.NO_ERROR=0,Uu.TIMEOUT=8,Uu.HTTP_ERROR=6,hu=yr.ErrorCode=Uu,rT.COMPLETE="complete",EE=yr.EventType=rT,Xw.EventType=ga,ga.OPEN="a",ga.CLOSE="b",ga.ERROR="c",ga.MESSAGE="d",st.prototype.listen=st.prototype.K,Vo=yr.WebChannel=Xw,pq=yr.FetchXmlHttpFactory=Ta,Re.prototype.listenOnce=Re.prototype.L,Re.prototype.getLastError=Re.prototype.Ka,Re.prototype.getLastErrorCode=Re.prototype.Ba,Re.prototype.getStatus=Re.prototype.Z,Re.prototype.getResponseJson=Re.prototype.Oa,Re.prototype.getResponseText=Re.prototype.oa,Re.prototype.send=Re.prototype.ea,Re.prototype.setWithCredentials=Re.prototype.Ha,_E=yr.XhrIo=Re}).apply(typeof gf<"u"?gf:typeof self<"u"?self:typeof window<"u"?window:{});var yP="@firebase/firestore",vP="4.8.0";var Xe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Xe.UNAUTHENTICATED=new Xe(null),Xe.GOOGLE_CREDENTIALS=new Xe("google-credentials-uid"),Xe.FIRST_PARTY=new Xe("first-party-uid"),Xe.MOCK_USER=new Xe("mock-user");var sa="11.10.0";var As=new Rn("@firebase/firestore");function Uo(){return As.logLevel}function L(n,...e){if(As.logLevel<=oe.DEBUG){let t=e.map(pw);As.debug(`Firestore (${sa}): ${n}`,...t)}}function _r(n,...e){if(As.logLevel<=oe.ERROR){let t=e.map(pw);As.error(`Firestore (${sa}): ${n}`,...t)}}function mi(n,...e){if(As.logLevel<=oe.WARN){let t=e.map(pw);As.warn(`Firestore (${sa}): ${n}`,...t)}}function pw(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function G(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,dk(n,r,t)}function dk(n,e,t){let r=`FIRESTORE (${sa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw _r(r),new Error(r)}function ye(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||dk(e,i,r)}function ee(n,e){return n}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},x=class extends Lt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var vr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Tf=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},SE=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Xe.UNAUTHENTICATED))}shutdown(){}},RE=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},NE=class{constructor(e){this.t=e,this.currentUser=Xe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ye(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),s=new vr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new vr,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{L("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(L("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new vr)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(L("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string",31837,{l:r}),new Tf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string",2055,{h:e}),new Xe(e)}},PE=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Xe.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},kE=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new PE(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Xe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},bf=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ME=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ft(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ye(this.o===void 0,3512);let r=s=>{s.error!=null&&L("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.m;return this.m=s.token,L("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{L("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.V.getImmediate({optional:!0});s?i(s):L("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new bf(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ye(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new bf(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function gq(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function hk(){return new TextEncoder}var vu=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=gq(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}};function se(n,e){return n<e?-1:n>e?1:0}function OE(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return se(r,i);{let s=hk(),o=mq(s.encode(_P(n,t)),s.encode(_P(e,t)));return o!==0?o:se(r,i)}}t+=r>65535?2:1}return se(n.length,e.length)}function _P(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function mq(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return se(n[t],e[t]);return se(n.length,e.length)}function Wo(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var EP="__name__",Df=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&G(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&G(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=n.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return se(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):OE(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return mr.fromString(e.substring(4,e.length-2))}},Se=class n extends Df{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new x(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},yq=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ut=class n extends Df{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return yq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===EP}static keyField(){return new n([EP])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new x(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new x(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new x(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new x(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var H=class n{constructor(e){this.path=e}static fromPath(e){return new n(Se.fromString(e))}static fromName(e){return new n(Se.fromString(e).popFirst(5))}static empty(){return new n(Se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Se.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Se(e.slice()))}};function fk(n,e,t){if(!t)throw new x(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function vq(n,e,t,r){if(e===!0&&r===!0)throw new x(N.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function IP(n){if(!H.isDocumentKey(n))throw new x(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function wP(n){if(H.isDocumentKey(n))throw new x(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function pk(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function np(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":G(12329,{type:typeof n})}function On(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new x(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=np(n);throw new x(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function $e(n,e){let t={typeString:n};return e&&(t.value=e),t}function Nu(n,e){if(!pk(n))throw new x(N.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let o=n[r];if(i&&typeof o!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new x(N.INVALID_ARGUMENT,t);return!0}var TP=-62135596800,bP=1e6,qe=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*bP);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new x(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new x(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<TP)throw new x(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new x(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bP}_compareTo(e){return this.seconds===e.seconds?se(this.nanoseconds,e.nanoseconds):se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Nu(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-TP;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};qe._jsonSchemaVersion="firestore/timestamp/1.0",qe._jsonSchema={type:$e("string",qe._jsonSchemaVersion),seconds:$e("number"),nanoseconds:$e("number")};var ne=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new qe(0,0))}static max(){return new n(new qe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var _u=-1,xE=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};xE.UNKNOWN_ID=-1;function _q(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ne.fromTimestamp(r===1e9?new qe(t+1,0):new qe(t,r));return new Ss(i,H.empty(),e)}function Eq(n){return new Ss(n.readTime,n.key,_u)}var Ss=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ne.min(),H.empty(),_u)}static max(){return new n(ne.max(),H.empty(),_u)}};function Iq(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=H.comparator(n.documentKey,e.documentKey),t!==0?t:se(n.largestBatchId,e.largestBatchId))}var wq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",LE=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function oa(n){if(n.code!==N.FAILED_PRECONDITION||n.message!==wq)throw n;L("LocalStore","Unexpectedly lost primary lease")}var k=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&G(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let l=u;t(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function Tq(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function aa(n){return n.name==="IndexedDbTransactionError"}var gw=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),mw=-1;function rp(n){return n==null}function Eu(n){return n===0&&1/n==-1/0}function bq(n){return typeof n=="number"&&Number.isInteger(n)&&!Eu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var gk="";function Dq(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=DP(e)),e=Cq(n.get(t),e);return DP(e)}function Cq(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let s=n.charAt(i);switch(s){case"\0":t+="";break;case gk:t+="";break;default:t+=s}}return t}function DP(n){return n+gk+""}var Aq="remoteDocuments",mk="owner";var yk="mutationQueues";var vk="mutations";var _k="documentMutations",Sq="remoteDocumentsV14";var Ek="remoteDocumentGlobal";var Ik="targets";var wk="targetDocuments";var Tk="targetGlobal",bk="collectionParents";var Dk="clientMetadata";var Ck="bundles";var Ak="namedQueries";var Rq="indexConfiguration";var Nq="indexState";var Pq="indexEntries";var Sk="documentOverlays";var kq="globals";var Mq=[yk,vk,_k,Aq,Ik,mk,Tk,wk,Dk,Ek,bk,Ck,Ak],Jde=[...Mq,Sk],Oq=[yk,vk,_k,Sq,Ik,mk,Tk,wk,Dk,Ek,bk,Ck,Ak,Sk],xq=Oq,Lq=[...xq,Rq,Nq,Pq];var Xde=[...Lq,kq];function CP(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ii(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Rk(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Oe=class n{constructor(e,t){this.comparator=e,this.root=t||xn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,xn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $o(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $o(this.root,e,this.comparator,!1)}getReverseIterator(){return new $o(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $o(this.root,e,this.comparator,!0)}},$o=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},xn=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw G(43730,{key:this.key,value:this.value});if(this.right.isRed())throw G(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw G(27949);return e+(this.isRed()?0:1)}};xn.EMPTY=null,xn.RED=!0,xn.BLACK=!1;xn.EMPTY=new class{constructor(){this.size=0}get key(){throw G(57766)}get value(){throw G(16141)}get color(){throw G(16727)}get left(){throw G(29726)}get right(){throw G(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new xn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ze=class n{constructor(e){this.comparator=e,this.data=new Oe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Cf(this.data.getIterator())}getIteratorFrom(e){return new Cf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Cf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Qt=class n{constructor(e){this.fields=e,e.sort(Ut.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ze(Ut.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wo(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Af=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var ht=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Af("Invalid base64 string: "+s):s}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};ht.EMPTY_BYTE_STRING=new ht("");var Fq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Er(n){if(ye(!!n,39018),typeof n=="string"){let e=0,t=Fq.exec(n);if(ye(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ae(n.seconds),nanos:Ae(n.nanos)}}function Ae(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ir(n){return typeof n=="string"?ht.fromBase64String(n):ht.fromUint8Array(n)}var Nk="server_timestamp",Pk="__type__",kk="__previous_value__",Mk="__local_write_time__";function yw(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Pk])===null||t===void 0?void 0:t.stringValue)===Nk}function ip(n){let e=n.mapValue.fields[kk];return yw(e)?ip(e):e}function Iu(n){let e=Er(n.mapValue.fields[Mk].timestampValue);return new qe(e.seconds,e.nanos)}var FE=class{constructor(e,t,r,i,s,o,a,u,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},Sf="(default)",Rf=class n{constructor(e,t){this.projectId=e,this.database=t||Sf}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===Sf}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var vw="__type__",Ok="__max__",yf={mapValue:{fields:{__type__:{stringValue:Ok}}}},_w="__vector__",Ko="value";function yi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?yw(n)?4:Lk(n)?9007199254740991:xk(n)?10:11:G(28295,{value:n})}function Un(n,e){if(n===e)return!0;let t=yi(n);if(t!==yi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Iu(n).isEqual(Iu(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Er(i.timestampValue),a=Er(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return Ir(i.bytesValue).isEqual(Ir(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return Ae(i.geoPointValue.latitude)===Ae(s.geoPointValue.latitude)&&Ae(i.geoPointValue.longitude)===Ae(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return Ae(i.integerValue)===Ae(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Ae(i.doubleValue),a=Ae(s.doubleValue);return o===a?Eu(o)===Eu(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return Wo(n.arrayValue.values||[],e.arrayValue.values||[],Un);case 10:case 11:return(function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(CP(o)!==CP(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Un(o[u],a[u])))return!1;return!0})(n,e);default:return G(52216,{left:n})}}function wu(n,e){return(n.values||[]).find(t=>Un(t,e))!==void 0}function Yo(n,e){if(n===e)return 0;let t=yi(n),r=yi(e);if(t!==r)return se(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return se(n.booleanValue,e.booleanValue);case 2:return(function(s,o){let a=Ae(s.integerValue||s.doubleValue),u=Ae(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(n,e);case 3:return AP(n.timestampValue,e.timestampValue);case 4:return AP(Iu(n),Iu(e));case 5:return OE(n.stringValue,e.stringValue);case 6:return(function(s,o){let a=Ir(s),u=Ir(o);return a.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(s,o){let a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=se(a[l],u[l]);if(h!==0)return h}return se(a.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,o){let a=se(Ae(s.latitude),Ae(o.latitude));return a!==0?a:se(Ae(s.longitude),Ae(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return SP(n.arrayValue,e.arrayValue);case 10:return(function(s,o){var a,u,l,h;let p=s.fields||{},g=o.fields||{},y=(a=p[Ko])===null||a===void 0?void 0:a.arrayValue,T=(u=g[Ko])===null||u===void 0?void 0:u.arrayValue,R=se(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=T?.values)===null||h===void 0?void 0:h.length)||0);return R!==0?R:SP(y,T)})(n.mapValue,e.mapValue);case 11:return(function(s,o){if(s===yf.mapValue&&o===yf.mapValue)return 0;if(s===yf.mapValue)return 1;if(o===yf.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let g=OE(u[p],h[p]);if(g!==0)return g;let y=Yo(a[u[p]],l[h[p]]);if(y!==0)return y}return se(u.length,h.length)})(n.mapValue,e.mapValue);default:throw G(23264,{le:t})}}function AP(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return se(n,e);let t=Er(n),r=Er(e),i=se(t.seconds,r.seconds);return i!==0?i:se(t.nanos,r.nanos)}function SP(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Yo(t[i],r[i]);if(s)return s}return se(t.length,r.length)}function Qo(n){return VE(n)}function VE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=Er(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ir(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return H.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=VE(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${VE(t.fields[o])}`;return i+"}"})(n.mapValue):G(61005,{value:n})}function Ef(n){switch(yi(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=ip(n);return e?16+Ef(e):16;case 5:return 2*n.stringValue.length;case 6:return Ir(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,s)=>i+Ef(s),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return Ii(r.fields,(s,o)=>{i+=s.length+Ef(o)}),i})(n.mapValue);default:throw G(13486,{value:n})}}function RP(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function UE(n){return!!n&&"integerValue"in n}function Ew(n){return!!n&&"arrayValue"in n}function NP(n){return!!n&&"nullValue"in n}function PP(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function If(n){return!!n&&"mapValue"in n}function xk(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[vw])===null||t===void 0?void 0:t.stringValue)===_w}function pu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Ii(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=pu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=pu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Lk(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Ok}var ehe={mapValue:{fields:{[vw]:{stringValue:_w},[Ko]:{arrayValue:{}}}}};var Vt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!If(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pu(t)}setAll(e){let t=Ut.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=pu(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());If(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Un(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];If(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ii(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(pu(this.value))}};function Fk(n){let e=[];return Ii(n.fields,(t,r)=>{let i=new Ut([t]);if(If(r)){let s=Fk(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Qt(e)}var fn=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ne.min(),ne.min(),ne.min(),Vt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ne.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ne.min(),ne.min(),Vt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ne.min(),ne.min(),Vt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Jo=class{constructor(e,t){this.position=e,this.inclusive=t}};function kP(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=H.comparator(H.fromName(o.referenceValue),t.key):r=Yo(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function MP(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Un(n.position[t],e.position[t]))return!1;return!0}var Rs=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Vq(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Nf=class{},He=class n extends Nf{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new BE(e,t,r):t==="array-contains"?new qE(e,r):t==="in"?new zE(e,r):t==="not-in"?new GE(e,r):t==="array-contains-any"?new WE(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new HE(e,r):new $E(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Yo(t,this.value)):t!==null&&yi(this.value)===yi(t)&&this.matchesComparison(Yo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},pn=class n extends Nf{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return Vk(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function Vk(n){return n.op==="and"}function Uk(n){return Uq(n)&&Vk(n)}function Uq(n){for(let e of n.filters)if(e instanceof pn)return!1;return!0}function jE(n){if(n instanceof He)return n.field.canonicalString()+n.op.toString()+Qo(n.value);if(Uk(n))return n.filters.map(e=>jE(e)).join(",");{let e=n.filters.map(t=>jE(t)).join(",");return`${n.op}(${e})`}}function jk(n,e){return n instanceof He?(function(r,i){return i instanceof He&&r.op===i.op&&r.field.isEqual(i.field)&&Un(r.value,i.value)})(n,e):n instanceof pn?(function(r,i){return i instanceof pn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&jk(o,i.filters[a]),!0):!1})(n,e):void G(19439)}function Bk(n){return n instanceof He?(function(t){return`${t.field.canonicalString()} ${t.op} ${Qo(t.value)}`})(n):n instanceof pn?(function(t){return t.op.toString()+" {"+t.getFilters().map(Bk).join(" ,")+"}"})(n):"Filter"}var BE=class extends He{constructor(e,t,r){super(e,t,r),this.key=H.fromName(r.referenceValue)}matches(e){let t=H.comparator(e.key,this.key);return this.matchesComparison(t)}},HE=class extends He{constructor(e,t){super(e,"in",t),this.keys=Hk("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},$E=class extends He{constructor(e,t){super(e,"not-in",t),this.keys=Hk("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Hk(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>H.fromName(r.referenceValue))}var qE=class extends He{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Ew(t)&&wu(t.arrayValue,this.value)}},zE=class extends He{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&wu(this.value.arrayValue,t)}},GE=class extends He{constructor(e,t){super(e,"not-in",t)}matches(e){if(wu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!wu(this.value.arrayValue,t)}},WE=class extends He{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Ew(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>wu(this.value.arrayValue,r))}};var KE=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Pe=null}};function OP(n,e=null,t=[],r=[],i=null,s=null,o=null){return new KE(n,e,t,r,i,s,o)}function Iw(n){let e=ee(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>jE(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(s){return s.field.canonicalString()+s.dir})(r)).join(","),rp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Qo(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Qo(r)).join(",")),e.Pe=t}return e.Pe}function ww(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Vq(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!jk(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!MP(n.startAt,e.startAt)&&MP(n.endAt,e.endAt)}function YE(n){return H.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var vi=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function jq(n,e,t,r,i,s,o,a){return new vi(n,e,t,r,i,s,o,a)}function Tw(n){return new vi(n)}function xP(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function $k(n){return n.collectionGroup!==null}function gu(n){let e=ee(n);if(e.Te===null){e.Te=[];let t=new Set;for(let s of e.explicitOrderBy)e.Te.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ze(Ut.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.Te.push(new Rs(s,r))}),t.has(Ut.keyField().canonicalString())||e.Te.push(new Rs(Ut.keyField(),r))}return e.Te}function Ln(n){let e=ee(n);return e.Ie||(e.Ie=Bq(e,gu(n))),e.Ie}function Bq(n,e){if(n.limitType==="F")return OP(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Rs(i.field,s)});let t=n.endAt?new Jo(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Jo(n.startAt.position,n.startAt.inclusive):null;return OP(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function QE(n,e){let t=n.filters.concat([e]);return new vi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function JE(n,e,t){return new vi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function sp(n,e){return ww(Ln(n),Ln(e))&&n.limitType===e.limitType}function qk(n){return`${Iw(Ln(n))}|lt:${n.limitType}`}function jo(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Bk(i)).join(", ")}]`),rp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Qo(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Qo(i)).join(",")),`Target(${r})`})(Ln(n))}; limitType=${n.limitType})`}function op(n,e){return e.isFoundDocument()&&(function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):H.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(let s of gu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(o,a,u){let l=kP(o,a,u);return o.inclusive?l<=0:l<0})(r.startAt,gu(r),i)||r.endAt&&!(function(o,a,u){let l=kP(o,a,u);return o.inclusive?l>=0:l>0})(r.endAt,gu(r),i))})(n,e)}function Hq(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function zk(n){return(e,t)=>{let r=!1;for(let i of gu(n)){let s=$q(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function $q(n,e,t){let r=n.field.isKeyField()?H.comparator(e.key,t.key):(function(s,o,a){let u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?Yo(u,l):G(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return G(19790,{direction:n.dir})}}var wr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ii(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return Rk(this.inner)}size(){return this.innerSize}};var qq=new Oe(H.comparator);function Tr(){return qq}var Gk=new Oe(H.comparator);function fu(...n){let e=Gk;for(let t of n)e=e.insert(t.key,t);return e}function Wk(n){let e=Gk;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ts(){return mu()}function Kk(){return mu()}function mu(){return new wr(n=>n.toString(),(n,e)=>n.isEqual(e))}var zq=new Oe(H.comparator),Gq=new Ze(H.comparator);function ae(...n){let e=Gq;for(let t of n)e=e.add(t);return e}var Wq=new Ze(se);function Kq(){return Wq}function bw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eu(e)?"-0":e}}function Yk(n){return{integerValue:""+n}}function Yq(n,e){return bq(e)?Yk(e):bw(n,e)}var Xo=class{constructor(){this._=void 0}};function Qq(n,e,t){return n instanceof Zo?(function(i,s){let o={fields:{[Pk]:{stringValue:Nk},[Mk]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&yw(s)&&(s=ip(s)),s&&(o.fields[kk]=s),{mapValue:o}})(t,e):n instanceof Ns?Jk(n,e):n instanceof Ps?Xk(n,e):(function(i,s){let o=Qk(i,s),a=LP(o)+LP(i.Ee);return UE(o)&&UE(i.Ee)?Yk(a):bw(i.serializer,a)})(n,e)}function Jq(n,e,t){return n instanceof Ns?Jk(n,e):n instanceof Ps?Xk(n,e):t}function Qk(n,e){return n instanceof ea?(function(r){return UE(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}var Zo=class extends Xo{},Ns=class extends Xo{constructor(e){super(),this.elements=e}};function Jk(n,e){let t=Zk(e);for(let r of n.elements)t.some(i=>Un(i,r))||t.push(r);return{arrayValue:{values:t}}}var Ps=class extends Xo{constructor(e){super(),this.elements=e}};function Xk(n,e){let t=Zk(e);for(let r of n.elements)t=t.filter(i=>!Un(i,r));return{arrayValue:{values:t}}}var ea=class extends Xo{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function LP(n){return Ae(n.integerValue||n.doubleValue)}function Zk(n){return Ew(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function Xq(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Ns&&i instanceof Ns||r instanceof Ps&&i instanceof Ps?Wo(r.elements,i.elements,Un):r instanceof ea&&i instanceof ea?Un(r.Ee,i.Ee):r instanceof Zo&&i instanceof Zo})(n.transform,e.transform)}var XE=class{constructor(e,t){this.version=e,this.transformResults=t}},Fn=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function wf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ta=class{};function eM(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Tu(n.key,Fn.none()):new ks(n.key,n.data,Fn.none());{let t=n.data,r=Vt.empty(),i=new Ze(Ut.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new jn(n.key,r,new Qt(i.toArray()),Fn.none())}}function Zq(n,e,t){n instanceof ks?(function(i,s,o){let a=i.value.clone(),u=VP(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof jn?(function(i,s,o){if(!wf(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=VP(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(tM(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()})(n,e,t):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function yu(n,e,t,r){return n instanceof ks?(function(s,o,a,u){if(!wf(s.precondition,o))return a;let l=s.value.clone(),h=UP(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof jn?(function(s,o,a,u){if(!wf(s.precondition,o))return a;let l=UP(s.fieldTransforms,u,o),h=o.data;return h.setAll(tM(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(s,o,a){return wf(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function ez(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=Qk(r.transform,i||null);s!=null&&(t===null&&(t=Vt.empty()),t.set(r.field,s))}return t||null}function FP(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Wo(r,i,(s,o)=>Xq(s,o))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var ks=class extends ta{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},jn=class extends ta{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function tM(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function VP(n,e,t){let r=new Map;ye(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Jq(o,a,t[i]))}return r}function UP(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,Qq(s,o,e))}return r}var Tu=class extends ta{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ZE=class extends ta{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var eI=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&Zq(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=yu(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=yu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Kk();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let u=eM(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ne.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ae())}isEqual(e){return this.batchId===e.batchId&&Wo(this.mutations,e.mutations,(t,r)=>FP(t,r))&&Wo(this.baseMutations,e.baseMutations,(t,r)=>FP(t,r))}},tI=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ye(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return zq})(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var nI=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var rI=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var je,le;function tz(n){switch(n){case N.OK:return G(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return G(15467,{code:n})}}function nM(n){if(n===void 0)return _r("GRPC error has no .code"),N.UNKNOWN;switch(n){case je.OK:return N.OK;case je.CANCELLED:return N.CANCELLED;case je.UNKNOWN:return N.UNKNOWN;case je.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case je.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case je.INTERNAL:return N.INTERNAL;case je.UNAVAILABLE:return N.UNAVAILABLE;case je.UNAUTHENTICATED:return N.UNAUTHENTICATED;case je.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case je.NOT_FOUND:return N.NOT_FOUND;case je.ALREADY_EXISTS:return N.ALREADY_EXISTS;case je.PERMISSION_DENIED:return N.PERMISSION_DENIED;case je.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case je.ABORTED:return N.ABORTED;case je.OUT_OF_RANGE:return N.OUT_OF_RANGE;case je.UNIMPLEMENTED:return N.UNIMPLEMENTED;case je.DATA_LOSS:return N.DATA_LOSS;default:return G(39323,{code:n})}}(le=je||(je={}))[le.OK=0]="OK",le[le.CANCELLED=1]="CANCELLED",le[le.UNKNOWN=2]="UNKNOWN",le[le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",le[le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",le[le.NOT_FOUND=5]="NOT_FOUND",le[le.ALREADY_EXISTS=6]="ALREADY_EXISTS",le[le.PERMISSION_DENIED=7]="PERMISSION_DENIED",le[le.UNAUTHENTICATED=16]="UNAUTHENTICATED",le[le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",le[le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",le[le.ABORTED=10]="ABORTED",le[le.OUT_OF_RANGE=11]="OUT_OF_RANGE",le[le.UNIMPLEMENTED=12]="UNIMPLEMENTED",le[le.INTERNAL=13]="INTERNAL",le[le.UNAVAILABLE=14]="UNAVAILABLE",le[le.DATA_LOSS=15]="DATA_LOSS";var jP=null;var nz=new mr([4294967295,4294967295],0);function BP(n){let e=hk().encode(n),t=new vE;return t.update(e),new Uint8Array(t.digest())}function HP(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new mr([t,r],0),new mr([i,s],0)]}var iI=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new bs(`Invalid padding: ${t}`);if(r<0)throw new bs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new bs(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new bs(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=mr.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(mr.fromNumber(r)));return i.compare(nz)===1&&(i=new mr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=BP(e),[r,i]=HP(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);if(!this.ye(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.fe===0)return;let t=BP(e),[r,i]=HP(t);for(let s=0;s<this.hashCount;s++){let o=this.pe(r,i,s);this.we(o)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},bs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Pf=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,bu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ne.min(),i,new Oe(se),Tr(),ae())}},bu=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ae(),ae(),ae())}};var qo=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},kf=class{constructor(e,t){this.targetId=e,this.De=t}},Mf=class{constructor(e,t,r=ht.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Of=class{constructor(){this.ve=0,this.Ce=$P(),this.Fe=ht.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ae(),t=ae(),r=ae();return this.Ce.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:G(38017,{changeType:s})}}),new bu(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=$P()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ye(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},sI=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=Tr(),this.je=vf(),this.Je=vf(),this.He=new Oe(se)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:G(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let s=i.target;if(YE(s))if(r===0){let o=new H(s.path);this.Xe(t,o,fn.newNoDocument(o,ne.min()))}else ye(r===1,20013,{expectedCount:r});else{let o=this.ot(t);if(o!==r){let a=this._t(e),u=a?this.ut(a,e,o):1;if(u!==0){this.rt(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}jP?.ct((function(h,p,g,y,T){var R,A,P,F,$,J;let xe={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},ce=p.unchangedNames;return ce&&(xe.bloomFilter={applied:T===0,hashCount:(R=ce?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(F=(P=(A=ce?.bits)===null||A===void 0?void 0:A.bitmap)===null||P===void 0?void 0:P.length)!==null&&F!==void 0?F:0,padding:(J=($=ce?.bits)===null||$===void 0?void 0:$.padding)!==null&&J!==void 0?J:0,mightContain:w=>{var v;return(v=y?.mightContain(w))!==null&&v!==void 0&&v}}),xe})(o,e.De,this.We.lt(),a,u))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=Ir(r).toUint8Array()}catch(u){if(u instanceof Af)return mi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new iI(o,i,s)}catch(u){return mi(u instanceof bs?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.We.lt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,s,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((s,o)=>{let a=this.st(o);if(a){if(s.current&&YE(a.target)){let u=new H(a.target.path);this.Tt(u).has(o)||this.It(o,u)||this.Xe(o,u,fn.newNoDocument(u,e))}s.Ne&&(t.set(o,s.Le()),s.ke())}});let r=ae();this.Je.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ze.forEach((s,o)=>o.setReadTime(e));let i=new Pf(e,t,this.He,this.ze,r);return this.ze=Tr(),this.je=vf(),this.Je=vf(),this.He=new Oe(se),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new Of,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Ze(se),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Ze(se),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||L("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Of),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function vf(){return new Oe(H.comparator)}function $P(){return new Oe(H.comparator)}var rz={asc:"ASCENDING",desc:"DESCENDING"},iz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sz={and:"AND",or:"OR"},oI=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function aI(n,e){return n.useProto3Json||rp(e)?e:{value:e}}function xf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rM(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function oz(n,e){return xf(n,e.toTimestamp())}function Vn(n){return ye(!!n,49232),ne.fromTimestamp((function(t){let r=Er(t);return new qe(r.seconds,r.nanos)})(n))}function Dw(n,e){return cI(n,e).canonicalString()}function cI(n,e){let t=(function(i){return new Se(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function iM(n){let e=Se.fromString(n);return ye(uM(e),10190,{key:e.toString()}),e}function uI(n,e){return Dw(n.databaseId,e.path)}function bE(n,e){let t=iM(e);if(t.get(1)!==n.databaseId.projectId)throw new x(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new x(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new H(oM(t))}function sM(n,e){return Dw(n.databaseId,e)}function az(n){let e=iM(n);return e.length===4?Se.emptyPath():oM(e)}function lI(n){return new Se(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function oM(n){return ye(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function qP(n,e,t){return{name:uI(n,e),fields:t.value.mapValue.fields}}function cz(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:G(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(l,h){return l.useProto3Json?(ye(h===void 0||typeof h=="string",58123),ht.fromBase64String(h||"")):(ye(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ht.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(l){let h=l.code===void 0?N.UNKNOWN:nM(l.code);return new x(h,l.message||"")})(o);t=new Mf(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=bE(n,r.document.name),s=Vn(r.document.updateTime),o=r.document.createTime?Vn(r.document.createTime):ne.min(),a=new Vt({mapValue:{fields:r.document.fields}}),u=fn.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new qo(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=bE(n,r.document),s=r.readTime?Vn(r.readTime):ne.min(),o=fn.newNoDocument(i,s),a=r.removedTargetIds||[];t=new qo([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=bE(n,r.document),s=r.removedTargetIds||[];t=new qo([],s,i,null)}else{if(!("filter"in e))return G(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new rI(i,s),a=r.targetId;t=new kf(a,o)}}return t}function uz(n,e){let t;if(e instanceof ks)t={update:qP(n,e.key,e.value)};else if(e instanceof Tu)t={delete:uI(n,e.key)};else if(e instanceof jn)t={update:qP(n,e.key,e.data),updateMask:vz(e.fieldMask)};else{if(!(e instanceof ZE))return G(16599,{Rt:e.type});t={verify:uI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(s,o){let a=o.transform;if(a instanceof Zo)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ns)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ps)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ea)return{fieldPath:o.field.canonicalString(),increment:a.Ee};throw G(20930,{transform:o.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:oz(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:G(27497)})(n,e.precondition)),t}function lz(n,e){return n&&n.length>0?(ye(e!==void 0,14353),n.map(t=>(function(i,s){let o=i.updateTime?Vn(i.updateTime):Vn(s);return o.isEqual(ne.min())&&(o=Vn(s)),new XE(o,i.transformResults||[])})(t,e))):[]}function dz(n,e){return{documents:[sM(n,e.path)]}}function hz(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=sM(n,i);let s=(function(l){if(l.length!==0)return cM(pn.create(l,"and"))})(e.filters);s&&(t.structuredQuery.where=s);let o=(function(l){if(l.length!==0)return l.map(h=>(function(g){return{field:Bo(g.field),direction:gz(g.dir)}})(h))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=aI(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:t,parent:i}}function fz(n){let e=az(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ye(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=(function(p){let g=aM(p);return g instanceof pn&&Uk(g)?g.getFilters():[g]})(t.where));let o=[];t.orderBy&&(o=(function(p){return p.map(g=>(function(T){return new Rs(Ho(T.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(T.direction))})(g))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let g;return g=typeof p=="object"?p.value:p,rp(g)?null:g})(t.limit));let u=null;t.startAt&&(u=(function(p){let g=!!p.before,y=p.values||[];return new Jo(y,g)})(t.startAt));let l=null;return t.endAt&&(l=(function(p){let g=!p.before,y=p.values||[];return new Jo(y,g)})(t.endAt)),jq(e,i,o,s,a,"F",u,l)}function pz(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function aM(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ho(t.unaryFilter.field);return He.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ho(t.unaryFilter.field);return He.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Ho(t.unaryFilter.field);return He.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Ho(t.unaryFilter.field);return He.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return G(61313);default:return G(60726)}})(n):n.fieldFilter!==void 0?(function(t){return He.create(Ho(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return G(58110);default:return G(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return pn.create(t.compositeFilter.filters.map(r=>aM(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return G(1026)}})(t.compositeFilter.op))})(n):G(30097,{filter:n})}function gz(n){return rz[n]}function mz(n){return iz[n]}function yz(n){return sz[n]}function Bo(n){return{fieldPath:n.canonicalString()}}function Ho(n){return Ut.fromServerFormat(n.fieldPath)}function cM(n){return n instanceof He?(function(t){if(t.op==="=="){if(PP(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NAN"}};if(NP(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(PP(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NOT_NAN"}};if(NP(t.value))return{unaryFilter:{field:Bo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bo(t.field),op:mz(t.op),value:t.value}}})(n):n instanceof pn?(function(t){let r=t.getFilters().map(i=>cM(i));return r.length===1?r[0]:{compositeFilter:{op:yz(t.op),filters:r}}})(n):G(54877,{filter:n})}function vz(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function uM(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Du=class n{constructor(e,t,r,i,s=ne.min(),o=ne.min(),a=ht.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var dI=class{constructor(e){this.gt=e}};function _z(n){let e=fz({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?JE(e,e.limit,"L"):e}var Lf=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Ae(e.integerValue));else if("doubleValue"in e){let r=Ae(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Eu(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Er(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Ir(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?Lk(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):xk(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):G(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let s=e.fields||{};this.Ct(t,53);let o=Ko,a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(Ae(a)),this.xt(o,t),this.Dt(s[o],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),H.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Lf.Ut=new Lf;var hI=class{constructor(){this.Dn=new fI}addToCollectionParentIndex(e,t){return this.Dn.add(t),k.resolve()}getCollectionParents(e,t){return k.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return k.resolve()}deleteFieldIndex(e,t){return k.resolve()}deleteAllFieldIndexes(e){return k.resolve()}createTargetIndexes(e,t){return k.resolve()}getDocumentsMatchingTarget(e,t){return k.resolve(null)}getIndexType(e,t){return k.resolve(0)}getFieldIndexes(e,t){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,t){return k.resolve(Ss.min())}getMinOffsetFromCollectionGroup(e,t){return k.resolve(Ss.min())}updateCollectionGroup(e,t,r){return k.resolve()}updateIndexEntries(e,t){return k.resolve()}},fI=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ze(Se.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ze(Se.comparator)).toArray()}};var the=new Uint8Array(0);var zP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lM=41943040,Yt=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Yt.DEFAULT_COLLECTION_PERCENTILE=10,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yt.DEFAULT=new Yt(lM,Yt.DEFAULT_COLLECTION_PERCENTILE,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yt.DISABLED=new Yt(-1,0,0);var Cu=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var GP="LruGarbageCollector",Ez=1048576;function WP([n,e],[t,r]){let i=se(n,t);return i===0?se(e,r):i}var pI=class{constructor(e){this.Tr=e,this.buffer=new Ze(WP),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();WP(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},gI=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){L(GP,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){aa(t)?L(GP,"Ignoring IndexedDB error during garbage collection: ",t):await oa(t)}await this.Rr(3e5)})}},mI=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return k.resolve(gw.ue);let r=new pI(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(L("LruGarbageCollector","Garbage collection skipped; disabled"),k.resolve(zP)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(L("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zP):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,s,o,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(L("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(s=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Uo()<=oe.DEBUG&&L("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),k.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}};function Iz(n,e){return new mI(n,e)}var yI=class{constructor(){this.changes=new wr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,fn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?k.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var vI=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var _I=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&yu(r.mutation,i,Qt.empty(),qe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ae()){let i=Ts();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=fu();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Ts();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ae()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Tr(),o=mu(),a=(function(){return mu()})();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof jn)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),yu(h.mutation,l,h.mutation.getFieldMask(),qe.now())):o.set(l.key,Qt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new vI(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=mu(),i=new Oe((o,a)=>o-a),s=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||Qt.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ae()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=Kk();h.forEach(g=>{if(!s.has(g)){let y=eM(t.get(g),r.get(g));y!==null&&p.set(g,y),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return k.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(o){return H.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):$k(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):k.resolve(Ts()),a=_u,u=s;return o.next(l=>k.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?k.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,ae())).next(h=>({batchId:a,changes:Wk(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new H(t)).next(r=>{let i=fu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=fu();return this.indexManager.getCollectionParents(e,s).next(a=>k.forEach(a,u=>{let l=(function(p,g){return new vi(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((u,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,fn.newInvalidDocument(h)))});let a=fu();return o.forEach((u,l)=>{let h=s.get(u);h!==void 0&&yu(h.mutation,l,Qt.empty(),qe.now()),op(t,l)&&(a=a.insert(u,l))}),a})}};var EI=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return k.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Vn(i.createTime)}})(t)),k.resolve()}getNamedQuery(e,t){return k.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:_z(i.bundledQuery),readTime:Vn(i.readTime)}})(t)),k.resolve()}};var II=class{constructor(){this.overlays=new Oe(H.comparator),this.kr=new Map}getOverlay(e,t){return k.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Ts();return k.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.wt(e,t,s)}),k.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.kr.delete(r)),k.resolve()}getOverlaysForCollection(e,t,r){let i=Ts(),s=t.length+1,o=new H(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return k.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Oe((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=Ts(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Ts(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return k.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new nI(t,r));let s=this.kr.get(t);s===void 0&&(s=ae(),this.kr.set(t,s)),this.kr.set(t,s.add(r.key))}};var wI=class{constructor(){this.sessionToken=ht.EMPTY_BYTE_STRING}getSessionToken(e){return k.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,k.resolve()}};var Au=class{constructor(){this.qr=new Ze(Be.Qr),this.$r=new Ze(Be.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new Be(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new Be(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new H(new Se([])),r=new Be(t,e),i=new Be(t,e+1),s=[];return this.$r.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new H(new Se([])),r=new Be(t,e),i=new Be(t,e+1),s=ae();return this.$r.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Be(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Be=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return H.comparator(e.key,t.key)||se(e.Hr,t.Hr)}static Ur(e,t){return se(e.Hr,t.Hr)||H.comparator(e.key,t.key)}};var TI=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Ze(Be.Qr)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new eI(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.Yr=this.Yr.add(new Be(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return k.resolve(o)}lookupMutationBatch(e,t){return k.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),s=i<0?0:i;return k.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?mw:this.er-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Be(t,0),i=new Be(t,Number.POSITIVE_INFINITY),s=[];return this.Yr.forEachInRange([r,i],o=>{let a=this.Zr(o.Hr);s.push(a)}),k.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ze(se);return t.forEach(i=>{let s=new Be(i,0),o=new Be(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([s,o],a=>{r=r.add(a.Hr)})}),k.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;H.isDocumentKey(s)||(s=s.child(""));let o=new Be(new H(s),0),a=new Ze(se);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},o),k.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ye(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return k.forEach(t.mutations,i=>{let s=new Be(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new Be(t,0),i=this.Yr.firstAfterOrEqual(r);return k.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var bI=class{constructor(e){this.ni=e,this.docs=(function(){return new Oe(H.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return k.resolve(r?r.document.mutableCopy():fn.newInvalidDocument(t))}getEntries(e,t){let r=Tr();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():fn.newInvalidDocument(i))}),k.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Tr(),o=t.path,a=new H(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Iq(Eq(h),r)<=0||(i.has(h.key)||op(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return k.resolve(s)}getAllFromCollectionGroup(e,t,r,i){G(9500)}ri(e,t){return k.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new DI(this)}getSize(e){return k.resolve(this.size)}},DI=class extends yI{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),k.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var CI=class{constructor(e){this.persistence=e,this.ii=new wr(t=>Iw(t),ww),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.si=0,this.oi=new Au,this.targetCount=0,this._i=Cu.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),k.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new Cu(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,k.resolve()}updateTargetData(e,t){return this.hr(t),k.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.ii.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),k.waitFor(s).next(()=>i)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return k.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),k.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),k.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),k.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return k.resolve(r)}containsKey(e,t){return k.resolve(this.oi.containsKey(t))}};var Ff=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new gw(0),this.ci=!1,this.ci=!0,this.li=new wI,this.referenceDelegate=e(this),this.hi=new CI(this),this.indexManager=new hI,this.remoteDocumentCache=(function(i){return new bI(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new dI(t),this.Ti=new EI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new II,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new TI(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){L("MemoryPersistence","Starting transaction:",e);let i=new AI(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,t){return k.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},AI=class extends LE{constructor(e){super(),this.currentSequenceNumber=e}},SI=class n{constructor(e){this.persistence=e,this.Ai=new Au,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw G(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),k.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),k.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),k.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.mi.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.mi,r=>{let i=H.fromPath(r);return this.fi(e,i).next(s=>{s||t.removeEntry(i,ne.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return k.or([()=>k.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},Vf=class n{constructor(e,t){this.persistence=e,this.gi=new wr(r=>Dq(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Iz(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return k.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return k.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(s=>s?k.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ri(e,o=>this.Sr(e,o,t).next(a=>{a||(r++,s.removeEntry(o,ne.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),k.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),k.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),k.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),k.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ef(e.data.value)),t}Sr(e,t,r){return k.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return k.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var RI=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=ae(),i=ae();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var NI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var PI=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return oR()?8:Tq(Qe())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.ps(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ys(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new NI;return this.ws(e,t,o).next(a=>{if(s.result=a,this.Rs)return this.Ss(e,t,o,a.size)})}).next(()=>s.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Uo()<=oe.DEBUG&&L("QueryEngine","SDK will not create cache indexes for query:",jo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),k.resolve()):(Uo()<=oe.DEBUG&&L("QueryEngine","Query:",jo(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Uo()<=oe.DEBUG&&L("QueryEngine","The SDK decides to create cache indexes for query:",jo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ln(t))):k.resolve())}ps(e,t){if(xP(t))return k.resolve(null);let r=Ln(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=JE(t,null,"F"),r=Ln(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ae(...s);return this.gs.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(t,a);return this.Ds(t,l,o,u.readTime)?this.ps(e,JE(t,null,"F")):this.vs(e,l,t,u)}))})))}ys(e,t,r,i){return xP(t)||i.isEqual(ne.min())?k.resolve(null):this.gs.getDocuments(e,r).next(s=>{let o=this.bs(t,s);return this.Ds(t,o,r,i)?k.resolve(null):(Uo()<=oe.DEBUG&&L("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),jo(t)),this.vs(e,o,t,_q(i,_u)).next(a=>a))})}bs(e,t){let r=new Ze(zk(e));return t.forEach((i,s)=>{op(e,s)&&(r=r.add(s))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ws(e,t,r){return Uo()<=oe.DEBUG&&L("QueryEngine","Using full collection scan to execute query:",jo(t)),this.gs.getDocumentsMatchingQuery(e,t,Ss.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Cw="LocalStore",wz=3e8,kI=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new Oe(se),this.Ms=new wr(s=>Iw(s),ww),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _I(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function Tz(n,e,t,r){return new kI(n,e,t,r)}async function dM(n,e){let t=ee(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=ae();for(let l of i){o.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:o,addedBatchIds:a}))})})}function bz(n,e){let t=ee(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,h){let p=l.batch,g=p.keys(),y=k.resolve();return g.forEach(T=>{y=y.next(()=>h.getEntry(u,T)).next(R=>{let A=l.docVersions.get(T);ye(A!==null,48541),R.version.compareTo(A)<0&&(p.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),h.addEntry(R)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=ae();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function hM(n){let e=ee(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function Dz(n,e){let t=ee(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(t.hi.removeMatchingKeys(s,h.removedDocuments,p).next(()=>t.hi.addMatchingKeys(s,h.addedDocuments,p)));let y=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(ht.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(R,A,P){return R.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=wz?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0})(g,y,h)&&a.push(t.hi.updateTargetData(s,y))});let u=Tr(),l=ae();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(Cz(s,o,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(ne.min())){let h=t.hi.getLastRemoteSnapshotVersion(s).next(p=>t.hi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return k.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(t.Fs=i,s))}function Cz(n,e,t){let r=ae(),i=ae();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Tr();return t.forEach((a,u)=>{let l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ne.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):L(Cw,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:o,ks:i}})}function Az(n,e){let t=ee(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=mw),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Sz(n,e){let t=ee(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(s=>s?(i=s,k.resolve(i)):t.hi.allocateTargetId(r).next(o=>(i=new Du(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function MI(n,e,t){let r=ee(n),i=r.Fs.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!aa(o))throw o;L(Cw,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function KP(n,e,t){let r=ee(n),i=ne.min(),s=ae();return r.persistence.runTransaction("Execute query","readwrite",o=>(function(u,l,h){let p=ee(u),g=p.Ms.get(h);return g!==void 0?k.resolve(p.Fs.get(g)):p.hi.getTargetData(l,h)})(r,o,Ln(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,t?i:ne.min(),t?s:ae())).next(a=>(Rz(r,Hq(e),a),{documents:a,qs:s})))}function Rz(n,e,t){let r=n.xs.get(e)||ne.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.xs.set(e,r)}var Uf=class{constructor(){this.activeTargetIds=Kq()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var OI=class{constructor(){this.Fo=new Uf,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Uf,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var xI=class{xo(e){}shutdown(){}};var YP="ConnectivityMonitor",jf=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){L(YP,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){L(YP,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var _f=null;function LI(){return _f===null?_f=(function(){return 268435456+Math.round(2147483648*Math.random())})():_f++,"0x"+_f.toString(16)}var DE="RestConnection",Nz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},FI=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Sf?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,s){let o=LI(),a=this.Go(e,t.toUriEncodedString());L(DE,`Sending RPC '${e}' ${o}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,s);let{host:l}=new URL(a),h=ei(l);return this.jo(e,a,u,r,h).then(p=>(L(DE,`Received RPC '${e}' ${o}: `,p),p),p=>{throw mi(DE,`RPC '${e}' ${o} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,s,o){return this.Wo(e,t,r,i,s)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+sa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Go(e,t){let r=Nz[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var VI=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var dt="WebChannelConnection",UI=class extends FI{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,s){let o=LI();return new Promise((a,u)=>{let l=new _E;l.setWithCredentials(!0),l.listenOnce(EE.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case hu.NO_ERROR:let p=l.getResponseJson();L(dt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),a(p);break;case hu.TIMEOUT:L(dt,`RPC '${e}' ${o} timed out`),u(new x(N.DEADLINE_EXCEEDED,"Request time out"));break;case hu.HTTP_ERROR:let g=l.getStatus();if(L(dt,`RPC '${e}' ${o} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let T=y?.error;if(T&&T.status&&T.message){let R=(function(P){let F=P.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(F)>=0?F:N.UNKNOWN})(T.status);u(new x(R,T.message))}else u(new x(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new x(N.UNAVAILABLE,"Connection failed."));break;default:G(9055,{c_:e,streamId:o,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{L(dt,`RPC '${e}' ${o} completed.`)}});let h=JSON.stringify(i);L(dt,`RPC '${e}' ${o} sending request:`,i),l.send(t,"POST",h,r,15)})}P_(e,t,r){let i=LI(),s=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=TE(),a=wE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=s.join("");L(dt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=o.createWebChannel(h,u);this.T_(p);let g=!1,y=!1,T=new VI({Ho:A=>{y?L(dt,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(g||(L(dt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),L(dt,`RPC '${e}' stream ${i} sending:`,A),p.send(A))},Yo:()=>p.close()}),R=(A,P,F)=>{A.listen(P,$=>{try{F($)}catch(J){setTimeout(()=>{throw J},0)}})};return R(p,Vo.EventType.OPEN,()=>{y||(L(dt,`RPC '${e}' stream ${i} transport opened.`),T.s_())}),R(p,Vo.EventType.CLOSE,()=>{y||(y=!0,L(dt,`RPC '${e}' stream ${i} transport closed`),T.__(),this.I_(p))}),R(p,Vo.EventType.ERROR,A=>{y||(y=!0,mi(dt,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),T.__(new x(N.UNAVAILABLE,"The operation could not be completed")))}),R(p,Vo.EventType.MESSAGE,A=>{var P;if(!y){let F=A.data[0];ye(!!F,16349);let $=F,J=$?.error||((P=$[0])===null||P===void 0?void 0:P.error);if(J){L(dt,`RPC '${e}' stream ${i} received error:`,J);let xe=J.status,ce=(function(E){let I=je[E];if(I!==void 0)return nM(I)})(xe),w=J.message;ce===void 0&&(ce=N.INTERNAL,w="Unknown error status: "+xe+" with message "+J.message),y=!0,T.__(new x(ce,w)),p.close()}else L(dt,`RPC '${e}' stream ${i} received:`,F),T.a_(F)}}),R(a,IE.STAT_EVENT,A=>{A.stat===mf.PROXY?L(dt,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===mf.NOPROXY&&L(dt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.o_()},0),T}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function CE(){return typeof document<"u"?document:null}function ap(n){return new oI(n,!0)}var Bf=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=s,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&L("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var QP="PersistentStream",Hf=class{constructor(e,t,r,i,s,o,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Bf(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(_r(t.toString()),_r("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new x(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return L(QP,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(L(QP,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},jI=class extends Hf{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=cz(this.serializer,e),r=(function(s){if(!("targetChange"in s))return ne.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ne.min():o.readTime?Vn(o.readTime):ne.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=lI(this.serializer),t.addTarget=(function(s,o){let a,u=o.target;if(a=YE(u)?{documents:dz(s,u)}:{query:hz(s,u).Vt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=rM(s,o.resumeToken);let l=aI(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ne.min())>0){a.readTime=xf(s,o.snapshotVersion.toTimestamp());let l=aI(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=pz(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=lI(this.serializer),t.removeTarget=e,this.k_(t)}},BI=class extends Hf{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=lz(e.writeResults,e.commitTime),r=Vn(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=lI(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>uz(this.serializer,r))};this.k_(t)}};var HI=class{},$I=class extends HI{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new x(N.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,cI(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new x(N.UNKNOWN,s.toString())})}Jo(e,t,r,i,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Jo(e,cI(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new x(N.UNKNOWN,o.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},qI=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(_r(t),this._a=!1):L("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var Ms="RemoteStore",zI=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=s,this.Ea.xo(o=>{r.enqueueAndForget(async()=>{xs(this)&&(L(Ms,"Restarting streams for network reachability change."),await(async function(u){let l=ee(u);l.Ia.add(4),await Pu(l),l.Aa.set("Unknown"),l.Ia.delete(4),await cp(l)})(this))})}),this.Aa=new qI(r,i)}};async function cp(n){if(xs(n))for(let e of n.da)await e(!0)}async function Pu(n){for(let e of n.da)await e(!1)}function fM(n,e){let t=ee(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Nw(t)?Rw(t):ca(t).x_()&&Sw(t,e))}function Aw(n,e){let t=ee(n),r=ca(t);t.Ta.delete(e),r.x_()&&pM(t,e),t.Ta.size===0&&(r.x_()?r.B_():xs(t)&&t.Aa.set("Unknown"))}function Sw(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ca(n).H_(e)}function pM(n,e){n.Ra.$e(e),ca(n).Y_(e)}function Rw(n){n.Ra=new sI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),ca(n).start(),n.Aa.aa()}function Nw(n){return xs(n)&&!ca(n).M_()&&n.Ta.size>0}function xs(n){return ee(n).Ia.size===0}function gM(n){n.Ra=void 0}async function Pz(n){n.Aa.set("Online")}async function kz(n){n.Ta.forEach((e,t)=>{Sw(n,e)})}async function Mz(n,e){gM(n),Nw(n)?(n.Aa.la(e),Rw(n)):n.Aa.set("Unknown")}async function Oz(n,e,t){if(n.Aa.set("Online"),e instanceof Mf&&e.state===2&&e.cause)try{await(async function(i,s){let o=s.cause;for(let a of s.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ta.delete(a),i.Ra.removeTarget(a))})(n,e)}catch(r){L(Ms,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await $f(n,r)}else if(e instanceof qo?n.Ra.Ye(e):e instanceof kf?n.Ra.it(e):n.Ra.et(e),!t.isEqual(ne.min()))try{let r=await hM(n.localStore);t.compareTo(r)>=0&&await(function(s,o){let a=s.Ra.Pt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=s.Ta.get(l);h&&s.Ta.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{let h=s.Ta.get(u);if(!h)return;s.Ta.set(u,h.withResumeToken(ht.EMPTY_BYTE_STRING,h.snapshotVersion)),pM(s,u);let p=new Du(h.target,u,l,h.sequenceNumber);Sw(s,p)}),s.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){L(Ms,"Failed to raise snapshot:",r),await $f(n,r)}}async function $f(n,e,t){if(!aa(e))throw e;n.Ia.add(1),await Pu(n),n.Aa.set("Offline"),t||(t=()=>hM(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{L(Ms,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await cp(n)})}function mM(n,e){return e().catch(t=>$f(n,t,e))}async function up(n){let e=ee(n),t=_i(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:mw;for(;xz(e);)try{let i=await Az(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,Lz(e,i)}catch(i){await $f(e,i)}yM(e)&&vM(e)}function xz(n){return xs(n)&&n.Pa.length<10}function Lz(n,e){n.Pa.push(e);let t=_i(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function yM(n){return xs(n)&&!_i(n).M_()&&n.Pa.length>0}function vM(n){_i(n).start()}async function Fz(n){_i(n).na()}async function Vz(n){let e=_i(n);for(let t of n.Pa)e.X_(t.mutations)}async function Uz(n,e,t){let r=n.Pa.shift(),i=tI.from(r,e,t);await mM(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await up(n)}async function jz(n,e){e&&_i(n).Z_&&await(async function(r,i){if((function(o){return tz(o)&&o!==N.ABORTED})(i.code)){let s=r.Pa.shift();_i(r).N_(),await mM(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await up(r)}})(n,e),yM(n)&&vM(n)}async function JP(n,e){let t=ee(n);t.asyncQueue.verifyOperationInProgress(),L(Ms,"RemoteStore received new credentials");let r=xs(t);t.Ia.add(3),await Pu(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await cp(t)}async function Bz(n,e){let t=ee(n);e?(t.Ia.delete(2),await cp(t)):e||(t.Ia.add(2),await Pu(t),t.Aa.set("Unknown"))}function ca(n){return n.Va||(n.Va=(function(t,r,i){let s=ee(t);return s.ia(),new jI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:Pz.bind(null,n),e_:kz.bind(null,n),n_:Mz.bind(null,n),J_:Oz.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),Nw(n)?Rw(n):n.Aa.set("Unknown")):(await n.Va.stop(),gM(n))})),n.Va}function _i(n){return n.ma||(n.ma=(function(t,r,i){let s=ee(t);return s.ia(),new BI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:Fz.bind(null,n),n_:jz.bind(null,n),ea:Vz.bind(null,n),ta:Uz.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await up(n)):(await n.ma.stop(),n.Pa.length>0&&(L(Ms,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}var GI=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new x(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Pw(n,e){if(_r("AsyncQueue",`${e}: ${n}`),aa(n))return new x(N.UNAVAILABLE,`${e}: ${n}`);throw n}var qf=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||H.comparator(t.key,r.key):(t,r)=>H.comparator(t.key,r.key),this.keyedMap=fu(),this.sortedSet=new Oe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var zf=class{constructor(){this.fa=new Oe(H.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):G(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},na=class n{constructor(e,t,r,i,s,o,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,qf.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var WI=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},KI=class{constructor(){this.queries=XP(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=ee(t),s=i.queries;i.queries=XP(),s.forEach((o,a)=>{for(let u of a.wa)u.onError(r)})})(this,new x(N.ABORTED,"Firestore shutting down"))}};function XP(){return new wr(n=>qk(n),sp)}async function Hz(n,e){let t=ee(n),r=3,i=e.query,s=t.queries.get(i);s?!s.Sa()&&e.ba()&&(r=2):(s=new WI,r=e.ba()?0:1);try{switch(r){case 0:s.ya=await t.onListen(i,!0);break;case 1:s.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(o){let a=Pw(o,`Initialization of query '${jo(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.wa.push(e),e.va(t.onlineState),s.ya&&e.Ca(s.ya)&&kw(t)}async function $z(n,e){let t=ee(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.wa.indexOf(e);o>=0&&(s.wa.splice(o,1),s.wa.length===0?i=e.ba()?0:1:!s.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function qz(n,e){let t=ee(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.wa)a.Ca(i)&&(r=!0);o.ya=i}}r&&kw(t)}function zz(n,e,t){let r=ee(n),i=r.queries.get(e);if(i)for(let s of i.wa)s.onError(t);r.queries.delete(e)}function kw(n){n.Da.forEach(e=>{e.next()})}var YI,ZP;(ZP=YI||(YI={})).Fa="default",ZP.Cache="cache";var QI=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new na(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=na.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==YI.Cache}};var Gf=class{constructor(e){this.key=e}},Wf=class{constructor(e){this.key=e}},JI=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ae(),this.mutatedKeys=ae(),this.Xa=zk(e),this.eu=new qf(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new zf,i=t?t.eu:this.eu,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=op(this.query,p)?p:null,T=!!g&&this.mutatedKeys.has(g.key),R=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),A=!1;g&&y?g.data.isEqual(y.data)?T!==R&&(r.track({type:3,doc:y}),A=!0):this.iu(g,y)||(r.track({type:2,doc:y}),A=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),A=!0):g&&!y&&(r.track({type:1,doc:g}),A=!0,(u||l)&&(a=!0)),A&&(y?(o=o.add(y),s=R?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{eu:o,ru:r,Ds:a,mutatedKeys:s}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let o=e.ru.pa();o.sort((h,p)=>(function(y,T){let R=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G(20277,{At:A})}};return R(y)-R(T)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,o.length!==0||l?{snapshot:new na(this.query,e.eu,s,o,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new zf,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=ae(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new Wf(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new Gf(r))}),t}uu(e){this.Ha=e.qs,this.Za=ae();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return na.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},Mw="SyncEngine",XI=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},ZI=class{constructor(e){this.key=e,this.lu=!1}},ew=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.hu={},this.Pu=new wr(a=>qk(a),sp),this.Tu=new Map,this.Iu=new Set,this.du=new Oe(H.comparator),this.Eu=new Map,this.Au=new Au,this.Ru={},this.Vu=new Map,this.mu=Cu.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function Gz(n,e,t=!0){let r=bM(n),i,s=r.Pu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.cu()):i=await _M(r,e,t,!0),i}async function Wz(n,e){let t=bM(n);await _M(t,e,!0,!1)}async function _M(n,e,t,r){let i=await Sz(n.localStore,Ln(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=await Kz(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&fM(n.remoteStore,i),a}async function Kz(n,e,t,r,i){n.gu=(p,g,y)=>(async function(R,A,P,F){let $=A.view.nu(P);$.Ds&&($=await KP(R.localStore,A.query,!1).then(({documents:w})=>A.view.nu(w,$)));let J=F&&F.targetChanges.get(A.targetId),xe=F&&F.targetMismatches.get(A.targetId)!=null,ce=A.view.applyChanges($,R.isPrimaryClient,J,xe);return tk(R,A.targetId,ce._u),ce.snapshot})(n,p,g,y);let s=await KP(n.localStore,e,!0),o=new JI(e,s.qs),a=o.nu(s.documents),u=bu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,u);tk(n,t,l._u);let h=new XI(e,t,o);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot}async function Yz(n,e,t){let r=ee(n),i=r.Pu.get(e),s=r.Tu.get(i.targetId);if(s.length>1)return r.Tu.set(i.targetId,s.filter(o=>!sp(o,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await MI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Aw(r.remoteStore,i.targetId),tw(r,i.targetId)}).catch(oa)):(tw(r,i.targetId),await MI(r.localStore,i.targetId,!0))}async function Qz(n,e){let t=ee(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Aw(t.remoteStore,r.targetId))}async function Jz(n,e,t){let r=iG(n);try{let i=await(function(o,a){let u=ee(o),l=qe.now(),h=a.reduce((y,T)=>y.add(T.key),ae()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let T=Tr(),R=ae();return u.Os.getEntries(y,h).next(A=>{T=A,T.forEach((P,F)=>{F.isValidDocument()||(R=R.add(P))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,T)).next(A=>{p=A;let P=[];for(let F of a){let $=ez(F,p.get(F.key).overlayedDocument);$!=null&&P.push(new jn(F.key,$,Fk($.value.mapValue),Fn.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,P,a)}).next(A=>{g=A;let P=A.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(y,A.batchId,P)})}).then(()=>({batchId:g.batchId,changes:Wk(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,a,u){let l=o.Ru[o.currentUser.toKey()];l||(l=new Oe(se)),l=l.insert(a,u),o.Ru[o.currentUser.toKey()]=l})(r,i.batchId,t),await ku(r,i.changes),await up(r.remoteStore)}catch(i){let s=Pw(i,"Failed to persist write");t.reject(s)}}async function EM(n,e){let t=ee(n);try{let r=await Dz(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Eu.get(s);o&&(ye(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.lu=!0:i.modifiedDocuments.size>0?ye(o.lu,14607):i.removedDocuments.size>0&&(ye(o.lu,42227),o.lu=!1))}),await ku(t,r,e)}catch(r){await oa(r)}}function ek(n,e,t){let r=ee(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((s,o)=>{let a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(o,a){let u=ee(o);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let g of p.wa)g.va(a)&&(l=!0)}),l&&kw(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Xz(n,e,t){let r=ee(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),s=i&&i.key;if(s){let o=new Oe(H.comparator);o=o.insert(s,fn.newNoDocument(s,ne.min()));let a=ae().add(s),u=new Pf(ne.min(),new Map,new Oe(se),o,a);await EM(r,u),r.du=r.du.remove(s),r.Eu.delete(e),Ow(r)}else await MI(r.localStore,e,!1).then(()=>tw(r,e,t)).catch(oa)}async function Zz(n,e){let t=ee(n),r=e.batch.batchId;try{let i=await bz(t.localStore,e);wM(t,r,null),IM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await ku(t,i)}catch(i){await oa(i)}}async function eG(n,e,t){let r=ee(n);try{let i=await(function(o,a){let u=ee(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(ye(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);wM(r,e,t),IM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await ku(r,i)}catch(i){await oa(i)}}function IM(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function wM(n,e,t){let r=ee(n),i=r.Ru[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function tw(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||TM(n,r)})}function TM(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(Aw(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Ow(n))}function tk(n,e,t){for(let r of t)r instanceof Gf?(n.Au.addReference(r.key,e),tG(n,r)):r instanceof Wf?(L(Mw,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||TM(n,r.key)):G(19791,{yu:r})}function tG(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(L(Mw,"New document in limbo: "+t),n.Iu.add(r),Ow(n))}function Ow(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new H(Se.fromString(e)),r=n.mu.next();n.Eu.set(r,new ZI(t)),n.du=n.du.insert(t,r),fM(n.remoteStore,new Du(Ln(Tw(t.path)),r,"TargetPurposeLimboResolution",gw.ue))}}async function ku(n,e,t){let r=ee(n),i=[],s=[],o=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{o.push(r.gu(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=RI.Es(u.targetId,l);s.push(p)}}))}),await Promise.all(o),r.hu.J_(i),await(async function(u,l){let h=ee(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>k.forEach(l,g=>k.forEach(g.Is,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>k.forEach(g.ds,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!aa(p))throw p;L(Cw,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.Fs.get(g),T=y.snapshotVersion,R=y.withLastLimboFreeSnapshotVersion(T);h.Fs=h.Fs.insert(g,R)}}})(r.localStore,s))}async function nG(n,e){let t=ee(n);if(!t.currentUser.isEqual(e)){L(Mw,"User change. New user:",e.toKey());let r=await dM(t.localStore,e);t.currentUser=e,(function(s,o){s.Vu.forEach(a=>{a.forEach(u=>{u.reject(new x(N.CANCELLED,o))})}),s.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ku(t,r.Bs)}}function rG(n,e){let t=ee(n),r=t.Eu.get(e);if(r&&r.lu)return ae().add(r.key);{let i=ae(),s=t.Tu.get(e);if(!s)return i;for(let o of s){let a=t.Pu.get(o);i=i.unionWith(a.view.tu)}return i}}function bM(n){let e=ee(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=EM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rG.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Xz.bind(null,e),e.hu.J_=qz.bind(null,e.eventManager),e.hu.pu=zz.bind(null,e.eventManager),e}function iG(n){let e=ee(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Zz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eG.bind(null,e),e}var DM=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=ap(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,r){return null}Fu(t,r){return null}vu(t){return Tz(this.persistence,new PI,t.initialUser,this.serializer)}Du(t){return new Ff(SI.Vi,this.serializer)}bu(t){return new OI}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),nw=class extends DM{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){ye(this.persistence.referenceDelegate instanceof Vf,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new gI(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?Yt.withCacheSize(this.cacheSizeBytes):Yt.DEFAULT;return new Ff(r=>Vf.Vi(r,t),this.serializer)}};var sG=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ek(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=nG.bind(null,this.syncEngine),await Bz(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new KI})()}createDatastore(t){let r=ap(t.databaseInfo.databaseId),i=(function(o){return new UI(o)})(t.databaseInfo);return(function(o,a,u,l){return new $I(o,a,u,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,s,o,a,u){return new zI(i,s,o,a,u)})(this.localStore,this.datastore,t.asyncQueue,r=>ek(this.syncEngine,r,0),(function(){return jf.C()?new jf:new xI})())}createSyncEngine(t,r){return(function(s,o,a,u,l,h,p){let g=new ew(s,o,a,u,l,h);return p&&(g.fu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await(async function(s){let o=ee(s);L(Ms,"RemoteStore shutting down."),o.Ia.add(5),await Pu(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return n.provider={build:()=>new n},n})();var rw=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):_r("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var Ei="FirestoreClient",iw=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Xe.UNAUTHENTICATED,this.clientId=vu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{L(Ei,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(L(Ei,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Pw(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function AE(n,e){n.asyncQueue.verifyOperationInProgress(),L(Ei,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await dM(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{mi("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{L("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{mi("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function nk(n,e){n.asyncQueue.verifyOperationInProgress();let t=await oG(n);L(Ei,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>JP(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>JP(e.remoteStore,i)),n._onlineComponents=e}async function oG(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){L(Ei,"Using user provided OfflineComponentProvider");try{await AE(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;mi("Error using user provided cache. Falling back to memory cache: "+t),await AE(n,new DM)}}else L(Ei,"Using default OfflineComponentProvider"),await AE(n,new nw(void 0));return n._offlineComponents}async function CM(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(L(Ei,"Using user provided OnlineComponentProvider"),await nk(n,n._uninitializedComponentsProvider._online)):(L(Ei,"Using default OnlineComponentProvider"),await nk(n,new sG))),n._onlineComponents}function aG(n){return CM(n).then(e=>e.syncEngine)}async function rk(n){let e=await CM(n),t=e.eventManager;return t.onListen=Gz.bind(null,e.syncEngine),t.onUnlisten=Yz.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Wz.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Qz.bind(null,e.syncEngine),t}function AM(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var ik=new Map;var SM="firestore.googleapis.com",sk=!0,Kf=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new x(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=SM,this.ssl=sk}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:sk;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=lM;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Ez)throw new x(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=AM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new x(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new x(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new x(N.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ra=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new x(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new x(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new SE;switch(r.type){case"firstParty":return new kE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new x(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=ik.get(t);r&&(L("ComponentProvider","Removing Datastore"),ik.delete(t),r.terminate())})(this),Promise.resolve()}};function RM(n,e,t,r={}){var i;n=On(n,ra);let s=ei(e),o=n._getSettings(),a=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;s&&(Ah(`https://${u}`),Sh("Firestore",!0)),o.host!==SM&&o.host!==u&&mi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},o),{host:u,ssl:s,emulatorOptions:r});if(!Sn(l,a)&&(n._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Xe.MOCK_USER;else{h=eR(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new x(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Xe(g)}n._authCredentials=new RE(new Tf(h,p))}}var Os=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},et=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new hi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Nu(t,n._jsonSchema))return new n(e,r||null,new H(Se.fromString(t.referencePath)))}};et._jsonSchemaVersion="firestore/documentReference/1.0",et._jsonSchema={type:$e("string",et._jsonSchemaVersion),referencePath:$e("string")};var hi=class n extends Os{constructor(e,t,r){super(e,t,Tw(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new et(this.firestore,null,new H(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function NM(n,e,...t){if(n=Ue(n),fk("collection","path",e),n instanceof ra){let r=Se.fromString(e,...t);return wP(r),new hi(n,null,r)}{if(!(n instanceof et||n instanceof hi))throw new x(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Se.fromString(e,...t));return wP(r),new hi(n.firestore,null,r)}}function xw(n,e,...t){if(n=Ue(n),arguments.length===1&&(e=vu.newId()),fk("doc","path",e),n instanceof ra){let r=Se.fromString(e,...t);return IP(r),new et(n,null,new H(r))}{if(!(n instanceof et||n instanceof hi))throw new x(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Se.fromString(e,...t));return IP(r),new et(n.firestore,n instanceof hi?n.converter:null,new H(r))}}var ok="AsyncQueue",Yf=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Bf(this,"async_queue_retry"),this.oc=()=>{let r=CE();r&&L(ok,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=CE();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=CE();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new vr;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!aa(e))throw e;L(ok,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,_r("INTERNAL UNHANDLED ERROR: ",ak(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=GI.createAndSchedule(this,e,t,r,s=>this.lc(s));return this.ec.push(i),i}ac(){this.tc&&G(47125,{hc:ak(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function ak(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function ck(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(n,["next","error","complete"])}var br=class extends ra{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Yf,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Yf(e),this._firestoreClient=void 0,await e}}};function PM(n,e){let t=typeof n=="object"?n:hs(),r=typeof n=="string"?n:e||Sf,i=Ro(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Z0("firestore");s&&RM(i,...s)}return i}function kM(n){if(n._terminated)throw new x(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||cG(n),n._firestoreClient}function cG(n){var e,t,r;let i=n._freezeSettings(),s=(function(a,u,l,h){return new FE(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,AM(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new iw(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}})(n._componentsProvider))}var fi=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(ht.fromBase64String(e))}catch(t){throw new x(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Nu(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};fi._jsonSchemaVersion="firestore/bytes/1.0",fi._jsonSchema={type:$e("string",fi._jsonSchemaVersion),bytes:$e("string")};var ia=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new x(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Su=class{constructor(e){this._methodName=e}};var pi=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new x(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new x(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return se(this._lat,e._lat)||se(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Nu(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};pi._jsonSchemaVersion="firestore/geoPoint/1.0",pi._jsonSchema={type:$e("string",pi._jsonSchemaVersion),latitude:$e("number"),longitude:$e("number")};var gi=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Nu(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new x(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};gi._jsonSchemaVersion="firestore/vectorValue/1.0",gi._jsonSchema={type:$e("string",gi._jsonSchemaVersion),vectorValues:$e("object")};var uG=/^__.*__$/,sw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new jn(e,this.data,this.fieldMask,t,this.fieldTransforms):new ks(e,this.data,t,this.fieldTransforms)}},Qf=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new jn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function MM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G(40011,{Ec:n})}}var ow=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Ac(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Xf(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(MM(this.Ec)&&uG.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},aw=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ap(e)}Dc(e,t,r,i=!1){return new ow({Ec:e,methodName:t,bc:r,path:Ut.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function lp(n){let e=n._freezeSettings(),t=ap(n._databaseId);return new aw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function OM(n,e,t,r,i,s={}){let o=n.Dc(s.merge||s.mergeFields?2:0,e,t,i);Lw("Data must be an object, but it was:",o,r);let a=xM(r,o),u,l;if(s.merge)u=new Qt(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let g=cw(e,p,t);if(!o.contains(g))throw new x(N.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);FM(h,g)||h.push(g)}u=new Qt(h),l=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=o.fieldTransforms;return new sw(new Vt(a),u,l)}var Jf=class n extends Su{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function lG(n,e,t,r){let i=n.Dc(1,e,t);Lw("Data must be an object, but it was:",i,r);let s=[],o=Vt.empty();Ii(r,(u,l)=>{let h=Fw(e,u,t);l=Ue(l);let p=i.gc(h);if(l instanceof Jf)s.push(h);else{let g=Mu(l,p);g!=null&&(s.push(h),o.set(h,g))}});let a=new Qt(s);return new Qf(o,a,i.fieldTransforms)}function dG(n,e,t,r,i,s){let o=n.Dc(1,e,t),a=[cw(e,r,t)],u=[i];if(s.length%2!=0)throw new x(N.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)a.push(cw(e,s[g])),u.push(s[g+1]);let l=[],h=Vt.empty();for(let g=a.length-1;g>=0;--g)if(!FM(l,a[g])){let y=a[g],T=u[g];T=Ue(T);let R=o.gc(y);if(T instanceof Jf)l.push(y);else{let A=Mu(T,R);A!=null&&(l.push(y),h.set(y,A))}}let p=new Qt(l);return new Qf(h,p,o.fieldTransforms)}function hG(n,e,t,r=!1){return Mu(t,n.Dc(r?4:3,e))}function Mu(n,e){if(LM(n=Ue(n)))return Lw("Unsupported field value:",e,n),xM(n,e);if(n instanceof Su)return(function(r,i){if(!MM(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let s=[],o=0;for(let a of r){let u=Mu(a,i.yc(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=Ue(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Yq(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=qe.fromDate(r);return{timestampValue:xf(i.serializer,s)}}if(r instanceof qe){let s=new qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:xf(i.serializer,s)}}if(r instanceof pi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof fi)return{bytesValue:rM(i.serializer,r._byteString)};if(r instanceof et){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.wc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Dw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof gi)return(function(o,a){return{mapValue:{fields:{[vw]:{stringValue:_w},[Ko]:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return bw(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${np(r)}`)})(n,e)}function xM(n,e){let t={};return Rk(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ii(n,(r,i)=>{let s=Mu(i,e.Vc(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function LM(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof qe||n instanceof pi||n instanceof fi||n instanceof et||n instanceof Su||n instanceof gi)}function Lw(n,e,t){if(!LM(t)||!pk(t)){let r=np(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function cw(n,e,t){if((e=Ue(e))instanceof ia)return e._internalPath;if(typeof e=="string")return Fw(n,e);throw Xf("Field path arguments must be of type string or ",n,!1,void 0,t)}var fG=new RegExp("[~\\*/\\[\\]]");function Fw(n,e,t){if(e.search(fG)>=0)throw Xf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ia(...e.split("."))._internalPath}catch{throw Xf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Xf(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new x(N.INVALID_ARGUMENT,a+n+u)}function FM(n,e){return n.some(t=>t.isEqual(e))}var Zf=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new uw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Vw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},uw=class extends Zf{data(){return super.data()}};function Vw(n,e){return typeof e=="string"?Fw(n,e):e instanceof ia?e._internalPath:e._delegate._internalPath}function pG(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new x(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ru=class{},ep=class extends Ru{};function VM(n,e,...t){let r=[];e instanceof Ru&&r.push(e),r=r.concat(t),(function(s){let o=s.filter(u=>u instanceof dw).length,a=s.filter(u=>u instanceof lw).length;if(o>1||o>0&&a>0)throw new x(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var lw=class n extends ep{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return jM(e._query,t),new Os(e.firestore,e.converter,QE(e._query,t))}_parse(e){let t=lp(e.firestore);return(function(s,o,a,u,l,h,p){let g;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new x(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){lk(p,h);let T=[];for(let R of p)T.push(uk(u,s,R));g={arrayValue:{values:T}}}else g=uk(u,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||lk(p,h),g=hG(a,o,p,h==="in"||h==="not-in");return He.create(l,h,g)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var dw=class n extends Ru{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:pn.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let o=i,a=s.getFlattenedFilters();for(let u of a)jM(o,u),o=QE(o,u)})(e._query,t),new Os(e.firestore,e.converter,QE(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var hw=class n extends ep{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,s,o){if(i.startAt!==null)throw new x(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new x(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Rs(s,o)})(e._query,this._field,this._direction);return new Os(e.firestore,e.converter,(function(i,s){let o=i.explicitOrderBy.concat([s]);return new vi(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function UM(n,e="asc"){let t=e,r=Vw("orderBy",n);return hw._create(r,t)}function uk(n,e,t){if(typeof(t=Ue(t))=="string"){if(t==="")throw new x(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$k(e)&&t.indexOf("/")!==-1)throw new x(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Se.fromString(t));if(!H.isDocumentKey(r))throw new x(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return RP(n,new H(r))}if(t instanceof et)return RP(n,t._key);throw new x(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${np(t)}.`)}function lk(n,e){if(!Array.isArray(n)||n.length===0)throw new x(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function jM(n,e){let t=(function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new x(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new x(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var fw=class{convertValue(e,t="none"){switch(yi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ae(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ir(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw G(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Ii(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[Ko].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ae(o.doubleValue));return new gi(s)}convertGeoPoint(e){return new pi(Ae(e.latitude),Ae(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=ip(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Iu(e));default:return null}}convertTimestamp(e){let t=Er(e);return new qe(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Se.fromString(e);ye(uM(r),9688,{name:e});let i=new Rf(r.get(1),r.get(3)),s=new H(r.popFirst(5));return i.isEqual(t)||_r(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function BM(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Ds=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Cs=class n extends Zf{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new zo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Vw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new x(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};Cs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Cs._jsonSchema={type:$e("string",Cs._jsonSchemaVersion),bundleSource:$e("string","DocumentSnapshot"),bundleName:$e("string"),bundle:$e("string")};var zo=class extends Cs{data(e={}){return super.data(e)}},Go=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ds(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new zo(this._firestore,this._userDataWriter,r.key,r,new Ds(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new x(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let u=new zo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ds(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let u=new zo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ds(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:gG(a.type),doc:u,oldIndex:l,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new x(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=vu.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function gG(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G(61501,{type:n})}}Go._jsonSchemaVersion="firestore/querySnapshot/1.0",Go._jsonSchema={type:$e("string",Go._jsonSchemaVersion),bundleSource:$e("string","QuerySnapshot"),bundleName:$e("string"),bundle:$e("string")};var tp=class extends fw{constructor(e){super(),this.firestore=e}convertBytes(e){return new fi(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new et(this.firestore,null,t)}};function HM(n,e,t){n=On(n,et);let r=On(n.firestore,br),i=BM(n.converter,e,t);return dp(r,[OM(lp(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Fn.none())])}function $M(n,e,t,...r){n=On(n,et);let i=On(n.firestore,br),s=lp(i),o;return o=typeof(e=Ue(e))=="string"||e instanceof ia?dG(s,"updateDoc",n._key,e,t,r):lG(s,"updateDoc",n._key,e),dp(i,[o.toMutation(n._key,Fn.exists(!0))])}function qM(n){return dp(On(n.firestore,br),[new Tu(n._key,Fn.none())])}function zM(n,e){let t=On(n.firestore,br),r=xw(n),i=BM(n.converter,e);return dp(t,[OM(lp(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Fn.exists(!1))]).then(()=>r)}function GM(n,...e){var t,r,i;n=Ue(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||ck(e[o])||(s=e[o++]);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(ck(e[o])){let p=e[o];e[o]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof et)l=On(n.firestore,br),h=Tw(n._key.path),u={next:p=>{e[o]&&e[o](mG(l,n,p))},error:e[o+1],complete:e[o+2]};else{let p=On(n,Os);l=On(p.firestore,br),h=p._query;let g=new tp(l);u={next:y=>{e[o]&&e[o](new Go(l,g,p,y))},error:e[o+1],complete:e[o+2]},pG(n._query)}return(function(g,y,T,R){let A=new rw(R),P=new QI(y,A,T);return g.asyncQueue.enqueueAndForget(async()=>Hz(await rk(g),P)),()=>{A.Ou(),g.asyncQueue.enqueueAndForget(async()=>$z(await rk(g),P))}})(kM(l),h,a,u)}function dp(n,e){return(function(r,i){let s=new vr;return r.asyncQueue.enqueueAndForget(async()=>Jz(await aG(r),i,s)),s.promise})(kM(n),e)}function mG(n,e,t){let r=t.docs.get(e._key),i=new tp(n);return new Cs(n,i,e._key,r,new Ds(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){sa=i})(ni),ln(new Et("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new br(new NE(r.getProvider("auth-internal")),new ME(o,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new x(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rf(l.options.projectId,h)})(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Me(yP,vP,e),Me(yP,vP,"esm2017")})();var Ou=class{constructor(e){return e}},WM="firestore",Uw=class{constructor(){return Po(WM)}};var jw=new U("angularfire2.firestore-instances");function yG(n,e){let t=Wc(WM,n,e);return t&&new Ou(t)}function vG(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ou(r)}}var _G={provide:Uw,deps:[[new bt,jw]]},EG={provide:Ou,useFactory:yG,deps:[[new bt,jw],lr]};function ofe(n,...e){return Me("angularfire",ri.full,"fst"),wt([EG,_G,{provide:jw,useFactory:vG(n),multi:!0,deps:[De,Le,ii,ps,[new bt,du],[new bt,ko],...e]}])}var afe=Je(zM,!0,2);var cfe=Je(NM,!0,2);var ufe=Je(qM,!0,2);var lfe=Je(xw,!0,2);var dfe=Je(PM,!0);var hfe=Je(GM,!0);var ffe=Je(UM,!0,2),pfe=Je(VM,!0,2);var gfe=Je(HM,!0,2);var mfe=Je($M,!0,2);export{j as a,ie as b,Zu as c,IG as d,wG as e,ze as f,zO as g,Z as h,be as i,Ma as j,YO as k,Ni as l,At as m,mn as n,rx as o,Or as p,Fa as q,We as r,dx as s,ki as t,Va as u,Mi as v,Nl as w,fx as x,px as y,Ys as z,gx as A,dg as B,ja as C,xr as D,hg as E,yx as F,vx as G,Db as H,Oi as I,Cb as J,_x as K,B as L,Ur as M,V as N,St as O,wx as P,U as Q,W as R,M as S,wt as T,ut as U,En as V,iD as W,sD as X,_D as Y,ED as Z,Le as _,ke as $,Tt as aa,Yi as ba,rt as ca,De as da,Xn as ea,Jx as fa,Pt as ga,AD as ha,kt as ia,Yr as ja,Dt as ka,py as la,Ot as ma,Md as na,ns as oa,kC as pa,rL as qa,$C as ra,sL as sa,oL as ta,DL as ua,nr as va,Ny as wa,co as xa,Zi as ya,Qr as za,Y as Aa,SF as Ba,mc as Ca,UA as Da,jA as Ea,mV as Fa,Gt as Ga,Ee as Ha,qA as Ia,zA as Ja,po as Ka,NV as La,WA as Ma,rs as Na,vc as Oa,MV as Pa,OV as Qa,xV as Ra,LV as Sa,FV as Ta,VV as Ua,QA as Va,Gy as Wa,Wy as Xa,JA as Ya,Ky as Za,Yy as _a,XA as $a,$V as ab,eS as bb,rr as cb,nS as db,zV as eb,GV as fb,WV as gb,KV as hb,Ec as ib,s2 as jb,y2 as kb,lS as lb,Qy as mb,dS as nb,fS as ob,I2 as pb,pS as qb,mS as rb,w2 as sb,T2 as tb,b2 as ub,vt as vb,R2 as wb,N2 as xb,k2 as yb,O2 as zb,L2 as Ab,ir as Bb,IS as Cb,Mne as Db,is as Eb,Kd as Fb,uU as Gb,One as Hb,xne as Ib,lU as Jb,go as Kb,PS as Lb,kS as Mb,pU as Nb,mU as Ob,MS as Pb,Iie as Qb,wie as Rb,PU as Sb,dv as Tb,XS as Ub,ij as Vb,$se as Wb,Eo as Xb,mv as Yb,eoe as Zb,toe as _b,noe as $b,wae as ac,Bae as bc,Hae as cc,lu as dc,Mde as ec,Ode as fc,xde as gc,Lde as hc,Ou as ic,ofe as jc,afe as kc,cfe as lc,ufe as mc,lfe as nc,dfe as oc,hfe as pc,ffe as qc,pfe as rc,gfe as sc,mfe as tc,E0 as uc,l0 as vc,Eoe as wc,Ioe as xc,Nj as yc,Oj as zc,Toe as Ac,Lj as Bc,Vj as Cc,V0 as Dc,U0 as Ec,Hj as Fc,qj as Gc,H0 as Hc,boe as Ic,Doe as Jc,Jj as Kc,Zj as Lc,Coe as Mc,Aoe as Nc,Soe as Oc,G0 as Pc,Voe as Qc,Uoe as Rc,W0 as Sc,K0 as Tc};
